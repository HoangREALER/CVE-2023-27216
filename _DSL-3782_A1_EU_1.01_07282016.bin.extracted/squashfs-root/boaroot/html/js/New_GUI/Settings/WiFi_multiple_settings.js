var msg_length;
var submittype = 0;
var cipherType = "";
function wpa(ip,port,secret) {
    this.ip=ip;
    this.port=port;
    this.secret=secret;
}

function normal(wep,encryption,type,defkey,key1,key2,key3,key4) {
    this.wep=wep;
    this.encryption=encryption;
    this.type=type;
    this.defkey=defkey;
    this.key1=key1;
    this.key2=key2;
    this.key3=key3;
    this.key4=key4;
}

function wireless(radio,wmm,ssid,country,channel,autoChannel,superG,auth,normal,wpa,wpapsk) {
    this.radio=radio;
    this.wmm=wmm;
    this.ssid=ssid;
    this.country=country;    
    this.channel=channel;
    this.autoChannel=autoChannel;
    this.superG=superG;
    this.auth=auth;
    this.normal=normal;
    this.wpa=wpa;
    this.wpapsk=wpapsk;
}

var  countdown=0;
var countdown2=0;

function slip_url(original_url) {
	var url = original_url;
	while(url.indexOf('?')!=-1) {
		j=url.indexOf('?')+1;
		url=url.substring(j,url.length);
	}
	return url;
}

function returnToHome()  {
	self.location.href="WiFi_multiple_settings.asp";
}

function initWireless_page() {
	document.getElementById("RADIO_2GHz").style.display = "block";
 	var f=document.getElementById("wifi_form");
	var currentURL=document.location.search;
	
	if(hidden_ssid==1)
		SetCheckBoxEnable("hide_24", true, true);
	else
		SetCheckBoxEnable("hide_24", true, false);

	if(wirelessEnable==1)
		SetCheckBoxEnable("status_24", true, true);
	else
		SetCheckBoxEnable("status_24", true, false);
      
	if(en_accpoint==1)
		SetCheckBoxEnable("sinf_24", true, true);
	else
		SetCheckBoxEnable("sinf_24", true, false);
	
	if(mode_802=="9"||mode_802=="7"||mode_802=="6") {
		SetCheckBoxEnable("wmm_24", true, true);
	} else {
		if(wmm==1)
			SetCheckBoxEnable("wmm_24", true, true);
		else
			SetCheckBoxEnable("wmm_24", true, false);
	}


	if (smode==0)
  		f.lan_wlan_security.value=0;
	
	if(smode==6 ||smode==7 ||smode==9 ) {
		if (smode==6)
			f.lan_wlan_security.value=3;
		else if (smode==7)
			f.lan_wlan_security.value=4;
		else if (smode==9)
			f.lan_wlan_security.value=5;

		//f.lan_wlan_wpatype[1].checked=true;
		document.getElementById("wpatype_8021x").setAttribute("class", "unclick");
		document.getElementById("wpatype_psk").setAttribute("class", "clicked");
		//document.getElementById("wpatypeselect").innerHTML=showWPA3();
		document.getElementById("ShowWPA1").style.display = "none";
		document.getElementById("ShowWPA3").style.display = "inline";
		
		if(currentURL_ac.indexOf("smode")==-1) {
			if((wireless_encrypttype != "TKIP") && (wireless_encrypttype != "AES") && ((wireless_encrypttype != "TKIPAES"))) {
				if(mode_802=="6") {
					f.cipher_type.value = "TKIPAES";
				} else {
					if(smode==6)
						f.cipher_type.value = "TKIP";
					else if(smode==7 )
						f.cipher_type.value = "AES";
					else
						f.cipher_type.value = "TKIPAES";
				}
			} else {
				if(mode_802=="6"){
					//if(f.lan_wlan_security[3].selected)
					if(f.lan_wlan_security.value == 3)
						f.cipher_type.value = "TKIPAES";
					else {
						if(wireless_encrypttype_ac != "TKIP")
							f.cipher_type.value=wireless_encrypttype;
						else
							f.cipher_type.value = "TKIPAES";
					}
				} else {
					if(wireless_encrypttype=="AES") {
						if(smode==6)
							f.cipher_type.value="TKIP";
						else
							f.cipher_type.value=wireless_encrypttype;
					} else
						f.cipher_type.value=wireless_encrypttype;
				}
				if(f.cipher_type.value == "")
					f.cipher_type.value="TKIPAES";
				cipherType = f.cipher_type.value;
			}
		} else if(smode==9){
			if((wireless_encrypttype != "TKIP") && (wireless_encrypttype != "AES") && ((wireless_encrypttype != "TKIPAES"))) {
				if(mode_802=="6"){
					f.cipher_type.value = "TKIPAES";
				} else {
					if(smode==6)
						f.cipher_type.value = "TKIP";
					else if(smode==7 )
						f.cipher_type.value = "AES";
					else
						f.cipher_type.value = "TKIPAES";
				}
			} else {
				if(mode_802=="6"){
					//if(f.lan_wlan_security[3].selected)
					if(f.lan_wlan_security.value == 3)
						f.cipher_type.value = "TKIPAES";
					else {
						if(wireless_encrypttype_ac != "TKIP")
							f.cipher_type.value=wireless_encrypttype;
						else
							f.cipher_type.value = "TKIPAES";
					}
				} else {
					if(wireless_encrypttype=="AES") {
						if(smode==6)
							f.cipher_type.value="TKIP";
						else
							f.cipher_type.value=wireless_encrypttype;
					} else
						f.cipher_type.value=wireless_encrypttype;
				}
				if(f.cipher_type.value == "")
					f.cipher_type.value="TKIPAES";
			}
		}
		
		f.lan_wlan_groupkeyinterval.value=groupkey;
		f.lan_wlan_string.value = wpapsk;
	} else if (smode==2 ||smode==3 ||smode==4) {
		if (smode==2)
			//f.lan_wlan_security_ac[3].selected=true;
			f.lan_wlan_security.value=3;
		else if (smode==3)
			//f.lan_wlan_security_ac[4].selected=true;
			f.lan_wlan_security.value=4;
		else if (smode==4)
			//f.lan_wlan_security_ac[5].selected=true;
			f.lan_wlan_security.value=5;

		//f.lan_wlan_wpatype[0].checked=true;
		document.getElementById("wpatype_8021x").setAttribute("class", "clicked");
		document.getElementById("wpatype_psk").setAttribute("class", "unclick");
		if(currentURL.indexOf("smode")==-1) {
			if((wireless_encrypttype != "TKIP") && (wireless_encrypttype != "AES") && ((wireless_encrypttype != "TKIPAES"))) {
				if(mode_802=="6"){
					f.cipher_type.value = "TKIPAES";
				} else {
					if(smode==2)
						f.cipher_type.value = "TKIP";
					else if(smode==3)
						f.cipher_type.value = "AES";
					else
						f.cipher_type.value = "TKIPAES";
				}
				if(f.cipher_type_ac.value == "")
					f.cipher_type_ac.value="TKIPAES";
			} else {
				if(mode_802=="6"){
					//if(f.lan_wlan_security[3].selected)
					if(f.lan_wlan_security.value == 3)
						f.cipher_type.value = "TKIPAES";
					else {
						if(wireless_encrypttype_ac != "TKIP")
							f.cipher_type.value=wireless_encrypttype;
						else
							f.cipher_type.value = "TKIPAES";
					}
				} else {
					if(wireless_encrypttype=="AES") {
						if(smode==2)
							f.cipher_type.value="TKIP";
						else
							f.cipher_type.value=wireless_encrypttype;
					} else
						f.cipher_type.value=wireless_encrypttype;
				}
			}			
		}
		if(f.cipher_type.value == "")
			f.cipher_type.value = "TKIPAES";
		//document.getElementById("wpatypeselect").innerHTML=showWPA1();
		document.getElementById("ShowWPA1").style.display = "inline";
		document.getElementById("ShowWPA3").style.display = "none";
		f.lan_wlan_groupkeyinterval.value=groupkey;
		f.lan_wlan_serverip.value=serverip;
		f.lan_wlan_port.value=wlan_port;
		f.lan_wlan_secret.value=wlan_secret;
	}

	if (smode==1 || smode==5 || smode==8) {	
	    //f.lan_wlan_security[1].selected=true;
	    f.lan_wlan_security.value = 1;
	    f.lan_wlan_authtype.value=wepautype;
	}

	if(smode==10 || smode==12 || smode==11) {
		f.lan_wlan_security.value=2;
		f.lan_wlan_authtype.value=wepautype;
	}
	
	if((smode==1)||(smode==5)||(smode==8)||(smode==10)||(smode==11)||(smode==12)) {
		numx=wireless_wep_selection;
		if((numx==1)||(numx==2)||(numx==3)||(numx==4)) {
			numx--;
			//f.lan_wlan_encryptionselection[numx].checked=true;
			if(numx==0)
			{
				document.getElementById("radio_encryptionselection_A").setAttribute("class", "clicked");
				document.getElementById("radio_encryptionselection_B").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_C").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_D").setAttribute("class", "unclick");
			}
			else if(numx==1)
			{
				document.getElementById("radio_encryptionselection_A").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_B").setAttribute("class", "clicked");
				document.getElementById("radio_encryptionselection_C").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_D").setAttribute("class", "unclick");
			}
			else if(numx==2)
			{
				document.getElementById("radio_encryptionselection_A").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_B").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_C").setAttribute("class", "clicked");
				document.getElementById("radio_encryptionselection_D").setAttribute("class", "unclick");
			}
			else if(numx==3)
			{
				document.getElementById("radio_encryptionselection_A").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_B").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_C").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_D").setAttribute("class", "clicked");
			}
			f.lan_wlan_encryption_A.value=wireless_wep_key_1;
			f.lan_wlan_encryption_B.value=wireless_wep_key_2;
			f.lan_wlan_encryption_C.value=wireless_wep_key_3;
			f.lan_wlan_encryption_D.value=wireless_wep_key_4;
		} else{
			//f.lan_wlan_encryptionselection[0].checked=true;
			document.getElementById("radio_encryptionselection_A").setAttribute("class", "clicked");
			document.getElementById("radio_encryptionselection_B").setAttribute("class", "unclick");
			document.getElementById("radio_encryptionselection_C").setAttribute("class", "unclick");
			document.getElementById("radio_encryptionselection_D").setAttribute("class", "unclick");
		}
	}
	
   	Disable_wirless("upload");
}
function Disable_wirless(tmp) {
	var f=document.getElementById("wifi_form");
	point_control(tmp);
	if(f.status_24_ck.checked) {
		//if(document.getElementById("select_bgmode_0").value == 0)
			//f.lan_wlan_isAccesspoint_double_check.disabled=true;
			//document.getElementById("sinf_24").disabled= true;
		//else
			//f.lan_wlan_isAccesspoint_double_check.disabled = false;
			document.getElementById("sinf_24").disabled= false;
		$("#select_bgmode_0").selectbox("enable");
	} else {
		//f.lan_wlan_isAccesspoint_double_check.disabled = true;
		document.getElementById("sinf_24").disabled= true;
		$("#select_bgmode_0").selectbox("disable");
		/*if(document.getElementById("select_bgmode_0").value == 0) {
			//f.wifi_enable.disabled=true;
			document.getElementById("wifi_enable_24").disabled= true;
			f.newPIN.disabled=true;
			f.unconfigure.disabled=true;
		}*/
					
		//f.has_hiddenSsid[0].disabled=true;
		//f.has_hiddenSsid[1].disabled=true;
		document.getElementById("hide_24").disabled= true;
		//f.wmm_enable[0].disabled=true;
		//f.wmm_enable[1].disabled=true;
		document.getElementById("wmm_24").disabled= true;
		//lan_wlan_security.disabled=true;
		$("#select_security").selectbox("disable");
		if(f.WirelessSecuritytypeValue.value.indexOf("WEP")!=-1) {	
			//lan_wlan_authtype.disabled=true;
			$("#lan_wlan_authtype").selectbox("disable");
			
			//f.lan_wlan_encryptionselection[0].disabled=true;
			document.getElementById("radio_encryptionselection_A").disabled= true;
			f.lan_wlan_encryption_A.disabled=true;

			//f.lan_wlan_encryptionselection[1].disabled=true;
			document.getElementById("radio_encryptionselection_B").disabled= true;
			f.lan_wlan_encryption_B.disabled=true;

			//f.lan_wlan_encryptionselection[2].disabled=true;
			document.getElementById("radio_encryptionselection_C").disabled= true;
			f.lan_wlan_encryption_C.disabled=true;
			
			//f.lan_wlan_encryptionselection[3].disabled=true;
			document.getElementById("radio_encryptionselection_D").disabled= true;
			f.lan_wlan_encryption_D.disabled=true;
		}

		if(f.WirelessSecuritytypeValue.value.indexOf("WPA")!=-1) {
			f.lan_wlan_groupkeyinterval.disabled=true;
			//cipher_type.disabled=true;
			$("#cipher_type").selectbox("disable");
			//f.lan_wlan_wpatype_0.disabled=true;
			//f.lan_wlan_wpatype_1.disabled=true;
			document.getElementById("wpatype_8021x").disabled= true;
			document.getElementById("wpatype_psk").disabled= true;
			if(f.WirelessSecuritytypeValue.value.indexOf('PSK')!=-1)
				f.lan_wlan_string.disabled=true;
			else {
				f.lan_wlan_serverip.disabled=true;
				f.lan_wlan_port.disabled=true;
				f.lan_wlan_secret.disabled=true;
			}
		}
	}
}

function changeSecurity(ssidindex) {
	var f=document.getElementById("wifi_form");
	var flag = 0;
      	if(ssid_status)
      	{
      	   for (var i=0;i < ssid_status;i++)				
		{	if(dataLists[i][0] ==1)
		      {
				if(i == 0)
					continue;	
		           	flag++;
			}
		 }
      	}
	if(flag == 0)
		return;
  	if (f.lan_wlan_security.value == 0) {
		if(confirm(_change_security_info)==true)
			f.action='WiFi_multiple_settings.asp?smode=0';
		else
			security_type();
  	}

   	//if (f.lan_wlan_security[1].selected) {  
   	if(f.lan_wlan_security.value == 1) {
  	    if(parseInt(mode_802)==6) {
			alert(_error_wepand802_chance);
			security_type();
			return false;
  	    }
		f.action='WiFi_multiple_settings.asp?smode=1';
  	}

	//if (f.lan_wlan_security[2].selected) {
	if(f.lan_wlan_security.value == 2) {
  	    if(parseInt(mode_802)==6) {
			alert(_error_wepand802_chance);
			security_type();
			return false;
  	    }
		f.action='WiFi_multiple_settings.asp?smode=10';
  	}

   	//if (f.lan_wlan_security[3].selected)
   	if(f.lan_wlan_security.value == 3)
		f.action='WiFi_multiple_settings.asp?smode=6';
   	//if (f.lan_wlan_security[4].selected)
   	if(f.lan_wlan_security.value == 4)
		f.action='WiFi_multiple_settings.asp?smode=7';
	//if (f.lan_wlan_security[5].selected)
	if(f.lan_wlan_security.value == 5)
		f.action='WiFi_multiple_settings.asp?smode=9';

	f.WirelessSecuritytypeFlag.value = 1;
	f.submit();
}

function security_type() {
	var f=document.getElementById("wifi_form");
	if(wireless_authtype=="OPEN")
		 //f.lan_wlan_security[0].selected = true;
		 f.lan_wlan_security.value == 0;
	else if(wireless_authtype=="WEP-64Bits")
		 //f.lan_wlan_security[1].selected = true;
		 f.lan_wlan_security.value == 1;
	else if(wireless_authtype=="WEP-128Bits")
		 //f.lan_wlan_security[2].selected = true;
		 f.lan_wlan_security.value == 2;
	else if(wireless_authtype=="WPAPSK"||wireless_authtype=="WPA")
		 //f.lan_wlan_security[3].selected = true;
		 f.lan_wlan_security.value == 3;
	else if(wireless_authtype=="WPA2PSK"||wireless_authtype=="WPA2")
		 //f.lan_wlan_security[4].selected = true;
		 f.lan_wlan_security.value == 4;
	else if(wireless_authtype=="WPAPSKWPA2PSK"||wireless_authtype=="WPA1WPA2")
		 //f.lan_wlan_security[5].selected = true;
		 f.lan_wlan_security.value == 5;
}

function doSave(num) {
	$("label[class='error']").html("");
	var f = document.getElementById("wifi_form");
	var flag1 = 0;
	if(ssid_status)
      	{
      	   for (var i=0;i < ssid_status;i++)				
		{	if(dataLists[i][0] ==1)
		      {
				if(i == 0)
					continue;
				flag1++;
			}
		 }
      	}
	if(flag1 == 0)
	{
		alert("Please add 2.4GHz SSID first!");
		return;
	}
	if(f.status_24_ck.checked)
	{
		f.wirelesstotalstatusflag.value=1;
		//if(f.lan_wlan_isAccesspoint_double_check.checked) {
		if(f.sinf_24_ck.checked) {
			f.wirelesseEnablessidflag.value = 1;
			if(!checkparameter()) {
				$("label[class='error']").show();
				return false;
			} else {
				//if(f.has_hiddenSsid[0].checked)
				if(f.hide_24_ck.checked == false)
					f.wirelessehiddenssidflag.value = 1;
				else
					f.wirelessehiddenssidflag.value = 2;
				
				//if(f.wmm_enable[0].checked)
				if(f.wmm_24_ck.checked == false)
					f.wirelessewmmstatusflag.value = 1;
				else
					f.wirelessewmmstatusflag.value = 2;

				//if(f.lan_wlan_security[0].selected) {
				if(f.lan_wlan_security.value == 0) {
					f.WirelessSecuritytypeFlag.value = 2;
					f.WirelessSecuritytypeValue.value = "OPEN";
				//} else if(f.lan_wlan_security[1].selected ||f.lan_wlan_security[2].selected) {
				} else if(f.lan_wlan_security.value == 1 ||f.lan_wlan_security.value == 2) {
					//if(f.lan_wlan_security[1].selected)
					if(f.lan_wlan_security.value == 1)
						f.WirelessSecuritytypeValue.value = "WEP-64Bits";
					//else if(f.lan_wlan_security[2].selected)
					else if(f.lan_wlan_security.value == 2)
						f.WirelessSecuritytypeValue.value = "WEP-128Bits";
					
					f.WirelessSecuritytypeFlag.value = 3;
					//if(f.lan_wlan_encryptionselection[0].checked)
					if(document.getElementById('radio_encryptionselection_A').getAttribute('class') == 'clicked')
						f.Wirelesswepkeyflag.value = 1;
					//else if(f.lan_wlan_encryptionselection[1].checked)
					else if(document.getElementById('radio_encryptionselection_B').getAttribute('class') == 'clicked')
						f.Wirelesswepkeyflag.value = 2;
					//else if (f.lan_wlan_encryptionselection[2].checked)
					else if(document.getElementById('radio_encryptionselection_C').getAttribute('class') == 'clicked')
						f.Wirelesswepkeyflag.value = 3;
					//else if (f.lan_wlan_encryptionselection[3].checked)
					else if(document.getElementById('radio_encryptionselection_D').getAttribute('class') == 'clicked')
						f.Wirelesswepkeyflag.value = 4;
			//	} else if(f.lan_wlan_security[3].selected ||f.lan_wlan_security[4].selected ||f.lan_wlan_security[5].selected) {
			} else if(f.lan_wlan_security.value == 3 ||f.lan_wlan_security.value == 4 ||f.lan_wlan_security.value == 5) {
					//if(f.lan_wlan_security[3].selected) {
					if(f.lan_wlan_security.value == 3) {
						//if(f.lan_wlan_wpatype_0.checked) {
						if(document.getElementById('wpatype_8021x').getAttribute('class') == 'clicked'){
							f.WirelessSecuritytypeFlag.value = 4;
							f.WirelessSecuritytypeValue.value = "WPA";
						} else {
							f.WirelessSecuritytypeFlag.value = 5;
							f.WirelessSecuritytypeValue.value = "WPAPSK";
						}
					}

					//if(f.lan_wlan_security[4].selected) {
					if(f.lan_wlan_security.value == 4) {
						//if(f.lan_wlan_wpatype_0.checked) {
						if(document.getElementById('wpatype_8021x').getAttribute('class') == 'clicked'){
							f.WirelessSecuritytypeFlag.value = 4;
							f.WirelessSecuritytypeValue.value = "WPA2";							
						} else {
							f.WirelessSecuritytypeFlag.value = 5;
							f.WirelessSecuritytypeValue.value = "WPA2PSK";
						}
					}

					//if(f.lan_wlan_security[5].selected) {
					if(f.lan_wlan_security.value == 5) {
						//if(f.lan_wlan_wpatype_0.checked) {
						if(document.getElementById('wpatype_8021x').getAttribute('class') == 'clicked'){
							f.WirelessSecuritytypeFlag.value = 4;
							f.WirelessSecuritytypeValue.value = "WPA1WPA2";							
						} else {
							f.WirelessSecuritytypeFlag.value = 5;
							f.WirelessSecuritytypeValue.value = "WPAPSKWPA2PSK";
						}
					}
				}
			}
		}
	}
	f.wirelessesavecfgflag.value = 1;
	f.action =  "WiFi_multiple_settings_loading.asp?";
	document.getElementById("CreatePopAlertMessage").style.display = "inline";
	document.getElementById("waitSettingFinish").style.display = "inline";
	Start_reciprocal_Number_RestoreConfiguration();
	setTimeout('ajaxSubmit(document.getElementById("wifi_form"), function(){});', 300);
	//f.action =  "/cgi-bin/ADVANCED/restartwireless.asp?";
	//f.submit();
}
function checkSSID_ac(name,id) {
	for(var i=0;i<dataLists_ac.length;i++) {
		if(dataLists_ac[i][0]==1)
		{
			if(id!=i)
			{
				if(name==dataLists_ac[i][1])
					return false;
			}
		}
	}
	return true;
}
function checkSSID(name,id) {
	for(var i=0;i<dataLists.length;i++) {
		if(dataLists[i][0]==1)
		{
			if(id!=i)
			{
				if(name==dataLists[i][1])
					return false;
			}
		}
	}
	return true;
}
function isSSIDInvalid(source) {
	var sourcestr=new String(source);
	var tempstr;
	for(var strposition=0;strposition<=sourcestr.length-1;strposition++) {
		tempstr=sourcestr.substr(strposition,1);
		if(tempstr.charCodeAt(0)==45 || (tempstr.charCodeAt(0)>=48 && tempstr.charCodeAt(0)<=57 )||(tempstr.charCodeAt(0)>=65 && tempstr.charCodeAt(0)<=90 )||(tempstr.charCodeAt(0)>=97 && tempstr.charCodeAt(0)<=122 ))
			continue;
		else
			return true;
	}
	return false;
}
/*function doSave(num) {
	var wps_error_2_flag = 0;
	var wps_error_flag = 0;
	var wps_error_1_flag = 0;
	var wps_error_3_flag = 0;
	var _wps_error_flag = 0;
	var wps_error_4_flag = 0;
	$("label[class='error']").html("");
	var f = document.getElementById("wifi_form");
	//if(f.status_24_ck.checked ||f.status_ac_ck.checked )
	//{
		if(!checkparameter_ac())
				return false;
			else {
				if(f.lan_wlan_security_ac.value == 0) {
					f.WirelessSecuritytypeFlag_ac.value = 2;
					f.WirelessSecuritytypeFlag.value = 2;
					f.WirelessSecuritytypeValue_ac.value = "OPEN";
					f.WirelessSecuritytypeValue.value = "OPEN";
				} else if(f.lan_wlan_security_ac.value == 1 ||f.lan_wlan_security_ac.value == 2) {
					if(f.lan_wlan_security_ac.value == 1)
					{
						f.WirelessSecuritytypeValue_ac.value = "WEP-64Bits";
						f.WirelessSecuritytypeValue.value = "WEP-64Bits";
					}
					else if(f.lan_wlan_security_ac.value == 2)
					{
						f.WirelessSecuritytypeValue_ac.value = "WEP-128Bits";
						f.WirelessSecuritytypeValue.value = "WEP-128Bits";
					}
					f.WirelessSecuritytypeFlag_ac.value = 3;
					f.WirelessSecuritytypeFlag.value = 3;
					if(document.getElementById('radio_encryptionselection_A_ac').getAttribute('class') == 'clicked')
					{
						f.Wirelesswepkeyflag_ac.value = 1;
						f.Wirelesswepkeyflag.value = 1;
					}
					else if(document.getElementById('radio_encryptionselection_B_ac').getAttribute('class') == 'clicked')
					{
						f.Wirelesswepkeyflag_ac.value = 2;
						f.Wirelesswepkeyflag.value = 2;
					}
					else if(document.getElementById('radio_encryptionselection_C_ac').getAttribute('class') == 'clicked')
					{
						f.Wirelesswepkeyflag_ac.value = 3;
						f.Wirelesswepkeyflag.value = 3;
					}
					else if(document.getElementById('radio_encryptionselection_D_ac').getAttribute('class') == 'clicked')
					{
						f.Wirelesswepkeyflag_ac.value = 4;
						f.Wirelesswepkeyflag.value = 4;
					}	
				}else if(f.lan_wlan_security_ac.value == 3 ||f.lan_wlan_security_ac.value == 4 ||f.lan_wlan_security_ac.value == 5) {
					if(f.lan_wlan_security_ac.value == 3) {
						if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked'){
							f.WirelessSecuritytypeFlag_ac.value = 4;
							f.WirelessSecuritytypeValue_ac.value = "WPA";
							f.WirelessSecuritytypeFlag.value = 4;
							f.WirelessSecuritytypeValue.value = "WPA";
							
						} else {
							f.WirelessSecuritytypeFlag_ac.value = 5;
							f.WirelessSecuritytypeValue_ac.value = "WPAPSK";
							f.WirelessSecuritytypeFlag.value = 5;
							f.WirelessSecuritytypeValue.value = "WPAPSK";
						}						
					}

					if(f.lan_wlan_security_ac.value == 4) {
						if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked'){
							f.WirelessSecuritytypeFlag_ac.value = 4;
							f.WirelessSecuritytypeValue_ac.value = "WPA2";
							f.WirelessSecuritytypeFlag.value = 4;
							f.WirelessSecuritytypeValue.value = "WPA2";
						} else {
							f.WirelessSecuritytypeFlag_ac.value = 5;
							f.WirelessSecuritytypeValue_ac.value = "WPA2PSK";
							f.WirelessSecuritytypeFlag.value = 5;
							f.WirelessSecuritytypeValue.value = "WPA2PSK";
						}
					}
					if(f.lan_wlan_security_ac.value == 5) {
						if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked'){
							f.WirelessSecuritytypeFlag_ac.value = 4;
							f.WirelessSecuritytypeValue_ac.value = "WPA1WPA2";
							f.WirelessSecuritytypeFlag.value = 4;
							f.WirelessSecuritytypeValue.value = "WPA1WPA2";
						} else {
							f.WirelessSecuritytypeFlag_ac.value = 5;
							f.WirelessSecuritytypeValue_ac.value = "WPAPSKWPA2PSK";
							f.WirelessSecuritytypeFlag.value = 5;
							f.WirelessSecuritytypeValue.value = "WPAPSKWPA2PSK";
						}
					}
				}
			}
	//}
	if(f.status_24_ck.checked)
	{
		f.wirelesstotalstatusflag.value=1;

		if(f.sssid.value.length<3 ||f.sssid.value.length>32 ) {
			document.getElementById("ssid_error").innerHTML = "<br/>"+"SSID length should be between 3 and 32 alphanumeric characters only including hyphen.";			
			return false;
		} else if (isSSIDInvalid(f.sssid.value)) {
			document.getElementById("ssid_error").innerHTML = "<br/>"+"SSID length should be between 3 and 32 alphanumeric characters only including hyphen.";			
			return false;
		}
		if(checkSSID(f.sssid.value,0)==false) {
			document.getElementById("ssid_error").innerHTML = "<br/>"+"This ssid already exists.";			
			return false;
		}
		
		if(f.sinf_24_ck.checked) {
			f.wirelesseEnablessidflag.value = 1;
			//if(document.getElementById("select_bgmode_0").value == 0) {
				if(f.wifi_enable_24_ck.checked)
					f.wirelessewpswificfg.value = 1;
				else
					f.wirelessewpswificfg.value = 2;
			//}
			if(f.hide_24_ck.checked == false)
				f.wirelessehiddenssidflag.value = 1;
			else
				f.wirelessehiddenssidflag.value = 2;
			
			if(f.wmm_24_ck.checked == false)
				f.wirelessewmmstatusflag.value = 1;
			else
				f.wirelessewmmstatusflag.value = 2;
			//if(document.getElementById("select_bgmode_0").value == 0) {
			        if(f.closewpsflag.value ==0) {
						if(f.hide_24_ck.checked){
						    if(f.wifi_enable_24_ck.checked){
								if(confirm(_wps_error_2)==true)
					  	    		{
					  	    			f.closewpsflag.value = 1;
									wps_error_2_flag = 1;	
								}
								else
									return false;
						    }
						} else {
							if(f.WirelessSecuritytypeValue.value =="WPA" ||f.WirelessSecuritytypeValue.value=="WPA2" ||f.WirelessSecuritytypeValue.value=="WPA1WPA2" ||f.WirelessSecuritytypeValue.value=="WPAPSK" ||  f.WirelessSecuritytypeValue.value=="WEP-64Bits" ||f.WirelessSecuritytypeValue.value=="WEP-128Bits" ) {
					  			if(f.wifi_enable_24_ck.checked){
							  		if (confirm(_wps_error)==true)
					  	    			{
					  	    				f.closewpsflag.value = 1;
										wps_error_flag = 1;
									}
									else
										return false;
					  			}
					  		} else {							     
							    if(f.WirelessSecuritytypeValue.value.indexOf("WPA")!=-1) {
									if(f.cipher_type_ac.value=="TKIP") {
										if(f.wifi_enable_24_ck.checked){
							  	 			if (confirm(_wps_error_1)==true)
								  	    		{
								  	    			f.closewpsflag.value = 1;
												wps_error_1_flag = 1;
											}
											else
												return false;
										}
									}
							    }
							}
						}
			        } else if(f.closewpsflag.value ==2) {
					 	 if(f.wifi_enable_24_ck.checked){
						    if (confirm(wps_error_3)==true) {
								f.WirelessSecuritytypeValue.value="OPEN";
								f.wirelessehiddenssidflag.value = 1;
								wps_error_3_flag = 1;
							} else
								return false;
					 	 }
					} else if(f.closewpsflag.value ==3) {
					 	if(f.wifi_enable_24_ck.checked){
					 		if(f.WirelessSecuritytypeValue.value.indexOf("WPA")!=-1 && document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked') {
					 			if (confirm(_wps_error)==true)
				  	    			{
				  	    				f.closewpsflag.value = 1;
									_wps_error_flag = 1;
								}
								else
									return false;
					 		} else {
					 			if (confirm(wps_error_4)==true)
								{
									f.cipher_type_ac.value="AES";
									wps_error_4_flag = 1;
								}
								else
									return false;
					 		}							
					 	}
					}
			    //}
		}
	}
	if(f.status_ac_ck.checked) {
		f.wirelesstotalstatusflag_ac.value=1;

		if(f.sssid_ac.value.length<3 ||f.sssid_ac.value.length>32 ) {
			document.getElementById("ssid_ac_error").innerHTML = "<br/>"+"SSID length should be between 3 and 32 alphanumeric characters only including hyphen.";			
			return false;
		} else if (isSSIDInvalid(f.sssid_ac.value)) {
			document.getElementById("ssid_ac_error").innerHTML = "<br/>"+"SSID length should be between 3 and 32 alphanumeric characters only including hyphen.";			
			return false;
		}
		if(checkSSID_ac(f.sssid_ac.value,0)==false) {
			document.getElementById("ssid_ac_error").innerHTML = "<br/>"+"This ssid already exists.";			
			return false;
		}
		
		if(f.sinf_ac_ck.checked) {
			f.wirelesseEnablessidflag_ac.value = 1;
			//if(document.getElementById("select_bgmode_0_ac").value == 0) {
				if(f.wifi_enable_ac_ck.checked)
					f.wirelessewpswificfg_ac.value = 1;
				else
					f.wirelessewpswificfg_ac.value = 2;
			//}
				if(f.hide_ac_ck.checked == false)
					f.wirelessehiddenssidflag_ac.value = 1;
				else
					f.wirelessehiddenssidflag_ac.value = 2;
				
				if(f.wmm_ac_ck.checked == false)
					f.wirelessewmmstatusflag_ac.value = 1;
				else
					f.wirelessewmmstatusflag_ac.value = 2;

				//if(document.getElementById("select_bgmode_0_ac").value == 0) {
			        if(f.closewpsflag_ac.value ==0) {
						if(f.hide_ac_ck.checked){
						    if(f.wifi_enable_ac_ck.checked){
								if(wps_error_2_flag == 1)
									f.closewpsflag_ac.value = 1;
								else
								{
									if (confirm(_wps_error_2)==true)
							  	    		f.closewpsflag_ac.value = 1;
									else
										return false;
								}
							}
						} else {
							if(f.WirelessSecuritytypeValue_ac.value =="WPA" ||f.WirelessSecuritytypeValue_ac.value=="WPA2" ||f.WirelessSecuritytypeValue_ac.value=="WPA1WPA2" ||f.WirelessSecuritytypeValue_ac.value=="WPAPSK" ||  f.WirelessSecuritytypeValue_ac.value=="WEP-64Bits" ||f.WirelessSecuritytypeValue_ac.value=="WEP-128Bits" ) {
					  			if(f.wifi_enable_ac_ck.checked){
									if(wps_error_flag == 1)
										f.closewpsflag_ac.value = 1;
									else
									{
										if (confirm(_wps_error)==true)
						  	    				f.closewpsflag_ac.value = 1;
										else
											return false;
									}
								}
					  		} else {
							    if(f.WirelessSecuritytypeValue_ac.value.indexOf("WPA")!=-1) {
									if(f.cipher_type_ac.value=="TKIP") {
										if(f.wifi_enable_ac_ck.checked){
											if(wps_error_1_flag == 1)
												f.closewpsflag_ac.value = 1;
											else
							  	 			{
							  	 				if (confirm(_wps_error_1)==true)
								  	    				f.closewpsflag_ac.value = 1;
												else
													return false;
											}
										}
									}
							    }
							}
						}
			        } else if(f.closewpsflag_ac.value ==2) {
					 	if(f.wifi_enable_ac_ck.checked){
							if(wps_error_3_flag == 1)
							{
								f.WirelessSecuritytypeValue_ac.value="OPEN";
								f.wirelessehiddenssidflag_ac.value = 1;
							}
							else
							{
								if (confirm(wps_error_3)==true) {
									f.WirelessSecuritytypeValue_ac.value="OPEN";
									f.wirelessehiddenssidflag_ac.value = 1;
								} else
									return false;
							}
						}
					} else if(f.closewpsflag_ac.value ==3) {
					 	if(f.wifi_enable_ac_ck.checked){
					 		if(f.WirelessSecuritytypeValue_ac.value.indexOf("WPA")!=-1 && document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked') {
								if(_wps_error_flag == 1)
									f.closewpsflag_ac.value = 1;
								else
								{
									if (confirm(_wps_error)==true)
						  	    			f.closewpsflag_ac.value = 1;
									else
										return false;
								}
				 			} else {
				 				if(wps_error_4_flag == 1)
									f.cipher_type_ac.value="AES";
								else
								{
									if (confirm(wps_error_4)==true)
										f.cipher_type_ac.value="AES";
									else
										return false;
								}
							}
					 	}
					}
			  	//}
		}
	}

	if (checkParameter_adv()==false) {
		return false;
	} else 
	{
	       //if(f.bgMode.selectedIndex >= 3)
		//   	f.Is11nMode.value = 1;
		//   else
		//   	f.Is11nMode.value = 0;
		 if((f.bgMode.value == 1)||(f.bgMode.value == 4)||(f.bgMode.value == 0))
		   	f.Is11nMode.value = 0;
		 else
		   	f.Is11nMode.value = 1;
		//if(f.channelMode.selectedIndex == 1)
		if(f.channelMode.value == 1)
				f.conexistencecheckflag.value = 1;
		//else if(f.channelMode.selectedIndex == 2)
		else if(f.channelMode.value == 2)
				f.conexistencecheckflag.value = 0;
		else
				f.conexistencecheckflag.value = 1;
		if(f.channelMode.value == 2)
			f.channelMode.value = 1;
		if(f.checkbox_is_accesspoint_0_p_ck.checked)
			f.autochancecheckflag.value = 1;
		else
			f.autochancecheckflag.value = 0;
		f.savecfg.value=1;
   	}
	if (checkParameter_adv_ac()==false) {
		return;
	} else 
	{
	       //if(f.bgMode_ac.selectedIndex >= 3)
	       if(f.bgMode_ac.value == 15)
		   	f.Is11nMode_ac.value = 1;
		   else
		   	f.Is11nMode_ac.value = 0;
		if(f.ieee_80211h_ck.checked)
			f.ieee_80211h_ac.value = 1;
		else
			f.ieee_80211h_ac.value = 0;
		if(f.checkbox_is_accesspoint_0_p_ac_ck.checked)
			f.autochancecheckflag_ac.value = 1;
		else
			f.autochancecheckflag_ac.value = 0;
		f.savecfg_ac.value=1;
   	}
	
	f.wirelessesavecfgflag.value = 1;
	f.wirelessesavecfgflag_ac.value = 1;
	f.action =  "WiFi_loding.asp?";
	document.getElementById("CreatePopAlertMessage").style.display = "inline";
	document.getElementById("waitSettingFinish").style.display = "inline";
	Start_reciprocal_Number_RestoreConfiguration();
	setTimeout('ajaxSubmit(document.getElementById("wifi_form"), function(){});', 300);
}*/
function goIndex(n) {
	var f = document.getElementById("wifi_form");
	f.WirelessSSIDChangeFlag.value = 1;
	f.action = "WiFi_multiple_settings.asp?";
	f.submit();
}

function showWEP() {
	var sctr=new String();
	sctr="";
	sctr+="		<tr>";
	sctr+="			<th>Auth. Type: </th>";
	sctr+="			<td><div class=\"styled-select\"><select id='lan_wlan_authtype' name='lan_wlan_authtype'>";
	
	sctr+="				<option value='OpenSystem' >Open</option>";
	sctr+="				<option value='SharedKey'>Shared</option>";
	sctr+="				<option value='WEPAuto' >AUTO</option>";

	sctr+="			</select></div>";
	sctr+="		</td>";
	sctr+="	</tr>";
	//sctr+="	</table>";
	//sctr+="	</div>";
	//sctr+="	<div class='box'>";
	//sctr+="	<h2>WEP</h2>";
	//sctr+="	<table cellpadding='1' cellspacing='1' border='0' width='525'>";
	sctr+="		<tr>";
	sctr+="		<th>";
	sctr+="			<div class =\"title\">WEP Key</div>";
	sctr+="		</th>";
	sctr+="		<td></td>";
	sctr+="		</tr>";
	/*sctr+="		<tr>";
	sctr+="		<td>";
	sctr+="				WEP is the wireless encryption standard.To use it you must enter the same key(s) into the<br>";
	sctr+="router and the wireless stations For 64 bit keys you must enter 10 hex digits into each key box.<br> ";
	sctr+="For 128 bit keys you must enter 26 hex digits into each key box.A hex digit is either a number<br>";
	sctr+=" from 0 to 9 or a letter from a to f, A to F.For the most secure use of WEP set the authentication type<br>";
	sctr+="to \"Shared Key\" when WEP is enabled.<br><br>";
	sctr+="You may also enter any text string into a WEP key box,in which case it will be converted into a<br>";
	sctr+="hexadecimal key using the ASCII values of the characters.A maximum of 5 text characters can<br>";
	sctr+="be entered for 64 bit keys,and a maximum of 13 characters for 128 bit keys.";
	sctr+="		</td>";
	sctr+="	</tr>";
	sctr+="	</table>";
	sctr+="	<table cellpadding='1' cellspacing='1' border='0' width='525'>";*/
	sctr+="		<tr>";
	//sctr+="		<td>";
	//sctr+="		</td>";
	sctr+="		<th>";
	sctr+="		Selection</th>";
	sctr+="		<td>";
	sctr+="		Key</td>";
	sctr+="	</tr>";
	sctr+="		<tr>";
	//sctr+="		<input id='radio_encryptionselection_A' type='radio' name='lan_wlan_encryptionselection' class='radio' value='A'  /></th>";
	sctr+="<td align=\"right\"><div id=\"radio_encryptionselection_A\"  class=\"clicked\" onClick=\"checkkey(0);\"></div></td>";
	sctr+="		<td>";
	sctr+="		<input id='text_encryption_A' type='text' name='lan_wlan_encryption_A' class='text' value='' maxlength='26'/></td>";
	sctr+="	</tr>";
	sctr+="		<tr>";
	//sctr+="		<input id='radio_encryptionselection_B' type='radio' name='lan_wlan_encryptionselection' class='radio' value='B'  /></th>";
	sctr+="<td align=\"right\"><div id=\"radio_encryptionselection_B\"  class=\"unclick\" onClick=\"checkkey(1);\"></div></td>";
	sctr+="		<td>";
	sctr+="		<input id='text_encryption_B' type='text' name='lan_wlan_encryption_B' class='text' value='' maxlength='26' /></td>";
	sctr+="		<tr>";
	//sctr+="		<input id='radio_encryptionselection_C' type='radio' name='lan_wlan_encryptionselection' class='radio' value='C'  /></th>";
	sctr+="<td align=\"right\"><div id=\"radio_encryptionselection_C\"  class=\"unclick\" onClick=\"checkkey(2);\"></div></td>";
	sctr+="		<td>";
	sctr+="		<input id='text_encryption_C' type='text' name='lan_wlan_encryption_C' class='text' value='' maxlength='26'/></td>";
	sctr+="	</tr>";
	sctr+="		<tr>";
	//sctr+="		<input id='radio_encryptionselection_D' type='radio' name='lan_wlan_encryptionselection' class='radio' value='D'  /></th>";
	sctr+="<td align=\"right\"><div id=\"radio_encryptionselection_D\"  class=\"unclick\" onClick=\"checkkey(3);\"></div></td>";
	sctr+="		<td>";
	sctr+="		<input id='text_encryption_D' type='text' name='lan_wlan_encryption_D' class='text' value='' maxlength='26'/></td>";
	sctr+="	</tr>";
	//sctr+="</div>";

	document.writeln(sctr);
}

function showWPA(type) {
	var sctr=new String();
	sctr="";
	sctr+="<tr>";
	sctr+="<th>Cipher Type : </th>";
	sctr+="<td><div class=\"styled-select\"><select id=\"cipher_type\"  name=\"cipher_type\" />";

	if(type=="wpa") {
		if(mode_802!="6")
			sctr+="<option value=\"TKIP\">TKIP</option>";
		sctr+="<option value=\"TKIPAES\" >Both</option>";
	} else if(type=="wpa2") {
		sctr+="<option value=\"AES\">AES</option>";
		sctr+="<option value=\"TKIPAES\" >Both</option>";
	} else {
		if(mode_802!="6")
			sctr+="<option value=\"TKIP\" >TKIP</option>";
		sctr+="<option value=\"AES\" >AES</option>";
		sctr+="<option value=\"TKIPAES\" >Both</option>";
	}

	sctr+="</select></div></td>";
	sctr+="</tr>";
	sctr+="";
	sctr+="		<tr>";
	sctr+="			<th>Group Key Interval : </th>";
	sctr+="			<td><input id=\"text_groupkeyinterval_0\" type=\"text\" name=\"lan_wlan_groupkeyinterval\" class=\"text\" value=\"\" />Seconds";
	sctr+="		</td>";
	sctr+="	</tr>";
	//sctr+="	</table>";
	//sctr+="	</div>";
	//sctr+="	<div class='box'>";
	sctr+="<tr>";
	sctr+="		<th><div class =\"title\">WPA Type</div></th>";
	sctr+="		<td></td>";
	sctr+="</tr>";
	//sctr+="	<h2>WPA Type</h2>";
	//sctr+="	<table cellpadding='1' cellspacing='1' border='0' width='525'>";
	/*sctr+="		<tr>";
	sctr+="			<th><input id=\"radio_wpatype_0\" type=\"radio\" name=\"lan_wlan_wpatype\" class=\"radio\" value=\"0\" onClick=\"checkWPA(0);\" />";
	sctr+="			802.1x</th>";
	sctr+="			<th><input id=\"radio_wpatype_0\" type=\"radio\" name=\"lan_wlan_wpatype\" class=\"radio\" value=\"1\" onClick=\"checkWPA(1);\" /> ";
	sctr+="			PSK Value</th>";
	sctr+="		</tr>";*/

	sctr+="<tr>";
	sctr+="	<td align=\"right\"><div id=\"wpatype_8021x\"  class=\"clicked\" onClick=\"checkWPA(0);\"></div></td>";
	sctr+="	<td> 802.1x</td>";
	sctr+="</tr>";
	sctr+="<tr>";
	sctr+="	<td align=\"right\"><div id=\"wpatype_psk\"  class=\"unclick\" onClick=\"checkWPA(1);\"></div></td>";
	sctr+="	<td> PSK Value</td>";
	sctr+="</tr>";
	//sctr+="		</table></div>";
	document.writeln(sctr); 
}

function checkWPA(arg) {
	f=document.getElementById("wifi_form");
	if(arg == 0)
	{
		document.getElementById('wpatype_8021x').setAttribute("class", "clicked");
		document.getElementById('wpatype_psk').setAttribute("class", "unclick");
	}
	else
	{
		document.getElementById('wpatype_8021x').setAttribute("class", "unclick");
		document.getElementById('wpatype_psk').setAttribute("class", "clicked");
	}
	switch(parseInt(arg)) {	
		case 0:
			//document.getElementById('wpatypeselect').innerHTML=showWPA1();
			document.getElementById("ShowWPA1").style.display = "inline";
			document.getElementById("ShowWPA3").style.display = "none";
			f.lan_wlan_groupkeyinterval.value=groupkey;
			f.lan_wlan_serverip.value=serverip;
			f.lan_wlan_port.value=wlan_port;
			f.lan_wlan_secret.value=wlan_secret;
			break;
		case 1:
			//document.getElementById('wpatypeselect').innerHTML=showWPA3();
			document.getElementById("ShowWPA1").style.display = "none";
			document.getElementById("ShowWPA3").style.display = "inline";
			if(cipherType == "")
				f.cipher_type.value = "TKIPAES";
			else if(f.cipher_type.value != cipherType)
				f.cipher_type.value = cipherType;
			f.lan_wlan_string.value=wpapsk;
			break;
		default:
	   		break;
	}
	save_button_changed();
}

function checkkey(arg)
{
	if(arg==0)
	{
		document.getElementById("radio_encryptionselection_A").setAttribute("class", "clicked");
		document.getElementById("radio_encryptionselection_B").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_C").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_D").setAttribute("class", "unclick");
	}
	else if(arg==1)
	{
		document.getElementById("radio_encryptionselection_A").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_B").setAttribute("class", "clicked");
		document.getElementById("radio_encryptionselection_C").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_D").setAttribute("class", "unclick");
	}
	else if(arg==2)
	{
		document.getElementById("radio_encryptionselection_A").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_B").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_C").setAttribute("class", "clicked");
		document.getElementById("radio_encryptionselection_D").setAttribute("class", "unclick");
	}
	else if(arg==3)
	{
		document.getElementById("radio_encryptionselection_A").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_B").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_C").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_D").setAttribute("class", "clicked");
	}
}

/*function genHTMLWPATYPE() {
	if (smode==2)
		document.getElementById('wpatypeselect').innerHTML=showWPA1();
	if (smode==3) {	
		f.lan_wlan_wpatype[0].checked=true;
		document.getElementById('wpatypeselect').innerHTML=showWPA1();
  	}
    if (smode==4) {
        f.lan_wlan_wpatype[0].checked=true;
        document.getElementById('wpatypeselect').innerHTML=showWPA1();
    }
	if (smode==6) {
		if(Wlanlist[sssidnow][10]==1) {
			f.lan_wlan_wpatype[2].checked=true;
			document.getElementById('wpatypeselect').innerHTML=showWPA3();
		}
		if(Wlanlist[sssidnow][10]==2) {
			f.lan_wlan_wpatype[1].checked=true;
			document.getElementById('wpatypeselect').innerHTML=showWPA2();
		}
	}
	if (smode==7) {
		if(Wlanlist[sssidnow][10]==1) {
			f.lan_wlan_wpatype[2].checked=true;
			document.getElementById('wpatypeselect').innerHTML=showWPA3();
		}
		if(Wlanlist[sssidnow][10]==2) {
			f.lan_wlan_wpatype[1].checked=true;
			document.getElementById('wpatypeselect').innerHTML=showWPA2();
		}
	}
	if (smode==9) {
		if(Wlanlist[sssidnow][10]==1) {
			f.lan_wlan_wpatype[2].checked=true;
			document.getElementById('wpatypeselect').innerHTML=showWPA3();
		}
		if(Wlanlist[sssidnow][10]==2) {
			f.lan_wlan_wpatype[1].checked=true;
			document.getElementById('wpatypeselect').innerHTML=showWPA2();
		}
	}
}*/
//showWPA1()-->802x
function showWPA1() {
	var sctr=new String();
	sctr="";
	//sctr+="	<div class='box'>";
	//sctr+="	<h2>802.1x</h2>";
	//sctr+="	<table cellpadding='1' cellspacing='1' border='0' width='525'>";
	sctr+="<tr>";
	sctr+="		<th><div class =\"title\">802.1x</div></th>";
	sctr+="		<td></td>";
	sctr+="</tr>";
	sctr+="		<tr>";
	sctr+="			<th>Server IP Address:</th>";
	sctr+="			<td><input id=\"text_serverip_0\" type=\"text\" name=\"lan_wlan_serverip\" class=\"text\" value=\"\" ></td>";
	sctr+="		</tr>";
	sctr+="		<tr>";
	sctr+="			<th>Port: </th>";
	sctr+="			<td><input id=\"text_port_0\" type=\"text\" name=\"lan_wlan_port\" class=\"text\" value=\"\" ></td>";
	sctr+="		</tr>";
	sctr+="		<tr>";
	sctr+="			<th>Secret: </th>";
	sctr+="			<td><input id=\"text_secret_0\" type=\"text\" name=\"lan_wlan_secret\" class=\"text\" value=\"\" ></td>";
	sctr+="		</tr>";
	//sctr+="	</table>";
	//sctr+="	</div>";
	document.write(sctr);
}

function showWPA2() {
	var sctr=new String();
	sctr="";
	//sctr+="	<div class='box'>";
	//sctr+="	<h2>PSK Hex Value</h2>";
	//sctr+="<table cellpadding=1 cellspacing=1 border=0 width=525>";
	sctr+="<tr>";
	sctr+="		<th><div class =\"title\">PSK Hex Value</div></th>";
	sctr+="		<td></td>";
	sctr+="</tr>";
	sctr+="		<tr>";
	sctr+="			<th>Hex Value:</th>";
	sctr+="			<td><input id=\"text_hex_0\" type=\"text\" name=\"lan_wlan_hex\" class=\"text\" value=\"\" ></td>";
	sctr+="		</tr>";
	//sctr+="	</table>";
	//sctr+="	</div>";
	return sctr;
}

function showWPA3() {
	var sctr=new String();
	sctr="";
	//sctr+="	<div class='box'>";
	//sctr+="	<h2>PSK</h2>";
	//sctr+="	<table cellpadding='1' cellspacing='1' border='0' width='525'>";
	//sctr+="		<tr>";
	//sctr+="<table  class=\"block\">";
	sctr+="<tr>";
	sctr+="		<th><div class =\"title\">PSK</div></th>";
	sctr+="		<td></td>";
	sctr+="</tr>";
	sctr+="		<tr>";
	sctr+="			<th>PSK Network Key: </th>";
	sctr+="			<td><input id=\"text_string_0\" type=\"text\" name=\"lan_wlan_string\" class=\"text\" value=\"\" maxlength=\"64\"></td>";
	sctr+="		</tr>";
	//sctr+="	</table>";
	//sctr+="		</tr>";
	//sctr+="	</div>";
	//alert("sctr = " + sctr);
	document.write(sctr);
}

function double_check() {
	var	 f = document.getElementById("wifi_form");

	//if(f.lan_wlan_isAccesspoint_double_check.checked) {
	if(f.sinf_24_ck.checked) {
		f.lan_wlan_autochannel.disabled=false;
		if(f.lan_wlan_autochannel.checked)
			f.lan_wlan_channel.disabled=true;
		else
			f.lan_wlan_channel.disabled=false;
	} else {
		f.lan_wlan_autochannel.disabled=true;
		f.lan_wlan_channel.disabled=true;
	}
}

function isHex(cmpStr) {
	var regStr=/[a-fA-F0-9]/;
  	for(i=0;i<cmpStr.length;i++) { 
  		if (cmpStr.charAt(i).search(regStr)==-1)
  			return false;
   	}    
	return true;	
}

function MathandAbs(ip) {
   var sIP=ip.split(".");
   absip = Math.abs(sIP[0])+"."+Math.abs(sIP[1])+"."+Math.abs(sIP[2])+"."+Math.abs(sIP[3]); 
   return absip;
}

function checkIP(ip) {
	var sIP=MathandAbs(ip).split(".");
	if (sIP.length!=4) return false;
	for(var i=0; i< sIP.length; i++) {
		if (!isNumber(sIP[i])) return false;
		if(i == 0) {
			if (parseInt(sIP[i]) < 1 || parseInt(sIP[i]) > 223 ||parseInt(sIP[i]) == 127) 
			return false;
		}
		if(i == 1 ||i == 2) {
			if (parseInt(sIP[i]) < 0 || parseInt(sIP[i]) > 255) 
			return false;
		}
		if(i == 3) {
			if (parseInt(sIP[i]) < 1 || parseInt(sIP[i]) > 254) 
			return false;
		}
	}
	return true;
}
function checkparameter() {
	var	 f = document.getElementById("wifi_form");	

	//if(f.lan_wlan_security[0].selected)
	if(f.lan_wlan_security.value == 0)
		return true;

	//if(f.lan_wlan_security[1].selected) {
	if(f.lan_wlan_security.value == 1) {
		//if(f.lan_wlan_encryptionselection[0].checked) {
		if(document.getElementById('radio_encryptionselection_A').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_A.value.length == 5) {
				if(!check_key("lan_wlan_encryption_A",64,1)) {
					$("#lan_wlan_encryption_A_error").html("<br/>"+_lan_wlan_encryption_A_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_A.focus();
					f.lan_wlan_encryption_A.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_A.value.length == 10) {
				if(!check_key("lan_wlan_encryption_A",64,2)) {
					$("#lan_wlan_encryption_A_error").html("<br/>"+_lan_wlan_encryption_A_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_A.focus();
					f.lan_wlan_encryption_A.select();
					return false;
				}

			} else {
				$("#lan_wlan_encryption_A_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_A.focus();
				f.lan_wlan_encryption_A.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection[1].checked) {
		if(document.getElementById('radio_encryptionselection_B').getAttribute('class') == 'clicked') {
		    if(f.lan_wlan_encryption_B.value.length==5) {
				if(!check_key("lan_wlan_encryption_B",64,1)) {
					$("#lan_wlan_encryption_B_error").html("<br/>"+_lan_wlan_encryption_B_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_B.focus();
					f.lan_wlan_encryption_B.select();
					return false;
				}
		    } else if (f.lan_wlan_encryption_B.value.length==10) {
			 	if(!check_key("lan_wlan_encryption_B",64,2)) {
					$("#lan_wlan_encryption_B_error").html("<br/>"+_lan_wlan_encryption_B_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_B.focus();
					f.lan_wlan_encryption_B.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_B_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_B.focus();
				f.lan_wlan_encryption_B.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection[2].checked) {
		if(document.getElementById('radio_encryptionselection_C').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_C.value.length == 5) {
				if(!check_key("lan_wlan_encryption_C",64,1)) {
					$("#lan_wlan_encryption_C_error").html("<br/>"+_lan_wlan_encryption_C_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_C.focus();
					f.lan_wlan_encryption_C.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_C.value.length == 10) {
				if(!check_key("lan_wlan_encryption_C",64,2)) {
					$("#lan_wlan_encryption_C_error").html("<br/>"+_lan_wlan_encryption_C_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_C.focus();
					f.lan_wlan_encryption_C.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_C_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_C.focus();
				f.lan_wlan_encryption_C.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection[3].checked) {
		if(document.getElementById('radio_encryptionselection_D').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_D.value.length == 5) {
				if(!check_key("lan_wlan_encryption_D",64,1)) {
					$("#lan_wlan_encryption_D_error").html("<br/>"+_lan_wlan_encryption_D_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_D.focus();
					f.lan_wlan_encryption_D.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_D.value.length == 10) {
				if(!check_key("lan_wlan_encryption_D",64,2)) {
					$("#lan_wlan_encryption_D_error").html("<br/>"+_lan_wlan_encryption_D_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_D.focus();
					f.lan_wlan_encryption_D.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_D_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_D.focus();
				f.lan_wlan_encryption_D.select();
				return false;
			}
		}
	}
	//if(f.lan_wlan_security[2].selected) {
	if(f.lan_wlan_security.value == 2) {
		//if(f.lan_wlan_encryptionselection[0].checked) {
		if(document.getElementById('radio_encryptionselection_A').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_A.value.length == 13) {
				if(!check_key("lan_wlan_encryption_A",128,1)) {
					$("#lan_wlan_encryption_A_error").html("<br/>"+_lan_wlan_encryption_A_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_A.focus();
					f.lan_wlan_encryption_A.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_A.value.length == 26) {
				if(!check_key("lan_wlan_encryption_A",128,2)) {
					$("#lan_wlan_encryption_A_error").html("<br/>"+_lan_wlan_encryption_A_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_A.focus();
					f.lan_wlan_encryption_A.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_A_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_A.focus();
				f.lan_wlan_encryption_A.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection[1].checked) {
		if(document.getElementById('radio_encryptionselection_B').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_B.value.length==13) {
				if(!check_key("lan_wlan_encryption_B",128,1)) {
					$("#lan_wlan_encryption_B_error").html("<br/>"+_lan_wlan_encryption_B_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_B.focus();
					f.lan_wlan_encryption_B.select();
					return false;
				}
		    } else if (f.lan_wlan_encryption_B.value.length==26) {
			 	if(!check_key("lan_wlan_encryption_B",128,2)) {
					$("#lan_wlan_encryption_B_error").html("<br/>"+_lan_wlan_encryption_B_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_B.focus();
					f.lan_wlan_encryption_B.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_B_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_B.focus();
				f.lan_wlan_encryption_B.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection[2].checked) {
		if(document.getElementById('radio_encryptionselection_C').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_C.value.length == 13) {
				if(!check_key("lan_wlan_encryption_C",128,1)) {
					$("#lan_wlan_encryption_C_error").html("<br/>"+_lan_wlan_encryption_C_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_C.focus();
					f.lan_wlan_encryption_C.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_C.value.length == 26) {
				if(!check_key("lan_wlan_encryption_C",128,2)) {
					$("#lan_wlan_encryption_C_error").html("<br/>"+_lan_wlan_encryption_C_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_C.focus();
					f.lan_wlan_encryption_C.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_C_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_C.focus();
				f.lan_wlan_encryption_C.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection[3].checked) {
		if(document.getElementById('radio_encryptionselection_D').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_D.value.length == 13) {
				if(!check_key("lan_wlan_encryption_D",128,1)) {
					$("#lan_wlan_encryption_D_error").html("<br/>"+_lan_wlan_encryption_D_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_D.focus();
					f.lan_wlan_encryption_D.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_D.value.length == 26) {
				if(!check_key("lan_wlan_encryption_D",128,2)) {
					$("#lan_wlan_encryption_D_error").html("<br/>"+_lan_wlan_encryption_D_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_D.focus();
					f.lan_wlan_encryption_D.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_D_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_D.focus();
				f.lan_wlan_encryption_D.select();
				return false;
			}
		}
	}

	//if((f.lan_wlan_security[5].selected) || (f.lan_wlan_security[3].selected) || (f.lan_wlan_security[4].selected)) {
	if((f.lan_wlan_security.value == 5) || (f.lan_wlan_security.value == 3) || (f.lan_wlan_security.value == 4)) {
		if((parseInt(f.lan_wlan_groupkeyinterval.value)<10) || (parseInt(f.lan_wlan_groupkeyinterval.value)>4194303) || (!isNumber(f.lan_wlan_groupkeyinterval.value))) {
			$("#lan_wlan_groupkeyinterval_error").html("<br/>"+_lan_wlan_groupkeyinterval_error);
			f.lan_wlan_groupkeyinterval.focus();
			f.lan_wlan_groupkeyinterval.select();
			return false;
		}

		//if( f.lan_wlan_wpatype_0.checked) {
		if(document.getElementById('wpatype_8021x').getAttribute('class') == 'clicked'){
			if(!checkIP(f.lan_wlan_serverip.value)) {
				$("#lan_wlan_serverip_error").html("<br/>"+_lan_wlan_serverip_error);
				f.lan_wlan_serverip.focus();
				f.lan_wlan_serverip.select();
				return false;
			}
			if((f.lan_wlan_port.value<1) ||(f.lan_wlan_port.value>65535) ||(!isNumber(f.lan_wlan_port.value)) ) {
				$("#lan_wlan_port_error").html("<br/>"+_lan_wlan_port_error);
				f.lan_wlan_port.focus();
				f.lan_wlan_port.select();
				return false;
			}
			if(f.lan_wlan_secret.value.length>64) {
				$("#lan_wlan_secret_error").html("<br/>"+_lan_wlan_sec_error);
				f.lan_wlan_secret.focus();
				f.lan_wlan_secret.select();
				return false;
			}
		} 
		//else if( f.lan_wlan_wpatype_1.checked) {
		else if(document.getElementById('wpatype_psk').getAttribute('class') == 'clicked') {
			/*if(f.lan_wlan_string.value.length == 64) {
				if(isWPAKey16Invalid(f.lan_wlan_string.value)) {
					if(f.lan_wlan_security[3].selected)
						alert(_lan_wlan_hex_errorA+"WPA-PSK"+_lan_wlan_hex_errorB);
					if(f.lan_wlan_security[4].selected)
						alert(_lan_wlan_hex_errorA+"WPA2-PSK"+_lan_wlan_hex_errorB);
					if(f.lan_wlan_security[5].selected)
						alert(_lan_wlan_hex_errorA+"WPA/WPA2-PSK"+_lan_wlan_hex_errorB);
					f.lan_wlan_string.focus();
					f.lan_wlan_string.select();
					return false;
				}
			} else {*/

			if((f.lan_wlan_string.value.length<8)||(f.lan_wlan_string.value.length>63)||(isWPAKeyInvalid(f.lan_wlan_string.value))) {
				//if(f.lan_wlan_security[3].selected)
				if(f.lan_wlan_security.value == 3)
					$("#lan_wlan_string_error").html("<br/>"+_lan_wlan_string_errorA+"WPA-PSK"+_lan_wlan_string_errorB);
				//if(f.lan_wlan_security[4].selected)
				if(f.lan_wlan_security.value == 4)
					$("#lan_wlan_string_error").html("<br/>"+_lan_wlan_string_errorA+"WPA2-PSK"+_lan_wlan_string_errorB);
				//if(f.lan_wlan_security[5].selected)
				if(f.lan_wlan_security.value == 5)
					$("#lan_wlan_string_error").html("<br/>"+_lan_wlan_string_errorA+"WPA/WPA2-PSK"+_lan_wlan_string_errorB);
				f.lan_wlan_string.focus();
				f.lan_wlan_string.select();
				return false;
			}
			if(strchk_unicode(f.lan_wlan_string.value)) {
				$("#lan_wlan_string_error").html("<br/>"+_lan_wlan_string_errorC);
				f.lan_wlan_string.focus();
				f.lan_wlan_string.select();
				return false;
			}
			//}
		}
	}
	return true;
}

function isWPAKey16Invalid(pskstr) {
	var str = "0123456789abcedfABCDEF";
	for(var i = 0; i < pskstr.length; i++) {
		var j = 0;
		for(var z = 0; z < str.length; z++) {
			if(pskstr.charAt(i) == str.charAt(z))
				j++;
		}
		if(j == 0)
			return true;
	}
	return false;
}

function isWPAKeyInvalid(source) {
	var sourcestr=new String(source);
	var tempstr;
	if(sourcestr=="")
		return false;
	for(var strposition=0;strposition<=sourcestr.length-1;strposition++) {
		tempstr=sourcestr.substr(strposition,1);
		if((tempstr.charCodeAt(0)>=48 && tempstr.charCodeAt(0)<=57 )||(tempstr.charCodeAt(0)>=65 && tempstr.charCodeAt(0)<=90 )||(tempstr.charCodeAt(0)>=97 && tempstr.charCodeAt(0)<=122 ))
			continue;
		else
			return true;
	}
	return false;
}

function Prefixes_Rule(TelNum) {
    for (var i=0; i<TelNum.length; i++) {
        if(TelNum.charAt(i)=='\"') return false;
		if(TelNum.charAt(i)==' ') return false;
		if(TelNum.charAt(i)=='\\') return false;
		if(TelNum.charAt(i)=='%') return false;
    }
    return true;
}

function Prefixes_Rule_WEP_KEY(TelNum) {
    for (var i=0; i<TelNum.length; i++) {
        if(TelNum.charAt(i)=='\"') return false;
		if(TelNum.charAt(i)==' ') return false;
		if(TelNum.charAt(i)=='\\') return false;
		if(TelNum.charAt(i)=='%') return false;
		if(TelNum.charAt(i)=='#') return false;
    }
    return true;
}

function check_key(lan_wlan_encryption,lan_wlan_cipher,lan_wlan_type) {
	var	 f = document.getElementById("wifi_form");	
	var keyvalue=eval("f."+lan_wlan_encryption+".value");
	var keylength=parseInt(lan_wlan_cipher);
	var keytype=parseInt(lan_wlan_type );
	var ascii_length = (keylength/8)-3;
	var hex_length = ascii_length*2;	
	
	if(keytype==1)
		my_length=ascii_length;
	else  
		my_length=hex_length; 

	msg_length= my_length;

	if(keytype==1) {
		if(!Prefixes_Rule_WEP_KEY(keyvalue))
			return false;
	}
	
	if(keytype!=1) {		
		if(!isHex(keyvalue))
			return false;	 
	}

	if ((keytype==1)&&(keyvalue==0) )
	    return false;

	if ((keyvalue.length!=my_length&&keyvalue!="") )
	    return false;
	
	return true;	
}

function isIP(ip) {
   	var sIP=ip.split(".");
   	if (sIP.length!=4) return false;
   	for(var i=0; i< sIP.length; i++) {
		if (!isNumber(sIP[i])) return false;
		if (parseInt(sIP[i]) < 0 || parseInt(sIP[i]) > 255) return false;
   	}
   	return true;
}

function isNumber(n) {
  	if (n.length==0) return false;
   	for (var i=0;i < n.length;i++) {
       	if (n.charAt(i) < '0' || n.charAt(i) > '9') return false;
   	}
   	return true;
}

function subHtmAsc(str) {
	var regStr=/(#|%|&|\+|\/|:|;|<|=|>|\?|@|\ )+/;
  	var rntStr="";
  
  	if (str.search(regStr) == -1)
   		return str;

  	for(var i=0; i<str.length; i++) {
   		rntStr+=checkHtmChar(str.charAt(i))
  	}
	return rntStr;
}

function checkDataListsCount() {
	var count=0;
   	for (var i=0;i < Wlanlist.length;i++) {
       	if (Wlanlist[i][2].length) {
       		count=Wlanlist.length;
       		break;
      	}
   	}
   	return count;
}

function point_control(temp) {
	var	 f = document.getElementById("wifi_form");
	if(temp=="upload") {
	    if(smode==0)
			 f.WirelessSecuritytypeValue.value = "OPEN";
		else if(smode==1 ||smode==5||smode==8)
			 f.WirelessSecuritytypeValue.value = "WEP-64Bits";
		else if(smode==10 ||smode==11||smode==12)
			 f.WirelessSecuritytypeValue.value = "WEP-128Bits";
		else if(smode==6)
			f.WirelessSecuritytypeValue.value = "WPAPSK";
		else if(smode==7)
			f.WirelessSecuritytypeValue.value = "WPA2PSK";
		else if(smode==9)
			f.WirelessSecuritytypeValue.value = "WPAPSKWPA2PSK";
		else if(smode==2)
			f.WirelessSecuritytypeValue.value = "WPA";
		else if(smode==3)
			f.WirelessSecuritytypeValue.value = "WPA2";
		else if(smode==4)
			f.WirelessSecuritytypeValue.value = "WPA1WPA2";
	} else {
		//if(f.lan_wlan_security[0].selected)
		if(f.lan_wlan_security.value == 0)
			 f.WirelessSecuritytypeValue.value = "OPEN";
		//else if(f.lan_wlan_security[1].selected)
		else if(f.lan_wlan_security.value == 1)
			 f.WirelessSecuritytypeValue.value = "WEP-64Bits";
		//else if(f.lan_wlan_security[2].selected)
		else if(f.lan_wlan_security.value == 2)
			 f.WirelessSecuritytypeValue.value = "WEP-128Bits";
		else {
			
			//if(f.lan_wlan_security[3].selected) {
			if(f.lan_wlan_security.value == 3) {
				//if(f.lan_wlan_wpatype_0.checked)
				if(document.getElementById('wpatype_8021x').getAttribute('class') == 'clicked')
					f.WirelessSecuritytypeValue.value = "WPA";
				else
					f.WirelessSecuritytypeValue.value = "WPAPSK";
			}
			//if(f.lan_wlan_security[4].selected) {
			if(f.lan_wlan_security.value == 4) {
				//if(f.lan_wlan_wpatype_0.checked)
				if(document.getElementById('wpatype_8021x').getAttribute('class') == 'clicked')
					f.WirelessSecuritytypeValue.value = "WPA2";
				else
					f.WirelessSecuritytypeValue.value = "WPA2PSK";
			}
			//if(f.lan_wlan_security[5].selected) {
			if(f.lan_wlan_security.value == 5) {
				//if(f.lan_wlan_wpatype_0.checked)
				if(document.getElementById('wpatype_8021x').getAttribute('class') == 'clicked')
					f.WirelessSecuritytypeValue.value = "WPA1WPA2";
				else
					f.WirelessSecuritytypeValue.value = "WPAPSKWPA2PSK";
			}
		}
	}
	//if($("#lan_wlan_isAccesspoint_double_check").attr("checked")){
	if(f.sinf_24_ck.checked) {
		/*if(document.getElementById("select_bgmode_0").value == 0) {
			//f.wifi_enable.disabled=false;
			document.getElementById("wifi_enable_24").disabled= false;
			//if(f.wifi_enable.checked) {
			if(f.wifi_enable_24_ck.checked){
				f.newPIN.disabled=false;
				if(wi_current_configure == "2")
					f.unconfigure.disabled=false;
				else
					f.unconfigure.disabled=true;
			} else {
				f.newPIN.disabled=true;
				f.unconfigure.disabled=true;
			}
		}*/
		
		//f.has_hiddenSsid[0].disabled=false;
		//f.has_hiddenSsid[1].disabled=false;
		document.getElementById("hide_24").disabled= false;
		if(mode_802=="9"||mode_802=="7"||mode_802=="6")
		{	//f.wmm_enable[1].disabled=false;
		}
		else {
			//f.wmm_enable[0].disabled=false;
			//f.wmm_enable[1].disabled=false;
			document.getElementById("wmm_24").disabled= false;
		}
		//f.lan_wlan_security.disabled=false;
		$("#select_security").selectbox("enable");
		if(f.WirelessSecuritytypeValue.value.indexOf("WEP")!=-1) {	
			//f.lan_wlan_authtype.disabled=false;
			$("#lan_wlan_authtype").selectbox("enable");
			
			//f.lan_wlan_encryptionselection[0].disabled=false;
			document.getElementById('radio_encryptionselection_A').disabled == false;
			f.lan_wlan_encryption_A.disabled=false;
			

			//f.lan_wlan_encryptionselection[1].disabled=false;
			document.getElementById('radio_encryptionselection_B').disabled == false;
			f.lan_wlan_encryption_B.disabled=false;
			

			//f.lan_wlan_encryptionselection[2].disabled=false;
			document.getElementById('radio_encryptionselection_C').disabled == false;
			f.lan_wlan_encryption_C.disabled=false;
			
			//f.lan_wlan_encryptionselection[3].disabled=false;
			document.getElementById('radio_encryptionselection_D').disabled == false;
			f.lan_wlan_encryption_D.disabled=false;
		}

		if(f.WirelessSecuritytypeValue.value.indexOf("WPA")!=-1) {
			f.lan_wlan_groupkeyinterval.disabled=false;
			//f.cipher_type.disabled=false;
			$("#cipher_type").selectbox("enable");
			//f.lan_wlan_wpatype_0.disabled=false;
			//f.lan_wlan_wpatype_1.disabled=false;
			document.getElementById("wpatype_8021x").disabled=false;
			document.getElementById("wpatype_psk").disabled=false;
			if(f.WirelessSecuritytypeValue.value.indexOf('PSK')!=-1)
				f.lan_wlan_string.disabled=false;
			else {
				f.lan_wlan_serverip.disabled=false;
				f.lan_wlan_port.disabled=false;
				f.lan_wlan_secret.disabled=false;
			}
		}
	} else {
		/*if(document.getElementById("select_bgmode_0").value == 0) {
			//f.wifi_enable.disabled=true;
			document.getElementById("wifi_enable_24").disabled= true;
			f.newPIN.disabled=true;
			f.unconfigure.disabled=true;
		}*/
					
		//f.has_hiddenSsid[0].disabled=true;
		//f.has_hiddenSsid[1].disabled=true;
		document.getElementById("hide_24").disabled=true;
		//f.wmm_enable[0].disabled=true;
		//f.wmm_enable[1].disabled=true;
		document.getElementById("wmm_24").disabled=true;
		//f.lan_wlan_security.disabled=true;
		$("#select_security").selectbox("disable");
		if(f.WirelessSecuritytypeValue.value.indexOf("WEP")!=-1) {	
			//f.lan_wlan_authtype.disabled=true;
			$("#lan_wlan_authtype").selectbox("disable");
			
			//f.lan_wlan_encryptionselection[0].disabled=true;
			document.getElementById('radio_encryptionselection_A').disabled == true;
			f.lan_wlan_encryption_A.disabled=true;

			//f.lan_wlan_encryptionselection[1].disabled=true;
			document.getElementById('radio_encryptionselection_B').disabled == true;
			f.lan_wlan_encryption_B.disabled=true;

			//f.lan_wlan_encryptionselection[2].disabled=true;
			document.getElementById('radio_encryptionselection_C').disabled == true;
			f.lan_wlan_encryption_C.disabled=true;
			
			//f.lan_wlan_encryptionselection[3].disabled=true;
			document.getElementById('radio_encryptionselection_D').disabled == true;
			f.lan_wlan_encryption_D.disabled=true;
		}

		if(f.WirelessSecuritytypeValue.value.indexOf("WPA")!=-1) {
			f.lan_wlan_groupkeyinterval.disabled=true;
			//f.cipher_type.disabled=true;
			$("#cipher_type").selectbox("disable");
			//f.lan_wlan_wpatype_0.disabled=true;
			//f.lan_wlan_wpatype_1.disabled=true;
			document.getElementById("wpatype_8021x").disabled=true;
			document.getElementById("wpatype_psk").disabled=true;
			if(f.WirelessSecuritytypeValue.value.indexOf('PSK')!=-1)
				f.lan_wlan_string.disabled=true;
			else {
				f.lan_wlan_serverip.disabled=true;
				f.lan_wlan_port.disabled=true;
				f.lan_wlan_secret.disabled=true;
			}
		}
	}
}

function Load_HTML()
{
	$("#header").load("header.asp");
}
function Initial()
{
	initialMenu();
	initialDetectRouterConnection();
}
function ChangeBandStatus()
{
	Disable_wirless('changestatus');
}
var _ReciprocalNumber = 10;
function Start_reciprocal_Number_RestoreConfiguration()
{
	if (_ReciprocalNumber >= 0)
	{
		document.getElementById("reciprocal_Number").innerHTML = _ReciprocalNumber + " " + I18N("j", "Sec");
		_ReciprocalNumber --;
		setTimeout("Start_reciprocal_Number_RestoreConfiguration()", 1000);
	}
	else
	{
		document.getElementById("waitSettingFinish").style.display = "none";
		document.getElementById("SuccessSettings").style.display = "inline";
	}
}