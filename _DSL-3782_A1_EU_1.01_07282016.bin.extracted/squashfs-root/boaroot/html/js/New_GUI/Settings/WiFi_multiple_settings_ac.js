var msg_length_ac;
var submittype_ac = 0;
var cipherType_ac = "";
function wpa_ac(ip,port,secret) {
    this.ip=ip;
    this.port=port;
    this.secret=secret;
}

function normal_ac(wep,encryption,type,defkey,key1,key2,key3,key4) {
    this.wep=wep;
    this.encryption=encryption;
    this.type=type;
    this.defkey=defkey;
    this.key1=key1;
    this.key2=key2;
    this.key3=key3;
    this.key4=key4;
}

function wireless_ac(radio,wmm,ssid,country,channel,autoChannel,superG,auth,normal,wpa,wpapsk) {
    this.radio=radio;
    this.wmm=wmm;
    this.ssid=ssid;
    this.country=country;    
    this.channel=channel;
    this.autoChannel=autoChannel;
    this.superG=superG;
    this.auth=auth;
    this.normal=normal;
    this.wpa=wpa;
    this.wpapsk=wpapsk;
}

var countdown_ac=0;
var countdown2_ac=0;

function test_ac() {
    if(countdown_ac!=0)
    	countdown_ac--;

    document.frm.WaitInfo.value=countdown_ac;
    if ((countdown_ac == 0) && (countdown2_ac ==0)) {
		countdown2_ac=1;
		returnToHome_ac();
    }
}

function slip_url_ac(original_url) {
	var url_ac= original_url;
	while(url_ac.indexOf('?')!=-1) {
		j=url_ac.indexOf('?')+1;
		url_ac=url_ac.substring(j,url_ac.length);
	}
	return url_ac;
}

function returnToHome_ac()  {
	self.location.href="WiFi_multiple_settings.asp";
}

function initWireless_page_ac() {
	var f=document.getElementById("wifi_form");
	var currentURL_ac=document.location.search;

	if(hidden_ssid_ac==1)
		SetCheckBoxEnable("hide_ac", true, true);
	else
		SetCheckBoxEnable("hide_ac", true, false);

	if(wirelessEnable_ac==1)
		SetCheckBoxEnable("status_ac", true, true);
	else
		SetCheckBoxEnable("status_ac", true, false);
	
	if(en_accpoint_ac==1)
		SetCheckBoxEnable("sinf_ac", true, true);
	else
		SetCheckBoxEnable("sinf_ac", true, false);
	if(mode_802_ac=="6"||mode_802_ac=="0"||mode_802_ac=="9") {
		//f.wmm_enable_ac[1].checked=true;
		//f.wmm_enable_ac[0].disabled=true;
		SetCheckBoxEnable("wmm_ac", true, true);
	} else {
		//f.wmm_enable_ac[0].disabled=false;
		if(wmm_ac==1)
			//f.wmm_enable_ac[1].checked=true;
			SetCheckBoxEnable("wmm_ac", true, true);
		else
			//f.wmm_enable_ac[0].checked=true;
			SetCheckBoxEnable("wmm_ac", true, false);
	}

	if (acmode==0)
  		f.lan_wlan_security_ac.value=0;
	
	if(acmode==6 ||acmode==7 ||acmode==9 ) {
		if (acmode==6)
			f.lan_wlan_security_ac.value=3;
		else if (acmode==7)
			f.lan_wlan_security_ac.value=4;
		else if (acmode==9)
			f.lan_wlan_security_ac.value=5;

		//f.lan_wlan_wpatype_ac[1].checked=true;
		document.getElementById("wpatype_8021x_ac").setAttribute("class", "unclick");
		document.getElementById("wpatype_psk_ac").setAttribute("class", "clicked");
		//document.getElementById("wpatypeselect_ac").innerHTML=showWPA3_ac();
		document.getElementById("ShowWPA1_ac").style.display = "none";
		document.getElementById("ShowWPA3_ac").style.display = "inline";
		if(currentURL_ac.indexOf("acmode")==-1) {
			if((wireless_encrypttype_ac != "TKIP") && (wireless_encrypttype_ac != "AES") && ((wireless_encrypttype_ac != "TKIPAES"))) {
				if(mode_802_ac=="6") {
					f.cipher_type_ac.value = "TKIPAES";
				} else {
					if(acmode==6)
						f.cipher_type_ac.value = "TKIP";
					else if(acmode==7 )
						f.cipher_type_ac.value = "AES";
					else
						f.cipher_type_ac.value = "TKIPAES";
				}
				if(f.cipher_type_ac.value == "")
					f.cipher_type_ac.value="TKIPAES";
			} else {
				if(mode_802_ac=="6"){
					//if(f.lan_wlan_security_ac[3].selected)
					if(f.lan_wlan_security_ac.value == 3)
						f.cipher_type_ac.value = "TKIPAES";
					else {
						if(wireless_encrypttype_ac != "TKIP")
							f.cipher_type_ac.value=wireless_encrypttype_ac;
						else
							f.cipher_type_ac.value = "TKIPAES";
					}
				} else {
					if(wireless_encrypttype_ac=="AES") {
						if(acmode==6)
							f.cipher_type_ac.value="TKIP";
						else
							f.cipher_type_ac.value=wireless_encrypttype_ac;
					} else
						f.cipher_type_ac.value=wireless_encrypttype_ac;
				}
				if(f.cipher_type_ac.value == "")
					f.cipher_type_ac.value="TKIPAES";
				cipherType_ac = f.cipher_type_ac.value;
			}
		} else if(acmode==9){
			if((wireless_encrypttype_ac != "TKIP") && (wireless_encrypttype_ac != "AES") && ((wireless_encrypttype_ac != "TKIPAES"))) {
				if(mode_802_ac=="6"){
					f.cipher_type_ac.value = "TKIPAES";
				} else {
					if(acmode==6)
						f.cipher_type_ac.value = "TKIP";
					else if(acmode==7 )
						f.cipher_type_ac.value = "AES";
					else
						f.cipher_type_ac.value = "TKIPAES";
				}
				if(f.cipher_type_ac.value == "")
					f.cipher_type_ac.value="TKIPAES";
			} else {
				if(mode_802_ac=="6"){
					//if(f.lan_wlan_security_ac[3].selected)
					if(f.lan_wlan_security_ac.value == 3)
						f.cipher_type_ac.value = "TKIPAES";
					else {
						if(wireless_encrypttype_ac != "TKIP")
							f.cipher_type_ac.value=wireless_encrypttype_ac;
						else
							f.cipher_type_ac.value = "TKIPAES";
					}
				} else {
					if(wireless_encrypttype_ac=="AES") {
						if(acmode==6)
							f.cipher_type_ac.value="TKIP";
						else
							f.cipher_type_ac.value=wireless_encrypttype_ac;
					} else
						f.cipher_type_ac.value=wireless_encrypttype_ac;
				}
				if(f.cipher_type_ac.value == "")
					f.cipher_type_ac.value="TKIPAES";
				cipherType_ac = f.cipher_type_ac.value;
			}
		}
		
		f.lan_wlan_groupkeyinterval_ac.value=groupkey_ac;
		f.lan_wlan_string_ac.value = wpapsk_ac;
	} else if (acmode==2 ||acmode==3 ||acmode==4) {
		if (acmode==2)
			//f.lan_wlan_security_ac[3].selected=true;
			f.lan_wlan_security_ac.value=3;
		else if (acmode==3)
			//f.lan_wlan_security_ac[4].selected=true;
			f.lan_wlan_security_ac.value=4;
		else if (acmode==4)
			//f.lan_wlan_security_ac[5].selected=true;
			f.lan_wlan_security_ac.value=5;

		//f.lan_wlan_wpatype_ac[0].checked=true;
		document.getElementById("wpatype_8021x_ac").setAttribute("class", "clicked");
		document.getElementById("wpatype_psk_ac").setAttribute("class", "unclick");
		if(currentURL_ac.indexOf("acmode")==-1) {
			if((wireless_encrypttype_ac != "TKIP") && (wireless_encrypttype_ac != "AES") && ((wireless_encrypttype_ac != "TKIPAES"))) {
				if(mode_802_ac=="6"){
					f.cipher_type_ac.value = "TKIPAES";
				} else {
					if(acmode==2)
						f.cipher_type_ac.value = "TKIP";
					else if(acmode==3)
						f.cipher_type_ac.value = "AES";
					else
						f.cipher_type_ac.value = "TKIPAES";
				}
				if(f.cipher_type_ac.value == "")
					f.cipher_type_ac.value="TKIPAES";
			} else {
				if(mode_802_ac=="6"){
					//if(f.lan_wlan_security_ac[3].selected)
					if(f.lan_wlan_security_ac.value == 3)
						f.cipher_type_ac.value = "TKIPAES";
					else {
						if(wireless_encrypttype_ac != "TKIP")
							f.cipher_type_ac.value=wireless_encrypttype_ac;
						else
							f.cipher_type_ac.value = "TKIPAES";
					}
				} else {
					if(wireless_encrypttype_ac=="AES") {
						if(acmode==2)
							f.cipher_type_ac.value="TKIP";
						else
							f.cipher_type_ac.value=wireless_encrypttype_ac;
					} else
						f.cipher_type_ac.value=wireless_encrypttype_ac;
				}
				if(f.cipher_type_ac.value == "")
					f.cipher_type_ac.value="TKIPAES";
			}			
		}

		//document.getElementById("wpatypeselect_ac").innerHTML=showWPA1_ac();
		document.getElementById("ShowWPA1_ac").style.display = "inline";
		document.getElementById("ShowWPA3_ac").style.display = "none";
		f.lan_wlan_groupkeyinterval_ac.value=groupkey_ac;
		f.lan_wlan_serverip_ac.value=serverip_ac;
		f.lan_wlan_port_ac.value=wlan_port_ac;
		f.lan_wlan_secret_ac.value=wlan_secret_ac;
	}

	if (acmode==1 || acmode==5 || acmode==8) {	
	    //f.lan_wlan_security_ac[1].selected=true;
	    f.lan_wlan_security_ac.value = 1;
		f.lan_wlan_authtype_ac.value=wepautype_ac;
	}

	if(acmode==10 || acmode==12 || acmode==11) {
		f.lan_wlan_security_ac.value=2;
		f.lan_wlan_authtype_ac.value=wepautype_ac;
	}
	
	if((acmode==1)||(acmode==5)||(acmode==8)||(acmode==10)||(acmode==11)||(acmode==12)) {
		numx_ac=wireless_wep_selection_ac;
		if((numx_ac==1)||(numx_ac==2)||(numx_ac==3)||(numx_ac==4)) {
			numx_ac--;
			//f.lan_wlan_encryptionselection_ac[numx_ac].checked=true;
			if(numx_ac==0)
			{
				document.getElementById("radio_encryptionselection_A_ac").setAttribute("class", "clicked");
				document.getElementById("radio_encryptionselection_B_ac").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_C_ac").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_D_ac").setAttribute("class", "unclick");
			}
			else if(numx_ac==1)
			{
				document.getElementById("radio_encryptionselection_A_ac").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_B_ac").setAttribute("class", "clicked");
				document.getElementById("radio_encryptionselection_C_ac").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_D_ac").setAttribute("class", "unclick");
			}
			else if(numx_ac==2)
			{
				document.getElementById("radio_encryptionselection_A_ac").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_B_ac").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_C_ac").setAttribute("class", "clicked");
				document.getElementById("radio_encryptionselection_D_ac").setAttribute("class", "unclick");
			}
			else if(numx_ac==3)
			{
				document.getElementById("radio_encryptionselection_A_ac").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_B_ac").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_C_ac").setAttribute("class", "unclick");
				document.getElementById("radio_encryptionselection_D_ac").setAttribute("class", "clicked");
			}
			f.lan_wlan_encryption_A_ac.value=wireless_wep_key_1_ac;
			f.lan_wlan_encryption_B_ac.value=wireless_wep_key_2_ac;
			f.lan_wlan_encryption_C_ac.value=wireless_wep_key_3_ac;
			f.lan_wlan_encryption_D_ac.value=wireless_wep_key_4_ac;
		} else{
			//f.lan_wlan_encryptionselection_ac[0].checked=true;
			document.getElementById("radio_encryptionselection_A_ac").setAttribute("class", "clicked");
			document.getElementById("radio_encryptionselection_B_ac").setAttribute("class", "unclick");
			document.getElementById("radio_encryptionselection_C_ac").setAttribute("class", "unclick");
			document.getElementById("radio_encryptionselection_D_ac").setAttribute("class", "unclick");
		}
	}

   	Disable_wirless_ac("upload");   	
}

function Disable_wirless_ac(tmp) {
	var f=document.getElementById("wifi_form");
	point_control_ac(tmp);
	if(f.status_ac_ck.checked) {
		document.getElementById("sinf_ac").disabled= false;
		$("#select_bgmode_0_ac").selectbox("enable");
	} else {
		document.getElementById("sinf_ac").disabled= true;
		$("#select_bgmode_0_ac").selectbox("disable");
					
		//f.has_hiddenSsid_ac[0].disabled=true;
		//f.has_hiddenSsid_ac[1].disabled=true;
		document.getElementById("hide_ac").disabled= true;
		//f.wmm_enable_ac[0].disabled=true;
		//f.wmm_enable_ac[1].disabled=true;
		document.getElementById("wmm_ac").disabled= true;
		//f.lan_wlan_security_ac.disabled=true;
		$("#select_security_ac").selectbox("disable");

		if(f.WirelessSecuritytypeValue_ac.value.indexOf("WEP")!=-1) {	
			//f.lan_wlan_authtype_ac.disabled=true;
			$("#select_authtype_0_ac").selectbox("disable");
			
			//f.lan_wlan_encryptionselection_ac[0].disabled=true;
			document.getElementById("radio_encryptionselection_A_ac").disabled= true;
			f.lan_wlan_encryption_A_ac.disabled=true;
			
			//f.lan_wlan_encryptionselection_ac[1].disabled=true;
			document.getElementById("radio_encryptionselection_B_ac").disabled= true;
			f.lan_wlan_encryption_B_ac.disabled=true;
			
			//f.lan_wlan_encryptionselection_ac[2].disabled=true;
			document.getElementById("radio_encryptionselection_C_ac").disabled= true;
			f.lan_wlan_encryption_C_ac.disabled=true;
			
			//f.lan_wlan_encryptionselection_ac[3].disabled=true;
			document.getElementById("radio_encryptionselection_D_ac").disabled= true;
			f.lan_wlan_encryption_D_ac.disabled=true;
		}

		if(f.WirelessSecuritytypeValue_ac.value.indexOf("WPA")!=-1) {
			f.lan_wlan_groupkeyinterval_ac.disabled=true;
			//f.cipher_type_ac.disabled=true;
			$("#cipher_type_ac").selectbox("disable");
			//f.lan_wlan_wpatype_ac[0].disabled=true;
			//f.lan_wlan_wpatype_ac[1].disabled=true;
			document.getElementById("wpatype_8021x_ac").disabled= true;
			document.getElementById("wpatype_psk_ac").disabled= true;
			if(f.WirelessSecuritytypeValue_ac.value.indexOf('PSK')!=-1)
				f.lan_wlan_string_ac.disabled=true;
			else {
				f.lan_wlan_serverip_ac.disabled=true;
				f.lan_wlan_port_ac.disabled=true;
				f.lan_wlan_secret_ac.disabled=true;
			}
		}
	}
}

function changeSecurity_ac(ssidindex) {
	var f=document.getElementById("wifi_form");

	var flag = 0;
      	if(ssid_status_ac)
      	{
      	   for (var i=0;i < ssid_status_ac;i++)				
		{	if(dataLists_ac[i][0] ==1)
		      {
				if(i == 0)
					continue;	
		           	flag++;
			}
		 }
      	}
	if(flag == 0)
		return;
	 
  	if (f.lan_wlan_security_ac.value == 0) {
		if(confirm(_change_security_info)==true)
			f.action='WiFi_multiple_settings.asp?acmode=0';
		else
			security_type_ac();
  	}

   	//if (f.lan_wlan_security_ac[1].selected) {   
   	if(f.lan_wlan_security_ac.value == 1) {
  	    if(parseInt(mode_802_ac)==6) {
			alert(_error_wepand802_chance);
			security_type_ac();
			return false;
  	    }
		f.action='WiFi_multiple_settings.asp?acmode=1';
  	}

	//if (f.lan_wlan_security_ac[2].selected) {
	if(f.lan_wlan_security_ac.value == 2) {
  	    if(parseInt(mode_802_ac)==6) {
			alert(_error_wepand802_chance);
			security_type_ac();
			return false;
  	    }
		f.action='WiFi_multiple_settings.asp?acmode=10';
  	}

   	//if (f.lan_wlan_security_ac[3].selected)
   	if(f.lan_wlan_security_ac.value == 3)
		f.action='WiFi_multiple_settings.asp?acmode=6';
   	//if (f.lan_wlan_security_ac[4].selected)
   	if(f.lan_wlan_security_ac.value == 4)
		f.action='WiFi_multiple_settings.asp?acmode=7';
	//if (f.lan_wlan_security_ac[5].selected)
	if(f.lan_wlan_security_ac.value == 5)
		f.action='WiFi_multiple_settings.asp?acmode=9';

	f.WirelessSecuritytypeFlag_ac.value = 1;
		f.submit();
}

function  security_type_ac() {
	var f=document.getElementById("wifi_form");
	if(wireless_authtype_ac=="OPEN")
		 //f.lan_wlan_security_ac[0].selected = true;
		 f.lan_wlan_security_ac.value = 0;
	else if(wireless_authtype_ac=="WEP-64Bits")
		 //f.lan_wlan_security_ac[1].selected = true;
		 f.lan_wlan_security_ac.value = 1;
	else if(wireless_authtype_ac=="WEP-128Bits")
		 //f.lan_wlan_security_ac[2].selected = true;
		 f.lan_wlan_security_ac.value = 2;
	else if(wireless_authtype_ac=="WPAPSK"||wireless_authtype_ac=="WPA")
		 //f.lan_wlan_security_ac[3].selected = true;
		 f.lan_wlan_security_ac.value = 3;
	else if(wireless_authtype_ac=="WPA2PSK"||wireless_authtype_ac=="WPA2")
		 //f.lan_wlan_security_ac[4].selected = true;
		 f.lan_wlan_security_ac.value = 4;
	else if(wireless_authtype_ac=="WPAPSKWPA2PSK"||wireless_authtype_ac=="WPA1WPA2")
		 //f.lan_wlan_security_ac[5].selected = true;
		 f.lan_wlan_security_ac.value = 5;
}

function doSave_ac(num) {
	$("label[class='error']").html("");
	var f = document.getElementById("wifi_form");
	var flag2 = 0;
	if(ssid_status_ac)
      	{
      	   for (var i=0;i < ssid_status_ac;i++)				
		{	if(dataLists_ac[i][0] ==1)
		      {
				if(i == 0)
					continue;
				flag2++;
			}
		 }
      	}
	if(flag2 == 0)
	{
		alert("Please add 5GHz SSID first!");
		return;
	}
	if(f.status_ac_ck.checked) {
		f.wirelesstotalstatusflag_ac.value=1;
		//if(f.lan_wlan_isAccesspoint_double_check_ac.checked) {
		if(f.sinf_ac_ck.checked) {
			f.wirelesseEnablessidflag_ac.value = 1;
			if(!checkparameter_ac())
				return false;
			else {
				//if(f.has_hiddenSsid_ac[0].checked)
				if(f.hide_ac_ck.checked == false)
					f.wirelessehiddenssidflag_ac.value = 1;
				else
					f.wirelessehiddenssidflag_ac.value = 2;
				
				//if(f.wmm_enable_ac[0].checked)
				if(f.wmm_ac_ck.checked == false)
					f.wirelessewmmstatusflag_ac.value = 1;
				else
					f.wirelessewmmstatusflag_ac.value = 2;

				//if(f.lan_wlan_security_ac[0].selected) {
				if(f.lan_wlan_security_ac.value == 0) {
					f.WirelessSecuritytypeFlag_ac.value = 2;
					f.WirelessSecuritytypeValue_ac.value = "OPEN";
				//} else if(f.lan_wlan_security_ac[1].selected ||f.lan_wlan_security_ac[2].selected) {
				} else if(f.lan_wlan_security_ac.value == 1 ||f.lan_wlan_security_ac.value == 2) {
					//if(f.lan_wlan_security_ac[1].selected)
					if(f.lan_wlan_security_ac.value == 1)
						f.WirelessSecuritytypeValue_ac.value = "WEP-64Bits";
					//else if(f.lan_wlan_security_ac[2].selected)
					else if(f.lan_wlan_security_ac.value == 2)
						f.WirelessSecuritytypeValue_ac.value = "WEP-128Bits";
					
					f.WirelessSecuritytypeFlag_ac.value = 3;

					//if(f.lan_wlan_encryptionselection_ac[0].checked)
					if(document.getElementById('radio_encryptionselection_A_ac').getAttribute('class') == 'clicked')
						f.Wirelesswepkeyflag_ac.value = 1;
					//else if(f.lan_wlan_encryptionselection_ac[1].checked)
					else if(document.getElementById('radio_encryptionselection_B_ac').getAttribute('class') == 'clicked')
						f.Wirelesswepkeyflag_ac.value = 2;
					//else if (f.lan_wlan_encryptionselection_ac[2].checked)
					else if(document.getElementById('radio_encryptionselection_C_ac').getAttribute('class') == 'clicked')
						f.Wirelesswepkeyflag_ac.value = 3;
					//else if (f.lan_wlan_encryptionselection_ac[3].checked)
					else if(document.getElementById('radio_encryptionselection_D_ac').getAttribute('class') == 'clicked')
						f.Wirelesswepkeyflag_ac.value = 4;
				//} else if(f.lan_wlan_security_ac[3].selected ||f.lan_wlan_security_ac[4].selected ||f.lan_wlan_security_ac[5].selected) {					
				}else if(f.lan_wlan_security_ac.value == 3 ||f.lan_wlan_security_ac.value == 4 ||f.lan_wlan_security_ac.value == 5) {
					//if(f.lan_wlan_security_ac[3].selected) {
					if(f.lan_wlan_security_ac.value == 3) {
						//if(f.lan_wlan_wpatype_ac[0].checked) {
						if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked'){
							f.WirelessSecuritytypeFlag_ac.value = 4;
							f.WirelessSecuritytypeValue_ac.value = "WPA";
						} else {
							f.WirelessSecuritytypeFlag_ac.value = 5;
							f.WirelessSecuritytypeValue_ac.value = "WPAPSK";
						}						
					}

					//if(f.lan_wlan_security_ac[4].selected) {
					if(f.lan_wlan_security_ac.value == 4) {
						//if(f.lan_wlan_wpatype_ac[0].checked) {
						if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked'){
							f.WirelessSecuritytypeFlag_ac.value = 4;
							f.WirelessSecuritytypeValue_ac.value = "WPA2";							
						} else {
							f.WirelessSecuritytypeFlag_ac.value = 5;
							f.WirelessSecuritytypeValue_ac.value = "WPA2PSK";
						}
					}
					//if(f.lan_wlan_security_ac[5].selected) {
					if(f.lan_wlan_security_ac.value == 5) {
						//if(f.lan_wlan_wpatype_ac[0].checked) {
						if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked'){
							f.WirelessSecuritytypeFlag_ac.value = 4;
							f.WirelessSecuritytypeValue_ac.value = "WPA1WPA2";							
						} else {
							f.WirelessSecuritytypeFlag_ac.value = 5;
							f.WirelessSecuritytypeValue_ac.value = "WPAPSKWPA2PSK";
						}
					}
				}
			}
		}
	}
	f.wirelessesavecfgflag_ac.value = 1;
	f.action =  "WiFi_multiple_settings_ac_loading.asp?";
	document.getElementById("CreatePopAlertMessage").style.display = "inline";
	document.getElementById("waitSettingFinish").style.display = "inline";
	Start_reciprocal_Number_RestoreConfiguration();
	setTimeout('ajaxSubmit(document.getElementById("wifi_form"), function(){});', 300);
	//f.action =  "/cgi-bin/ADVANCED/restartwireless_ac.asp?";
	//f.submit();
}
function goIndex_ac(n) {
	var f = document.getElementById("wifi_form");
	f.WirelessSSIDChangeFlag_ac.value = 1;
	f.action = "WiFi_multiple_settings.asp?";
	f.submit();
}

function showWEP_ac() {
	var sctr=new String();
	sctr="";
	sctr+="<tr>";
	sctr+="			<th>Auth. Type: </th>";
	sctr+="			<td><div class=\"styled-select\"><select id='select_authtype_0_ac' name='lan_wlan_authtype_ac'>";
	sctr+="				<option value='OpenSystem' >Open</option>";
	sctr+="				<option value='SharedKey' >Shared</option>";
	sctr+="			</select></div><label id='lan_wlan_authtype_ac_error' name='lan_wlan_authtype_ac_error' class='error'></label>";
	sctr+="		</td>";
	sctr+="	</tr>";
	//sctr+="	</table>";
	//sctr+="	</div>";
	//sctr+="	<div class='box'>";
	//sctr+="	<h2>WEP</h2>";
	//sctr+="	<table cellpadding='1' cellspacing='1' border='0' width='525'>";
	sctr+="		<tr>";
	sctr+="		<th>";
	sctr+="			<div class =\"title\">WEP Key</div>";
	sctr+="		</th>";
	sctr+="		<td></td>";
	sctr+="		</tr>";
	/*sctr+="		<tr>";
	sctr+="		<td>";
	sctr+="				WEP is the wireless encryption standard.To use it you must enter the same key(s) into the<br>";
	sctr+="router and the wireless stations For 64 bit keys you must enter 10 hex digits into each key box.<br> ";
	sctr+="For 128 bit keys you must enter 26 hex digits into each key box.A hex digit is either a number<br>";
	sctr+=" from 0 to 9 or a letter from a to f, A to F.For the most secure use of WEP set the authentication type<br>";
	sctr+="to \"Shared Key\" when WEP is enabled.<br><br>";
	sctr+="You may also enter any text string into a WEP key box,in which case it will be converted into a<br>";
	sctr+="hexadecimal key using the ASCII values of the characters.A maximum of 5 text characters can<br>";
	sctr+="be entered for 64 bit keys,and a maximum of 13 characters for 128 bit keys.";
	sctr+="		</td>";
	sctr+="	</tr>";
	sctr+="	</table>";
	sctr+="	<table cellpadding='1' cellspacing='1' border='0' width='525'>";*/
	sctr+="		<tr>";
	//sctr+="		<td>";
	//sctr+="		</td>";
	sctr+="		<th>";
	sctr+="		Selection</td>";
	sctr+="		<td>";
	sctr+="		Key</td>";
	sctr+="	</tr>";
	sctr+="		<tr>";
	//sctr+="		<input id='radio_encryptionselection_A_ac' type='radio' name='lan_wlan_encryptionselection_ac' class='radio' value='A'  /></td>";
	sctr+="<td align=\"right\"><div id='radio_encryptionselection_A_ac' class=\"clicked\" onClick=\"checkkey_ac(0);\"></div></td>";
	sctr+="		<td>";
	sctr+="		<input id='text_encryption_A_ac' type='text' name='lan_wlan_encryption_A_ac' class='text' value='' maxlength='26'/><label id='lan_wlan_encryption_A_ac_error' name='lan_wlan_encryption_A_ac_error' class='error'></label></td>";
	sctr+="	</tr>";
	sctr+="		<tr>";
	//sctr+="		<input id='radio_encryptionselection_B_ac' type='radio' name='lan_wlan_encryptionselection_ac' class='radio' value='B'  /></td>";
	sctr+="<td align=\"right\"><div id='radio_encryptionselection_B_ac'  class=\"unclick\" onClick=\"checkkey_ac(1);\"></div></td>";
	sctr+="		<td>";
	sctr+="		<input id='text_encryption_B_ac' type='text' name='lan_wlan_encryption_B_ac' class='text' value='' maxlength='26' /><label id='lan_wlan_encryption_B_ac_error' name='lan_wlan_encryption_B_ac_error' class='error'></label></td>";
	sctr+="		<tr>";
	//sctr+="		<input id='radio_encryptionselection_C_ac' type='radio' name='lan_wlan_encryptionselection_ac' class='radio' value='C'  /></td>";
	sctr+="<td align=\"right\"><div id='radio_encryptionselection_C_ac'  class=\"unclick\" onClick=\"checkkey_ac(2);\"></div></td>";
	sctr+="		<td>";
	sctr+="		<input id='text_encryption_C_ac' type='text' name='lan_wlan_encryption_C_ac' class='text' value='' maxlength='26'/><label id='lan_wlan_encryption_C_ac_error' name='lan_wlan_encryption_C_ac_error' class='error'></label></td>";
	sctr+="	</tr>";
	sctr+="		<tr>";
	//sctr+="		<input id='radio_encryptionselection_D_ac' type='radio' name='lan_wlan_encryptionselection_ac' class='radio' value='D'  />";
	sctr+="<td align=\"right\"><div id='radio_encryptionselection_D_ac' class=\"unclick\" onClick=\"checkkey_ac(3);\"></div></td>";
	sctr+="		<td>";
	sctr+="		<input id='text_encryption_D_ac' type='text' name='lan_wlan_encryption_D_ac' class='text' value='' maxlength='26'/><label id='lan_wlan_encryption_D_ac_error' name='lan_wlan_encryption_D_ac_error' class='error'></label></td>";
	sctr+="	</tr>";
	
	document.writeln(sctr);
}

function showWPA_ac(type) {
	var sctr=new String();
	sctr="";
	sctr+="<tr>";
	sctr+="<th>Cipher Type : </th>";
	sctr+="<td><div class=\"styled-select\"><select id=\"cipher_type_ac\"  name=\"cipher_type_ac\" />";

	if(type=="wpa") {
		if(mode_802_ac!="6")
			sctr+="<option value=\"TKIP\" >TKIP</option>";
		sctr+="<option value=\"TKIPAES\" >Both</option>";
	} else if(type=="wpa2") {
		sctr+="<option value=\"AES\" >AES</option>";
		sctr+="<option value=\"TKIPAES\" >Both</option>";
	} else {
		if(mode_802_ac!="6")
			sctr+="<option value=\"TKIP\" >TKIP</option>";
		sctr+="<option value=\"AES\" >AES</option>";
		sctr+="<option value=\"TKIPAES\" >Both</option>";
	}

	sctr+="</select></div><label id='cipher_type_ac_error' name='cipher_type_ac_error' class='error'></label></td>";
	sctr+="</tr>";
	sctr+="";
	sctr+="		<tr>";
	sctr+="			<th>Group Key Interval : </th>";
	sctr+="			<td><input id=\"text_groupkeyinterval_0_ac\" type=\"text\" name=\"lan_wlan_groupkeyinterval_ac\" class=\"text\" value=\"\" />Seconds<label id='lan_wlan_groupkeyinterval_ac_error' name='lan_wlan_groupkeyinterval_ac_error' class='error'></label>";
	sctr+="		</td>";
	sctr+="	</tr>";
	sctr+="<tr>";
	sctr+="		<th><div class =\"title\">WPA Type</div></th>";
	sctr+="		<td></td>";
	sctr+="</tr>";
	sctr+="<tr>";
	sctr+="	<td align=\"right\"><div id=\"wpatype_8021x_ac\"  class=\"clicked\" onClick=\"checkWPA_ac(0);\"></div></td>";
	sctr+="	<td> 802.1x</td>";
	sctr+="</tr>";
	sctr+="<tr>";
	sctr+="	<td align=\"right\"><div id=\"wpatype_psk_ac\"  class=\"unclick\" onClick=\"checkWPA_ac(1);\"></div></td>";
	sctr+="	<td> PSK Value</td>";
	sctr+="</tr>";
	//sctr+="	</table>";
	//sctr+="	</div>";
	//sctr+="	<div class='box'>";
	
	document.writeln(sctr); 
}

function checkkey_ac(arg)
{
	if(arg==0)
	{
		document.getElementById("radio_encryptionselection_A_ac").setAttribute("class", "clicked");
		document.getElementById("radio_encryptionselection_B_ac").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_C_ac").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_D_ac").setAttribute("class", "unclick");
	}
	else if(arg==1)
	{
		document.getElementById("radio_encryptionselection_A_ac").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_B_ac").setAttribute("class", "clicked");
		document.getElementById("radio_encryptionselection_C_ac").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_D_ac").setAttribute("class", "unclick");
	}
	else if(arg==2)
	{
		document.getElementById("radio_encryptionselection_A_ac").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_B_ac").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_C_ac").setAttribute("class", "clicked");
		document.getElementById("radio_encryptionselection_D_ac").setAttribute("class", "unclick");
	}
	else if(arg==3)
	{
		document.getElementById("radio_encryptionselection_A_ac").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_B_ac").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_C_ac").setAttribute("class", "unclick");
		document.getElementById("radio_encryptionselection_D_ac").setAttribute("class", "clicked");
	}
}

function checkWPA_ac(arg) {
	f=document.getElementById("wifi_form");
	if(arg == 0)
	{
		document.getElementById('wpatype_8021x_ac').setAttribute("class", "clicked");
		document.getElementById('wpatype_psk_ac').setAttribute("class", "unclick");
	}
	else
	{
		document.getElementById('wpatype_8021x_ac').setAttribute("class", "unclick");
		document.getElementById('wpatype_psk_ac').setAttribute("class", "clicked");
	}
	switch(parseInt(arg)) {	
		case 0:
			//document.getElementById('wpatypeselect_ac').innerHTML=showWPA1_ac();
			document.getElementById("ShowWPA1_ac").style.display = "inline";
			document.getElementById("ShowWPA3_ac").style.display = "none";
			f.lan_wlan_groupkeyinterval_ac.value=groupkey_ac;
			f.lan_wlan_serverip_ac.value=serverip_ac;
			f.lan_wlan_port_ac.value=wlan_port_ac;
			f.lan_wlan_secret_ac.value=wlan_secret_ac;
			break;
		case 1:
			//document.getElementById('wpatypeselect_ac').innerHTML=showWPA3_ac();
			document.getElementById("ShowWPA1_ac").style.display = "none";
			document.getElementById("ShowWPA3_ac").style.display = "inline";
			f.lan_wlan_string_ac.value=wpapsk_ac;
			if(cipherType_ac == "")
				f.cipher_type_ac.value = cipherType_ac;
			else if(f.cipher_type_ac.value != cipherType_ac)
				f.cipher_type_ac.value = cipherType_ac;
			break;
		default:
	   		break;
	}
	save_button_changed();
}

//showWPA1()-->802x
function showWPA1_ac() {
	var sctr=new String();
	sctr="";
	sctr+="	<div class='box'>";
	sctr+="	<h2>802.1x</h2>";
	sctr+="	<table cellpadding='1' cellspacing='1' border='0' width='525'>";
	sctr+="		<tr>";
	sctr+="			<td class='r_tb' width='200'>Server IP Address:</td>";
	sctr+="			<td class='l_tb'><input id=\"text_serverip_0_ac\" type=\"text\" name=\"lan_wlan_serverip_ac\" class=\"text\" value=\"\" ><label id='lan_wlan_serverip_ac_error' name='lan_wlan_serverip_ac_error' class='error'></label></td>";
	sctr+="		</tr>";
	sctr+="		<tr>";
	sctr+="			<td class='r_tb' width='200'>Port: </td>";
	sctr+="			<td class='l_tb'><input id=\"text_port_0_ac\" type=\"text\" name=\"lan_wlan_port_ac\" class=\"text\" value=\"\" ><label id='lan_wlan_port_ac_error' name='lan_wlan_port_ac_error' class='error'></label></td>";
	sctr+="		</tr>";
	sctr+="		<tr>";
	sctr+="			<td class='r_tb' width='200'>Secret: </td>";
	sctr+="			<td class='l_tb'><input id=\"text_secret_0_ac\" type=\"text\" name=\"lan_wlan_secret_ac\" class=\"text\" value=\"\" ><label id='lan_wlan_secret_ac_error' name='lan_wlan_secret_ac_error' class='error'></label></td>";
	sctr+="		</tr>";
	sctr+="	</table>";
	sctr+="	</div>";
	return sctr;
}

function showWPA2_ac() {
	var sctr=new String();
	sctr="";
	sctr+="	<div class='box'>";
	sctr+="	<h2>PSK Hex Value</h2>";
	sctr+="<table cellpadding=1 cellspacing=1 border=0 width=525>";
	sctr+="		<tr>";
	sctr+="			<td class='r_tb' width='200'>Hex Value:</td>";
	sctr+="			<td class='l_tb'><input id=\"text_hex_0_ac\" type=\"text\" name=\"lan_wlan_hex_ac\" class=\"text\" value=\"\" ></td>";
	sctr+="		</tr>";
	sctr+="	</table>";
	sctr+="	</div>";
	return sctr;
}

function showWPA3_ac() {
	var sctr=new String();
	sctr="";
	sctr+="	<div class='box'>";
	sctr+="	<h2>PSK</h2>";
	sctr+="	<table cellpadding='1' cellspacing='1' border='0' width='525'>";
	sctr+="		<tr>";
	sctr+="			<td class='r_tb' width='200'>PSK Network Key: </td>";
	sctr+="			<td class='l_tb'><input id=\"text_string_0_ac\" type=\"text\" name=\"lan_wlan_string_ac\" class=\"text\" value=\"\" maxlength=\"64\"></td>";
	sctr+="		</tr>";
	sctr+="	</table>";
	sctr+="	</div>";
	return sctr;
}

function double_check_ac() {
	var	 f = document.getElementById("wifi_form");

	if(f.lan_wlan_isAccesspoint_double_check_ac.checked) {
		f.lan_wlan_autochannel_ac.disabled=false;
		if(f.lan_wlan_autochannel_ac.checked)
			f.lan_wlan_channel_ac.disabled=true;
		else
			f.lan_wlan_channel_ac.disabled=false;
	} else {
		f.lan_wlan_autochannel_ac.disabled=true;
		f.lan_wlan_channel_ac.disabled=true;
	}
}

function isHex(cmpStr) {
	var regStr=/[a-fA-F0-9]/;
  	for(i=0;i<cmpStr.length;i++) { 
  		if (cmpStr.charAt(i).search(regStr)==-1)
  			return false;
   	}    
	return true;	
}

function MathandAbs(ip) {
   var sIP=ip.split(".");
   absip = Math.abs(sIP[0])+"."+Math.abs(sIP[1])+"."+Math.abs(sIP[2])+"."+Math.abs(sIP[3]); 
   return absip;
}

function checkIP(ip) {
	var sIP=MathandAbs(ip).split(".");
	if (sIP.length!=4) return false;
	for(var i=0; i< sIP.length; i++) {
		if (!isNumber(sIP[i])) return false;
		if(i == 0) {
			if (parseInt(sIP[i]) < 1 || parseInt(sIP[i]) > 223 ||parseInt(sIP[i]) == 127) 
				return false;
		}
		if(i == 1 ||i == 2) {
			if (parseInt(sIP[i]) < 0 || parseInt(sIP[i]) > 255) 
				return false;
		}
		if(i == 3) {
			if (parseInt(sIP[i]) < 1 || parseInt(sIP[i]) > 254) 
				return false;
		}
	}
	return true;
}

function checkparameter_ac() {
	var	 f = document.getElementById("wifi_form");	

	//if(f.lan_wlan_security_ac[0].selected)
	if(f.lan_wlan_security_ac.value == 0)
		return true;

	//if(f.lan_wlan_security_ac[1].selected) {
	if(f.lan_wlan_security_ac.value == 1) {
		//if(f.lan_wlan_encryptionselection_ac[0].checked) {
		if(document.getElementById('radio_encryptionselection_A_ac').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_A_ac.value.length == 5) {
				if(!check_key("lan_wlan_encryption_A_ac",64,1)) {
					$("#lan_wlan_encryption_A_ac_error").html("<br/>"+_lan_wlan_encryption_A_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_A_ac.focus();
					f.lan_wlan_encryption_A_ac.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_A_ac.value.length == 10) {
				if(!check_key("lan_wlan_encryption_A_ac",64,2)) {
					$("#lan_wlan_encryption_A_ac_error").html("<br/>"+_lan_wlan_encryption_A_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_A_ac.focus();
					f.lan_wlan_encryption_A_ac.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_A_ac_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_A_ac.focus();
				f.lan_wlan_encryption_A_ac.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection_ac[1].checked) {
		if(document.getElementById('radio_encryptionselection_B_ac').getAttribute('class') == 'clicked') {
		    if(f.lan_wlan_encryption_B_ac.value.length==5) {
				if(!check_key("lan_wlan_encryption_B_ac",64,1)) {
					$("#lan_wlan_encryption_B_ac_error").html("<br/>"+_lan_wlan_encryption_B_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_B_ac.focus();
					f.lan_wlan_encryption_B_ac.select();
					return false;
				}
		    } else if (f.lan_wlan_encryption_B_ac.value.length==10) {
			 	if(!check_key("lan_wlan_encryption_B_ac",64,2)) {
					$("#lan_wlan_encryption_B_ac_error").html("<br/>"+_lan_wlan_encryption_B_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_B_ac.focus();
					f.lan_wlan_encryption_B_ac.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_B_ac_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_B_ac.focus();
				f.lan_wlan_encryption_B_ac.select();
				return false;

			}
		}

		//if(f.lan_wlan_encryptionselection_ac[2].checked) {
		if(document.getElementById('radio_encryptionselection_C_ac').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_C_ac.value.length == 5) {
				if(!check_key("lan_wlan_encryption_C_ac",64,1)) {
					$("#lan_wlan_encryption_C_ac_error").html("<br/>"+_lan_wlan_encryption_C_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_C_ac.focus();
					f.lan_wlan_encryption_C_ac.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_C_ac.value.length == 10) {
				if(!check_key("lan_wlan_encryption_C_ac",64,2)) {
					$("#lan_wlan_encryption_C_ac_error").html("<br/>"+_lan_wlan_encryption_C_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_C_ac.focus();
					f.lan_wlan_encryption_C_ac.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_C_ac_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_C_ac.focus();
				f.lan_wlan_encryption_C_ac.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection_ac[3].checked) {
		if(document.getElementById('radio_encryptionselection_D_ac').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_D_ac.value.length == 5) {
				if(!check_key("lan_wlan_encryption_D_ac",64,1)) {
					$("#lan_wlan_encryption_D_ac_error").html("<br/>"+_lan_wlan_encryption_D_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_D_ac.focus();
					f.lan_wlan_encryption_D_ac.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_D_ac.value.length == 10) {
				if(!check_key("lan_wlan_encryption_D_ac",64,2)) {
					$("#lan_wlan_encryption_D_ac_error").html("<br/>"+_lan_wlan_encryption_D_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_D_ac.focus();
					f.lan_wlan_encryption_D_ac.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_D_ac_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_D_ac.focus();
				f.lan_wlan_encryption_D_ac.select();
				return false;
			}
		}
	}

	//if(f.lan_wlan_security_ac[2].selected) {
	if(f.lan_wlan_security_ac.value == 2) {
		//if(f.lan_wlan_encryptionselection_ac[0].checked) {
		if(document.getElementById('radio_encryptionselection_A_ac').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_A_ac.value.length == 13) {
				if(!check_key("lan_wlan_encryption_A_ac",128,1)) {
					$("#lan_wlan_encryption_A_ac_error").html("<br/>"+_lan_wlan_encryption_A_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_A_ac.focus();
					f.lan_wlan_encryption_A_ac.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_A_ac.value.length == 26) {
				if(!check_key("lan_wlan_encryption_A_ac",128,2)) {
					$("#lan_wlan_encryption_A_ac_error").html("<br/>"+_lan_wlan_encryption_A_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_A_ac.focus();
					f.lan_wlan_encryption_A_ac.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_A_ac_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_A_ac.focus();
				f.lan_wlan_encryption_A_ac.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection_ac[1].checked) {
		if(document.getElementById('radio_encryptionselection_B_ac').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_B_ac.value.length==13) {
				if(!check_key("lan_wlan_encryption_B_ac",128,1)) {
					$("#lan_wlan_encryption_B_ac_error").html("<br/>"+_lan_wlan_encryption_B_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_B_ac.focus();
					f.lan_wlan_encryption_B_ac.select();
					return false;
				}
		    } else if (f.lan_wlan_encryption_B_ac.value.length==26) {
			 	if(!check_key("lan_wlan_encryption_B_ac",128,2)) {
					$("#lan_wlan_encryption_B_ac_error").html("<br/>"+_lan_wlan_encryption_B_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_B_ac.focus();
					f.lan_wlan_encryption_B_ac.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_B_ac_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_B_ac.focus();
				f.lan_wlan_encryption_B_ac.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection_ac[2].checked) {
		if(document.getElementById('radio_encryptionselection_C_ac').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_C_ac.value.length == 13) {
				if(!check_key("lan_wlan_encryption_C_ac",128,1)) {
					$("#lan_wlan_encryption_C_ac_error").html("<br/>"+_lan_wlan_encryption_C_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_C_ac.focus();
					f.lan_wlan_encryption_C_ac.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_C_ac.value.length == 26) {
				if(!check_key("lan_wlan_encryption_C_ac",128,2)) {
					$("#lan_wlan_encryption_C_ac_error").html("<br/>"+_lan_wlan_encryption_C_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_C_ac.focus();
					f.lan_wlan_encryption_C_ac.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_C_ac_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_C_ac.focus();
				f.lan_wlan_encryption_C_ac.select();
				return false;
			}
		}

		//if(f.lan_wlan_encryptionselection_ac[3].checked) {
		if(document.getElementById('radio_encryptionselection_D_ac').getAttribute('class') == 'clicked') {
			if(f.lan_wlan_encryption_D_ac.value.length == 13) {
				if(!check_key("lan_wlan_encryption_D_ac",128,1)) {
					$("#lan_wlan_encryption_D_ac_error").html("<br/>"+_lan_wlan_encryption_D_1_error+msg_length+_lan_wlan_encryption_ASCII_error);
					f.lan_wlan_encryption_D_ac.focus();
					f.lan_wlan_encryption_D_ac.select();
					return false;
				}
			} else if (f.lan_wlan_encryption_D_ac.value.length == 26) {
				if(!check_key("lan_wlan_encryption_D_ac",128,2)) {
					$("#lan_wlan_encryption_D_ac_error").html("<br/>"+_lan_wlan_encryption_D_1_error+msg_length+_lan_wlan_encryption_hex_error);
					f.lan_wlan_encryption_D_ac.focus();
					f.lan_wlan_encryption_D_ac.select();
					return false;
				}
			} else {
				$("#lan_wlan_encryption_D_ac_error").html("<br/>"+_wlan_conn_wizard_network_error);
				f.lan_wlan_encryption_D_ac.focus();
				f.lan_wlan_encryption_D_ac.select();
				return false;
			}
		}
	}

	//if((f.lan_wlan_security_ac[5].selected) || (f.lan_wlan_security_ac[3].selected) || (f.lan_wlan_security_ac[4].selected)) {
	if((f.lan_wlan_security_ac.value == 5) || (f.lan_wlan_security_ac.value == 3) || (f.lan_wlan_security_ac.value == 4)) {
		if((parseInt(f.lan_wlan_groupkeyinterval_ac.value)<10) || (parseInt(f.lan_wlan_groupkeyinterval_ac.value)>4194303) || (!isNumber(f.lan_wlan_groupkeyinterval_ac.value))) {
			$("#lan_wlan_groupkeyinterval_ac_error").html("<br/>"+_lan_wlan_groupkeyinterval_error);
			f.lan_wlan_groupkeyinterval_ac.focus();
			f.lan_wlan_groupkeyinterval_ac.select();
			return false;
		}

		//if( f.lan_wlan_wpatype_ac[0].checked) {
		if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked'){
			if(!checkIP(f.lan_wlan_serverip_ac.value)) {
				$("#lan_wlan_serverip_ac_error").html("<br/>"+_lan_wlan_serverip_error);
				f.lan_wlan_serverip_ac.focus();
				f.lan_wlan_serverip_ac.select();
				return false;
			}

			if((f.lan_wlan_port_ac.value<1) ||(f.lan_wlan_port_ac.value>65535) ||(!isNumber(f.lan_wlan_port_ac.value)) ) {
				$("#lan_wlan_port_ac_error").html("<br/>"+_lan_wlan_port_error);
				f.lan_wlan_port_ac.focus();
				f.lan_wlan_port_ac.select();
				return false;
			}

			if(f.lan_wlan_secret_ac.value.length>64) {
				$("#lan_wlan_secret_ac_error").html("<br/>"+_lan_wlan_sec_error);
				f.lan_wlan_secret_ac.focus();
				f.lan_wlan_secret_ac.select();
				return false;
			}
		}
		//else if( f.lan_wlan_wpatype_ac[1].checked) {
		else if(document.getElementById('wpatype_psk_ac').getAttribute('class') == 'clicked') {
			/*if(f.lan_wlan_string_ac.value.length == 64) {
				if(isWPAKey16InvalidAC(f.lan_wlan_string_ac.value)) {
					if(f.lan_wlan_security_ac[3].selected)
						alert(_lan_wlan_hex_errorA+"WPA-PSK"+_lan_wlan_hex_errorB);
					if(f.lan_wlan_security_ac[4].selected)
						alert(_lan_wlan_hex_errorA+"WPA2-PSK"+_lan_wlan_hex_errorB);
					if(f.lan_wlan_security_ac[5].selected)
						alert(_lan_wlan_hex_errorA+"WPA/WPA2-PSK"+_lan_wlan_hex_errorB);
					f.lan_wlan_string_ac.focus();
					f.lan_wlan_string_ac.select();
					return false;
				}
			} else {*/
				if((f.lan_wlan_string_ac.value.length<8)||(f.lan_wlan_string_ac.value.length>63)||(isWPAKeyInvalid(f.lan_wlan_string_ac.value))) {
					//if(f.lan_wlan_security_ac[3].selected)
					if(f.lan_wlan_security_ac.value == 3)
						$("#lan_wlan_string_ac_error").html("<br/>"+_lan_wlan_string_errorA+"WPA-PSK"+_lan_wlan_string_errorB);
					//if(f.lan_wlan_security_ac[4].selected)
					if(f.lan_wlan_security_ac.value == 4)
						$("#lan_wlan_string_ac_error").html("<br/>"+_lan_wlan_string_errorA+"WPA2-PSK"+_lan_wlan_string_errorB);
					//if(f.lan_wlan_security_ac[5].selected)
					if(f.lan_wlan_security_ac.value == 5)
						$("#lan_wlan_string_ac_error").html("<br/>"+_lan_wlan_string_errorA+"WPA/WPA2-PSK"+_lan_wlan_string_errorB);
					f.lan_wlan_string_ac.focus();
					f.lan_wlan_string_ac.select();
					return false;
				}

				if(strchk_unicode(f.lan_wlan_string_ac.value)) {
					$("#lan_wlan_string_ac_error").html("<br/>"+_lan_wlan_string_errorC);
					f.lan_wlan_string_ac.focus();
					f.lan_wlan_string_ac.select();
					return false;
				}
			//}
		}
	}
	return true;
}

function isWPAKey16InvalidAC(source) {
	var str = "0123456789abcedf";
	for(var i = 0; i < source.length; i++) {
		var j = 0;
		for(var z = 0; z < str.length; z++) {
			if(source.charAt(i) == str.charAt(z))
				j++;
		}

		if(j == 0) {
			return true;
		}
	}
	return false;
}

function isWPAKeyInvalid(source) {
	var sourcestr=new String(source);
	var tempstr;
	if(sourcestr=="")
		return false;

	for(var strposition=0;strposition<=sourcestr.length-1;strposition++) {
		tempstr=sourcestr.substr(strposition,1);
		if((tempstr.charCodeAt(0)>=48 && tempstr.charCodeAt(0)<=57 )||(tempstr.charCodeAt(0)>=65 && tempstr.charCodeAt(0)<=90 )||(tempstr.charCodeAt(0)>=97 && tempstr.charCodeAt(0)<=122 ))
			continue;
		else
			return true;
	}
	return false;
}

function Prefixes_Rule(TelNum) {
    for (var i=0; i<TelNum.length; i++) {
        if(TelNum.charAt(i)=='\"') return false;
		if(TelNum.charAt(i)==' ') return false;
		if(TelNum.charAt(i)=='\\') return false;
		if(TelNum.charAt(i)=='%') return false;
    }
    return true;
}

function Prefixes_Rule_WEP_KEY(TelNum) {
    for (var i=0; i<TelNum.length; i++) {
        if(TelNum.charAt(i)=='\"') return false;
		if(TelNum.charAt(i)==' ') return false;
		if(TelNum.charAt(i)=='\\') return false;
		if(TelNum.charAt(i)=='%') return false;
		if(TelNum.charAt(i)=='#') return false;
    }
    return true;
}

function check_key(lan_wlan_encryption,lan_wlan_cipher,lan_wlan_type) {
	var	 f = document.getElementById("wifi_form");	
	var keyvalue=eval("f."+lan_wlan_encryption+".value");
	var keylength=parseInt(lan_wlan_cipher);
	var keytype=parseInt(lan_wlan_type );
	var ascii_length = (keylength/8)-3;
	var hex_length = ascii_length*2;	
	
	if(keytype==1)
		my_length=ascii_length;
	else  
		my_length=hex_length; 

	msg_length= my_length;

	if(keytype==1) {
		if(!Prefixes_Rule_WEP_KEY(keyvalue))
			return false;
	}
	
	if(keytype!=1) {		
		if(!isHex(keyvalue))
			return false;
	}

	if ((keytype==1)&&(keyvalue==0) )
	    return false;

	if ((keyvalue.length!=my_length&&keyvalue!="") )
	    return false;
	
	return true;	
}

function isIP(ip) {
	var sIP=ip.split(".");
	if (sIP.length!=4) return false;
	for(var i=0; i< sIP.length; i++) {
		if (!isNumber(sIP[i])) return false;
		if (parseInt(sIP[i]) < 0 || parseInt(sIP[i]) > 255) return false;
	}
	return true;
}

function isNumber(n) {
  	if (n.length==0) return false;
   	for (var i=0;i < n.length;i++) {
       	if (n.charAt(i) < '0' || n.charAt(i) > '9') return false;
   	}
   	return true;
}

function subHtmAsc(str) {
	var regStr=/(#|%|&|\+|\/|:|;|<|=|>|\?|@|\ )+/;
  	var rntStr="";
  
  	if (str.search(regStr) == -1)
   		return str;

  	for(var i=0; i<str.length; i++) {
   		rntStr+=checkHtmChar(str.charAt(i))
  	}
	return rntStr;
}

function checkDataListsCount() {
	var count=0;
   	for (var i=0;i < Wlanlist.length;i++) {
       	if (Wlanlist[i][2].length) {
       		count=Wlanlist.length;
       		break;
      	}
   	}
   	return count;
}

function point_control_ac(temp) {
	var	 f = document.getElementById("wifi_form");
	if(temp=="upload") {
	    if(acmode==0)
			 f.WirelessSecuritytypeValue_ac.value = "OPEN";
		else if(acmode==1 ||acmode==5||acmode==8)
			 f.WirelessSecuritytypeValue_ac.value = "WEP-64Bits";
		else if(acmode==10 ||acmode==11||acmode==12)
			 f.WirelessSecuritytypeValue_ac.value = "WEP-128Bits";
		else if(acmode==6)
			f.WirelessSecuritytypeValue_ac.value = "WPAPSK";
		else if(acmode==7)
			f.WirelessSecuritytypeValue_ac.value = "WPA2PSK";
		else if(acmode==9)
			f.WirelessSecuritytypeValue_ac.value = "WPAPSKWPA2PSK";
		else if(acmode==2)
			f.WirelessSecuritytypeValue_ac.value = "WPA";
		else if(acmode==3)
			f.WirelessSecuritytypeValue_ac.value = "WPA2";
		else if(acmode==4)
			f.WirelessSecuritytypeValue_ac.value = "WPA1WPA2";
	} else {
		//if(f.lan_wlan_security_ac[0].selected)
		if(f.lan_wlan_security_ac.value == 0)
			 f.WirelessSecuritytypeValue_ac.value = "OPEN";
		//else if(f.lan_wlan_security_ac[1].selected)
		else if(f.lan_wlan_security_ac.value == 1)
			 f.WirelessSecuritytypeValue_ac.value = "WEP-64Bits";
		//else if(f.lan_wlan_security_ac[2].selected)
		else if(f.lan_wlan_security_ac.value == 2)
			 f.WirelessSecuritytypeValue_ac.value = "WEP-128Bits";
		else {
			//if(f.lan_wlan_security_ac[3].selected) {
			if(f.lan_wlan_security_ac.value == 3) {
				//if(f.lan_wlan_wpatype_ac[0].checked)
				if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked')
					f.WirelessSecuritytypeValue_ac.value = "WPA";
				else
					f.WirelessSecuritytypeValue_ac.value = "WPAPSK";
			}

			//if(f.lan_wlan_security_ac[4].selected) {
			if(f.lan_wlan_security_ac.value == 4) {
				//if(f.lan_wlan_wpatype_ac[0].checked)
				if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked')
					f.WirelessSecuritytypeValue_ac.value = "WPA2";
				else
					f.WirelessSecuritytypeValue_ac.value = "WPA2PSK";
			}

			//if(f.lan_wlan_security_ac[5].selected) {
			if(f.lan_wlan_security_ac.value == 5) {
				//if(f.lan_wlan_wpatype_ac[0].checked)
				if(document.getElementById('wpatype_8021x_ac').getAttribute('class') == 'clicked')
					f.WirelessSecuritytypeValue_ac.value = "WPA1WPA2";
				else
					f.WirelessSecuritytypeValue_ac.value = "WPAPSKWPA2PSK";
			}
		}
	}

	//if(f.lan_wlan_isAccesspoint_double_check_ac.checked) {
	if(f.sinf_ac_ck.checked) {
		//f.has_hiddenSsid_ac[0].disabled=false;
		//f.has_hiddenSsid_ac[1].disabled=false;
		document.getElementById("hide_ac").disabled= false;
		if(mode_802_ac=="6"||mode_802_ac=="0"||mode_802_ac=="9")
		{	//f.wmm_enable_ac[1].disabled=false;
		}
		else {
			//f.wmm_enable_ac[0].disabled=false;
			//f.wmm_enable_ac[1].disabled=false;
			document.getElementById("wmm_ac").disabled= false;
		}

		//f.lan_wlan_security_ac.disabled=false;
		$("#select_security_ac").selectbox("enable");
		if(f.WirelessSecuritytypeValue_ac.value.indexOf("WEP")!=-1) {	
			//f.lan_wlan_authtype_ac.disabled=false;
			$("#select_authtype_0_ac").selectbox("enable");
			
			//f.lan_wlan_encryptionselection_ac[0].disabled=false;
			document.getElementById('radio_encryptionselection_A_ac').disabled == false;
			f.lan_wlan_encryption_A_ac.disabled=false;
			
			//f.lan_wlan_encryptionselection_ac[1].disabled=false;
			document.getElementById('radio_encryptionselection_B_ac').disabled == false;
			f.lan_wlan_encryption_B_ac.disabled=false;
			
			//f.lan_wlan_encryptionselection_ac[2].disabled=false;
			document.getElementById('radio_encryptionselection_C_ac').disabled == false;
			f.lan_wlan_encryption_C_ac.disabled=false;
			
			//f.lan_wlan_encryptionselection_ac[3].disabled=false;
			document.getElementById('radio_encryptionselection_D_ac').disabled == false;
			f.lan_wlan_encryption_D_ac.disabled=false;
		}

		if(f.WirelessSecuritytypeValue_ac.value.indexOf("WPA")!=-1) {
			f.lan_wlan_groupkeyinterval_ac.disabled=false;
			//f.cipher_type_ac.disabled=false;
			$("#cipher_type_ac").selectbox("enable");
			//f.lan_wlan_wpatype_ac[0].disabled=false;
			//f.lan_wlan_wpatype_ac[1].disabled=false;
			document.getElementById("wpatype_8021x_ac").disabled=false;
			document.getElementById("wpatype_psk_ac").disabled=false;
			if(f.WirelessSecuritytypeValue_ac.value.indexOf('PSK')!=-1)
				f.lan_wlan_string_ac.disabled=false;
			else {
				f.lan_wlan_serverip_ac.disabled=false;
				f.lan_wlan_port_ac.disabled=false;
				f.lan_wlan_secret_ac.disabled=false;
			}
		}
	} else {
					
		//f.has_hiddenSsid_ac[0].disabled=true;
		//f.has_hiddenSsid_ac[1].disabled=true;
		document.getElementById("hide_ac").disabled=true;
		//f.wmm_enable_ac[0].disabled=true;
		//f.wmm_enable_ac[1].disabled=true;
		document.getElementById("wmm_ac").disabled=true;
		//f.lan_wlan_security_ac.disabled=true;
		$("#select_security_ac").selectbox("disable");
		if(f.WirelessSecuritytypeValue_ac.value.indexOf("WEP")!=-1) {	
			//f.lan_wlan_authtype_ac.disabled=true;
			$("#select_authtype_0_ac").selectbox("disable");
			
			//f.lan_wlan_encryptionselection_ac[0].disabled=true;
			document.getElementById('radio_encryptionselection_A_ac').disabled == true;
			f.lan_wlan_encryption_A_ac.disabled=true;
			
			//f.lan_wlan_encryptionselection_ac[1].disabled=true;
			document.getElementById('radio_encryptionselection_B_ac').disabled == true;
			f.lan_wlan_encryption_B_ac.disabled=true;
			
			//f.lan_wlan_encryptionselection_ac[2].disabled=true;
			document.getElementById('radio_encryptionselection_C_ac').disabled == true;
			f.lan_wlan_encryption_C_ac.disabled=true;
			
			//f.lan_wlan_encryptionselection_ac[3].disabled=true;
			document.getElementById('radio_encryptionselection_D_ac').disabled == true;
			f.lan_wlan_encryption_D_ac.disabled=true;
		}

		if(f.WirelessSecuritytypeValue_ac.value.indexOf("WPA")!=-1) {
			f.lan_wlan_groupkeyinterval_ac.disabled=true;
			//f.cipher_type_ac.disabled=true;
			$("#cipher_type_ac").selectbox("disable");
			//f.lan_wlan_wpatype_ac[0].disabled=true;
			//f.lan_wlan_wpatype_ac[1].disabled=true;
			document.getElementById("wpatype_8021x_ac").disabled=true;
			document.getElementById("wpatype_psk_ac").disabled=true;
			if(f.WirelessSecuritytypeValue_ac.value.indexOf('PSK')!=-1)
				f.lan_wlan_string_ac.disabled=true;
			else {
				f.lan_wlan_serverip_ac.disabled=true;
				f.lan_wlan_port_ac.disabled=true;
				f.lan_wlan_secret_ac.disabled=true;
			}
		}
	}
}

function save_newPIN_ac() {
	var	 f = document.getElementById("wifi_form");
	if(confirm(_lan_wlan_wi_fi_confirm_newPIN)==true) {
		f.WpsGenerate_ac.value = "1";
		f.submit();
	} else
		return;
}

function reset_defaultPIN_ac() {
	if(confirm(_lan_wlan_wi_fi_confirm_defaultPIN)==true) {
		var str="ad_wireless_setup.xgi?";
		str+="set/wireless/inf:1/wps/pin=";
		str+="&"+"EXE=wlan,1,1";
		self.location.href=str;
	} else
		return;
}

function reset_unconfigured_ac() {
	var	f = document.getElementById("wifi_form");
	if(confirm(_lan_wlan_wi_fi_confirm_unconfigured)==true) {
	   	 if(f.closewpsflag_ac.value ==2) {
		    if (confirm(wps_error_3)==true) {
		    	f.resetuncfgwpsenablecfg_ac.value = 1;
				f.WirelessSecuritytypeValue_ac.value="OPEN";
				f.wirelessehiddenssidflag_ac.value = 1;
			} else
				return false;
		 } else if(f.closewpsflag_ac.value ==3) {
			if (confirm(wps_error_4)==true) {
				f.cipher_type_ac.value="AES";
				f.resetuncfgwpsenablecfg_ac.value = 2;
			} else
				return false;
	 	}

		f.WpsOOB_ac.value = 1;
		f.submit();
	} else
		return;
}

var AjaxReq = null;
function createRequest() {
	var request = null;
	try { request = new XMLHttpRequest(); }
	catch (trymicrosoft) {
		try { request = new ActiveXObject("Msxml2.XMLHTTP"); }
		catch (othermicrosoft) {
			try { request = new ActiveXObject("Microsoft.XMLHTTP"); }
			catch (failed) { request = null; }
		}
	}
	if (request == null) alert("Error creating request object !");
	return request;
}

function send_request(url, callback) {
	if (AjaxReq == null) AjaxReq = createRequest();
	AjaxReq.open("GET", url, true);
	AjaxReq.onreadystatechange = callback;
	AjaxReq.send(null);
}


function wps_enable_ac() {
	var	 f = document.getElementById("wifi_form");	
	//if(f.wifi_enable_ac.checked) {
	if(f.wifi_enable_ac_ck.checked){
		//if(f.has_hiddenSsid_ac[1].checked)
		if(f.hide_ac_ck.checked)
			f.closewpsflag_ac.value = 2;
		else {
			if(f.WirelessSecuritytypeValue_ac.value =="WPA" ||f.WirelessSecuritytypeValue_ac.value=="WPA2" ||f.WirelessSecuritytypeValue_ac.value=="WPA1WPA2" ||f.WirelessSecuritytypeValue_ac.value=="WPAPSK" ||  f.WirelessSecuritytypeValue_ac.value=="WEP-64Bits" ||f.WirelessSecuritytypeValue_ac.value=="WEP-128Bits")
				f.closewpsflag_ac.value = 2;
			else if(f.WirelessSecuritytypeValue_ac.value =="WPA2PSK" || f.WirelessSecuritytypeValue_ac.value =="WPAPSKWPA2PSK") {
			    if(f.cipher_type_ac.value=="TKIP")
					f.closewpsflag_ac.value = 3;
			}
		}
	}

	//if(f.wifi_enable_ac.checked) {
	if(f.wifi_enable_ac_ck.checked){
		f.newPIN_ac.disabled=false;
		/*if(wi_current_configure_ac == "2")
			f.unconfigure_ac.disabled=false;
		else
			f.unconfigure_ac.disabled=true;*/
	} else {
		f.newPIN_ac.disabled=true;
		//f.unconfigure_ac.disabled=true;
	}
}

function callback_check_wpsrunningstatus_ac() {
	var	 f = document.getElementById("wifi_form");
	if (AjaxReq != null && AjaxReq.readyState == 4) {
		if (AjaxReq.responseText !="") {
 			var result=eval (AjaxReq.responseText)
			if( parseInt(result)>0&& parseInt(result)<34&&parseInt(result)!=1&& parseInt(result)!=2&& parseInt(result)!=14&&parseInt(result)!=15) {
				f.wpsclosesetactivestatusflag_ac.value = 1;
				f.action = "ad_wireless_setup.asp";
				f.submit();
		    }
		}
	}
}

function checking_wps_ac() {
	var  i = Math.random();
	var url = "/cgi-bin/get/ADVANCED/ad_wireless_wpsrunningstatus_ac.asp?id="+i;
	send_request(url, callback_check_wpsrunningstatus_ac);
}

function ChangeBandStatus_ac(){
	Disable_wirless_ac('changestatus');
}
