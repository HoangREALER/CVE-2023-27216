var menu_Check_Settings		= 0;
var menu_Check_Advanced		= 0;
var menu_Check_Management	= 0;

function initialMenu()
{	
	var menu;
	
	menu = "<ul>";
	menu 		+= "	<li><a id='menu_Home' href='javascript:CheckHTMLStatus(\"Home\");'>"+m_menu_home+"</a></li>";
	menu 		+= "	<li class='parent' onmouseover='this.className=\"parentOn\"' onmouseout='this.className=\"parent\"'><a id='menu_Settings' href='#'>"+m_menu_settings+"</a>";
	menu 		+= "		<ul>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Wizard_Manual\");'>"+m_menu_settings_wizard+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Internet\");'>"+m_menu_settings_internet+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"WiFi\");'>"+m_menu_settings_wifi+"</a></li>";
	//menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"WiFi_multiple_settings\");'>"+"Multiple SSIDs"+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Network\");'>"+m_menu_settings_lan+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"USB\");'>"+m_menu_settings_usb+"</a></li>";
	menu 		+= "		</ul>";
	menu 		+= "	</li>";
	menu 		+= "	<li class='parent' onmouseover='this.className=\"parentOn\"' onmouseout='this.className=\"parent\"'><a id='menu_Advanced' href='#'>"+m_menu_features+"</a>";
	menu 		+= "		<ul>";
	//menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"QoS\");'>"+"QoS Engine"+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Firewall\");'>"+m_menu_features_firewall+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Application\");'>"+m_menu_features_app+"</a></li>";
	//menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Dmz\");'>"+"DMZ (Exposed Host)"+"</a></li>"; 
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Acl\");'>"+m_menu_features_acl+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatusSessionKey(\"VirtualServer\");'>"+m_menu_features_pf+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"IpFilter\");'>"+m_menu_features_ip_mac_filter+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"StaticRoute\");'>"+m_menu_features_route+"</a></li>";
	// menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Tr069\");'>"+"TR069"+"</a></li>";
	//menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Dns\");'>"+"DNS"+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"DynamicDNS\");'>"+m_menu_features_ddns+"</a></li>";		
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Igmp\");'>"+"IGMP"+"</a></li>";		
	//menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"SH\");'>"+"Self Help"+"</a></li>";		
	// menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"ParentalControl\");'>"+m_menu_features_url_filter+"</a></li>";
	menu 		+= "		</ul>";
	menu 		+= "	</li>";
	menu 		+= "	<li class='parent' onmouseover='this.className=\"parentOn\"' onmouseout='this.className=\"parent\"'><a id='menu_Management' href='#'>"+m_menu_management+"</a>";
	menu 		+= "		<ul>";
	//menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Time\");'>"+"Time & Schedule"+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Time\");'>"+m_menu_management_time+"</a></li>";
	//menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"SystemLog\");'>"+"System Log"+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Loginfo\");'>"+"Log Info"+"</a></li>";
	//menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Admin\");'>"+"System Admin"+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"System\");'>"+m_menu_management_system+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"UpdateFirmware\");'>"+m_menu_management_firmware+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Statistics\");'>"+m_menu_management_statistics+"</a></li>";
	menu 		+= "			<li><a href='javascript:CheckHTMLStatus(\"Diagnostics\");'>"+m_menu_management_diagnostics+"</a></li>";
	menu 		+= "		</ul>";
	menu 		+= "	</li>";
	menu 		+= "</ul>";
	
	document.getElementById("menu").innerHTML = menu;
}

function CheckClickStatus(menuId)
{
	switch (menuId)
	{
		case "m_Settings":
			if (menu_Check_Settings == 0)	{	document.getElementById("m_Settings").className = "parent";	menu_Check_Settings = 1;	}
			else	{	document.getElementById("m_Settings").className = "parentOn";	menu_Check_Settings = 0;	}
			break;
		case "m_Advanced":
			if (menu_Check_Advanced == 0)	{	document.getElementById("m_Advanced").className = "parent";	menu_Check_Advanced = 1;	}
			else	{	document.getElementById("m_Advanced").className = "parentOn";	menu_Check_Advanced = 0;	}
			break;
		case "m_Management":
			if (menu_Check_Management == 0)	{	document.getElementById("m_Management").className = "parent";	menu_Check_Management = 1;	}
			else	{	document.getElementById("m_Management").className = "parentOn";	menu_Check_Management = 0;	}
			break;
	}
}
function setMenu(menuId)
{		
	//document.getElementById(menuId).style.background = "url(/graphic/New_GUI/navigation_bg5.gif?v=TimeStamp_QzwsxDcRfvTGByHn) right top no-repeat";
}

function CheckHTMLStatus(URLString)
{	
	$.ajax({
		"cache" : false,
		"url" : "/cgi-bin/New_GUI/" + URLString + ".asp",
		"timeout" : 5000,
		"type" : "GET",
		"error" : function() { self.location.href = self.location.href; },
		"success" : function(data) { document.getElementById("DetectRouterConnection").style.display = "none"; self.location.href = "/cgi-bin/New_GUI/" + URLString + ".asp"; }
	});	
}

function CheckHTMLStatusSessionKey(URLString)
{
	$.getJSON("/cgi-bin/get/New_GUI/get_internet_type.asp", function(data){
		
		var innerValue = -1;
		
		if(data.TransMode == "PTM")
			innerValue = 8;		
		else if(data.TransMode == "ATM"){
			if(parseInt(data.NatPvc) == 8)
				innerValue = 0;				
			else
				innerValue = data.NatPvc				
		}
		else
			innerValue = 0;		
		
		$.post("/cgi-bin/New_GUI/"+URLString+".asp", { sessionKey: data.sessionKey, buttonType: "change", inter: innerValue},function(){self.location.href = "/cgi-bin/New_GUI/"+URLString+".asp";});
			
	});
}

