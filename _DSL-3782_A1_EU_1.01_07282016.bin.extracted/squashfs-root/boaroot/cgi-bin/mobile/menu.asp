<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title><%tcWebApi_get("Upnpd_Entry","ModelName","s")%></title>
	<link rel="stylesheet" href="/mobile/jquery.mobile-1.4.5.min.css">
	<link rel="stylesheet" href="/mobile/style.css">
	<script src="/mobile/jquery.min.js"></script>
	<script src="/mobile/jquery.mobile-1.4.5.min.js"></script>
	<script src="/mobile/initLanguage.js"></script>
</head>
<body>
	<div data-role="page">
		<script type="text/javascript">
			if(top.location.href.indexOf("index.asp") != top.location.href.toString().length - 9) {
				top.location.href = "http://<%TCWebApi_get("Lan_Entry0","IP","s")%>/cgi-bin/mobile/index.asp";
			}

			var n = 5 * 60*1000;
			setTimeout(function(){
				self.location.href = "/cgi-bin/mobile/index.asp";
			}, n);

			function decodeSpecialChr(str) {
				str = str.replace(/&amp;/g, "&");
				str = str.replace(/&lt;/g, "<");
				str = str.replace(/&gt;/g, ">");
				str = str.replace(/&quot;/g, "\"");
				str = str.replace(/&#39;/g, "'");
				str = str.replace(/&#59;/g, ";");
				str = str.replace(/&#61;/g, "=");
				str = str.replace(/&#43;/g, "+");
				str = str.replace(/&#45;/g, "-");
				return str;
			}

			$(function(){
				// Internet
				var WanMode = decodeSpecialChr('<%tcWebApi_get("Wan_Common","WanMode","s")%>');
				var TransMode = decodeSpecialChr('<%tcWebApi_get("Wan_Common","TransMode","s")%>');


				var internet_status_adsl = 0;
				var internet_status_ptm = 0;
				var internet_status_3g = 0;
				var connType_adsl = decodeSpecialChr('<%tcWebApi_get("DeviceInfo_PVC0","connType","s")%>');
				if(connType_adsl != "Bridge") {
					var status_adsl = decodeSpecialChr('<%tcWebApi_get("DeviceInfo_PVC0","Status","s")%>');
					if(status_adsl == "1") {
						var wanip_adsl = decodeSpecialChr('<%tcWebApi_get("DeviceInfo_PVC0","WanIP","s")%>');
						if(wanip_adsl != "10.64.64.64")
							internet_status_adsl = 1;
					}
				} else {
					var lineState = decodeSpecialChr('<%tcWebApi_get("Info_Adsl","lineState","s")%>');
					if(lineState == "up")
						internet_status_adsl = 1;
				}

				var connType_fiber = decodeSpecialChr('<%tcWebApi_get("DeviceInfoExt_PVC8e0","connType","s")%>');
				if(connType_fiber != "Bridge") {
					var status_fiber = decodeSpecialChr('<%tcWebApi_get("DeviceInfoExt_PVC8e0","Status","s")%>');
					if(status_fiber == "1") {
						var wanip_ptm = decodeSpecialChr('<%tcWebApi_get("DeviceInfoExt_PVC8e0","WanIP","s")%>');
						if(wanip_ptm != "10.64.64.64")
							internet_status_ptm = 1;
					}
				} else {
					var lineState = decodeSpecialChr('<%tcWebApi_get("Info_Adsl","lineState","s")%>');
					if(lineState == "up")
						internet_status_ptm = 1;
				}

				var status_3g = decodeSpecialChr('<%tcWebApi_get("DongleInfo","Status","s")%>');
				if(status_3g == "1")
					internet_status_3g = 1;

				var getNetworkStatus = 'DISCONNECTED';
				if(WanMode=="ADSL") {
					if(internet_status_adsl==1)
						getNetworkStatus = 'CONNECTED';
				} else if(WanMode=="VDSL") {
					if(internet_status_ptm==1)
						getNetworkStatus = 'CONNECTED';
				} else if(WanMode=="3G") {
					if(internet_status_3g==1)
						getNetworkStatus = 'CONNECTED';
				} else if(WanMode=="Auto") {
					if(internet_status_adsl==1||internet_status_ptm==1||internet_status_3g==1)
						getNetworkStatus = 'CONNECTED';
				}

				var connectionType = "";
				var getIPAddress = "";
				switch(TransMode) {
					case "3G":				
						connectionType = decodeSpecialChr('<%tcWebApi_get("DongleInfo","connType","s")%>');
						getIPAddress = decodeSpecialChr('<%tcWebApi_get("DongleInfo","WanIP","s")%>');
						break;
					case "ATM":		
						connectionType = decodeSpecialChr('<%tcWebApi_get("DeviceInfo_PVC0","connType","s")%>');
						getIPAddress = decodeSpecialChr('<%tcWebApi_get("DeviceInfo_PVC0","WanIP","s")%>');
						break;
					case "PTM":		
						connectionType = decodeSpecialChr('<%tcWebApi_get("DeviceInfoExt_PVC8e0","connType","s")%>');
						getIPAddress = decodeSpecialChr('<%tcWebApi_get("DeviceInfoExt_PVC8e0","WanIP","s")%>');
						break;
				}

				if(getNetworkStatus == "DISCONNECTED") {
					$("#internet_stauts").prop("src", "/mobile/images/mobile_internet.png");
				} else {
					if(connectionType.indexOf("Bridge") != -1) {
						$("#internet_stauts").prop("src", "/mobile/images/mobile_internet_connected.png");
					} else {
						if (getIPAddress != "" && getIPAddress != "0.0.0.0") {
							$("#internet_stauts").prop("src", "/mobile/images/mobile_internet_connected.png");
						} else {
							$("#internet_stauts").prop("src", "/mobile/images/mobile_internet.png");
						}
					}
				}

				// Wifi
				var wifi2_enable = decodeSpecialChr('<%tcWebApi_get("WLan_Common","APOn","s")%>');
				var wifi5_enable = decodeSpecialChr('<%tcWebApi_get("WLan11ac_Common","APOn","s")%>');

				if(wifi2_enable == "1" || wifi5_enable == "1") {
					$("#wifi_status").prop("src", "/mobile/images/mobile_wifi_connected.png");
				} else if( wifi2_enable != "1" && wifi5_enable != "1" ) {
					$("#wifi_status").prop("src", "/mobile/images/mobile_wifi_disconnected.png");
				}

				// Guest Zone
				var gz24 = decodeSpecialChr('<%tcWebApi_get("WLan_Common","SSIDseperation","s")%>');
				var gz5  = decodeSpecialChr('<%tcWebApi_get("WLan11ac_Common","SSIDseperation","s")%>');

				if(gz24 == "1" || gz5 == "1") {
					$("#gz_status").prop("src", "/mobile/images/mobile_guestzone_enabled.png");
				} else if( gz24 != "1" && gz5 != "1" ) {
					$("#gz_status").prop("src", "/mobile/images/mobile_guestzone.png");
				}


				$(".ui-input-btn").on("tap", function(){
					var vals = $(this).children("input[type='button']").val();
					switch(vals){
						case "Internet":
							self.location.href = "/cgi-bin/mobile/internet.asp";
							break;
						case "Wi-Fi":
							self.location.href = "/cgi-bin/mobile/wifi.asp";
							break;
						case "Guest Zone":
							self.location.href = "/cgi-bin/mobile/guest.asp";
							break;
						case "Firmware Information":
							self.location.href = "/cgi-bin/mobile/fwInfo.asp";
							break;
					}
				});
			});
		</script>
		<div role="main" class="ui-content">
			<img src="/mobile/images/mobile_dlink_logo.png" class="menu_logo">

			<div style="padding-top: 50px;" class="menu_navigation_center">
				<div class="ui-input-btn ui-btn ui-corner-all ui-shadow">
					<img src="/mobile/images/mobile_internet.png" class="menu_navigation" id="internet_stauts">
					<script>document.write(m_comm_menu_wan);</script>
					<input data-enhanced="true" value="Internet" type="button">
				</div>
			</div>

			<div style="padding-top: 10px;" class="menu_navigation_center">
				<div class="ui-input-btn ui-btn ui-corner-all ui-shadow">
					<img src="/mobile/images/mobile_wifi_connected.png" class="menu_navigation" id="wifi_status">
					<script>document.write(m_comm_menu_wifi);</script>
					<input data-enhanced="true" value="Wi-Fi" type="button">
				</div>
			</div>

			<div style="padding-top: 10px;" class="menu_navigation_center">
				<div class="ui-input-btn ui-btn ui-corner-all ui-shadow">
					<img src="/mobile/images/mobile_guestzone.png" class="menu_navigation" id="gz_status">
					<script>document.write(m_comm_menu_guest);</script>
					<input data-enhanced="true" value="Guest Zone" type="button">
				</div>
			</div>

			<div style="padding-top: 10px;" class="menu_navigation_center">
				<div class="ui-input-btn ui-btn ui-corner-all ui-shadow">
					<img src="/mobile/images/mobile_update_fw.png" class="menu_navigation">
					<script>document.write(m_comm_menu_fw);</script>
					<input data-enhanced="true" value="Firmware Information" type="button">
				</div>
			</div>
			<div style="padding-top: 10px;" class="menu_navigation_center" align="center">
				<b>
					<span class="textnormal"><script>document.write(m_view);</script>:</span>&nbsp;
					<a href="javascript:top.location='/cgi-bin/index.asp?mobile=true'" style="text-decoration: underline"><span class="textnormal"><script>document.write(m_desk);</script></span></a>
				</b>&nbsp;
				<b><span class="textnormal">|&nbsp;</span><span class="textnormal"><script>document.write(m_mobile);</script></span></b>
			</div>
			<div class="copyright">
				<script>document.write(m_comm_copyright);</script>
			</div>
		</div>
	</div>
</body>
</html>