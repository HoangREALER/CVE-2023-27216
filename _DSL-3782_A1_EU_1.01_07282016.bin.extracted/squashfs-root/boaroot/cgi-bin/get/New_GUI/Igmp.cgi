#!/bin/sh
echo -e "Content-Type: text/html\n\n"
tcapi_path=/userfs/bin/

state=`"$tcapi_path"tcapi get Lan_Snoop snoopEnable`
state=`"$tcapi_path"alpha_tcapi $state`
case $state in "no node information" | "no attribute information" | "connection error") state="N/A"
esac
echo "var state = '"$state"';"

physical_type=`"$tcapi_path"tcapi get Wan_Common TransMode`
physical_type=`"$tcapi_path"alpha_tcapi $physical_type`
case $physical_type in "no node information" | "no attribute information" | "connection error") physical_type="N/A"
esac
echo "var physical_type = '"$physical_type"';"

wan_pvc=`"$tcapi_path"tcapi get WebCurSet_Entry wan_pvc`
wan_pvc=`"$tcapi_path"alpha_tcapi $wan_pvc`
wan_pvc_ext=`"$tcapi_path"tcapi get WebCurSet_Entry wan_pvc_ext`
wan_pvc_ext=`"$tcapi_path"alpha_tcapi $wan_pvc_ext`

for i in 0 1 2 3 4 5 6 7
do 
	node_name="Wan_PVC"$i""
	pvc_IGMPproxy=`"$tcapi_path"tcapi get $node_name IGMPproxy`
	pvc_IGMPproxy=`"$tcapi_path"alpha_tcapi $pvc_IGMPproxy`
	case $pvc_IGMPproxy in "no node information" | "no attribute information" | "connection error") pvc_IGMPproxy="N/A"
	esac
	pvc_isp=`"$tcapi_path"tcapi get $node_name ISP`
	pvc_isp=`"$tcapi_path"alpha_tcapi $pvc_isp`
	case $pvc_isp in "no node information" | "no attribute information" | "connection error") pvc_isp="N/A"
	esac
	echo "var pvc"$i"_IGMPproxy = '"$pvc_IGMPproxy"';"
	echo "var pvc"$i"_isp = '"$pvc_isp"';"
	
	pvc_active=`"$tcapi_path"tcapi get $node_name Active`
	pvc_active=`"$tcapi_path"alpha_tcapi $pvc_active`
	case $pvc_active in "no node information" | "no attribute information" | "connection error") pvc_active="N/A"
	esac
	echo "var pvc"$i"_active = '"$pvc_active"';"

	`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc 8`
	`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc_ext $i`
	ptm_IGMPproxy=`"$tcapi_path"tcapi get Wan_PVC IGMPproxy`
	ptm_IGMPproxy=`"$tcapi_path"alpha_tcapi $ptm_IGMPproxy`
	case $ptm_IGMPproxy in "no node information" | "no attribute information" | "connection error") ptm_IGMPproxy="N/A"
	esac
	ptm_isp=`"$tcapi_path"tcapi get Wan_PVC ISP`
	ptm_isp=`"$tcapi_path"alpha_tcapi $ptm_isp`
	case $ptm_isp in "no node information" | "no attribute information" | "connection error") ptm_isp="N/A"
	esac	
	echo "var ptm"$i"_IGMPproxy = '"$ptm_IGMPproxy"';"
	echo "var ptm"$i"_isp = '"$ptm_isp"';"
	ptm_active=`"$tcapi_path"tcapi get Wan_PVC Active`
	ptm_active=`"$tcapi_path"alpha_tcapi $ptm_active`
	case $ptm_active in "no node information" | "no attribute information" | "connection error") ptm_active="N/A"
	esac	
	echo "var ptm"$i"_active = '"$ptm_active"';"


	`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc 10`
	`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc_ext $i`
	eth_IGMPproxy=`"$tcapi_path"tcapi get Wan_PVC IGMPproxy`
	eth_IGMPproxy=`"$tcapi_path"alpha_tcapi $eth_IGMPproxy`
	case $eth_IGMPproxy in "no node information" | "no attribute information" | "connection error") eth_IGMPproxy="N/A"
	esac
	eth_isp=`"$tcapi_path"tcapi get Wan_PVC ISP`
	eth_isp=`"$tcapi_path"alpha_tcapi $eth_isp`
	case $eth_isp in "no node information" | "no attribute information" | "connection error") eth_isp="N/A"
	esac	
	echo "var eth"$i"_IGMPproxy = '"$eth_IGMPproxy"';"
	echo "var eth"$i"_isp = '"$eth_isp"';"
	eth_active=`"$tcapi_path"tcapi get Wan_PVC Active`
	eth_active=`"$tcapi_path"alpha_tcapi $eth_active`
	case $eth_active in "no node information" | "no attribute information" | "connection error") eth_active="N/A"
	esac	
	echo "var eth"$i"_active = '"$eth_active"';"
	
done

`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc $wan_pvc`
`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc_ext $wan_pvc_ext`

IGMPversion=`"$tcapi_path"tcapi get IGMPproxy_Entry Version`
IGMPversion=`"$tcapi_path"alpha_tcapi $IGMPversion`
	case $IGMPversion in "no node information" | "no attribute information" | "connection error") IGMPversion="N/A"
	esac
	echo "var IGMPversion='"$IGMPversion"';"

echo "var baseFilename='ad_network_all.asp';"