#!/bin/sh
echo -e "Content-Type: text/html\n\n"
tcapi_path=/userfs/bin/
wan_pvc=`"$tcapi_path"tcapi get Route User_def_num`
wan_pvc=`"$tcapi_path"alpha_tcapi $`
for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21
do 
	node_name="Route_Entry"$i""
	routing_dstip=`"$tcapi_path"tcapi get $node_name DST_IP`
	routing_dstip=`"$tcapi_path"alpha_tcapi $routing_dstip`
	case $routing_dstip in "no node information" | "no attribute information" | "connection error" | "0.0.0.0") routing_dstip="N/A"
		routing_active="N/A"
		routing_submask="N/A"
		routing_device="N/A"
		routing_gateway="N/A"
		routing_metric="N/A";;*)routing_active=`"$tcapi_path"tcapi get $node_name Active`
		routing_active=`"$tcapi_path"alpha_tcapi $routing_active`
		routing_submask=`"$tcapi_path"tcapi get $node_name Sub_mask`
		routing_submask=`"$tcapi_path"alpha_tcapi $routing_submask`
		routing_device=`"$tcapi_path"tcapi get $node_name Device`
		routing_device=`"$tcapi_path"alpha_tcapi $routing_device`
		routing_gateway=`"$tcapi_path"tcapi get $node_name Gateway`
		routing_gateway=`"$tcapi_path"alpha_tcapi $routing_gateway`
		routing_metric=`"$tcapi_path"tcapi get $node_name metric`
		routing_metric=`"$tcapi_path"alpha_tcapi $routing_metric`

		case $routing_active in "no node information" | "no attribute information" | "connection error") routing_active="N/A"
		esac
		case $routing_submask in "no node information" | "no attribute information" | "connection error" | "0.0.0.0") routing_submask="N/A"
		esac
		case $routing_device in "no node information" | "no attribute information" | "connection error") routing_device="N/A"
		esac
		case $routing_gateway in "no node information" | "no attribute information" | "connection error" | "0.0.0.0") routing_gateway="N/A"
		esac
		case $routing_metric in "no node information" | "no attribute information" | "connection error") routing_metric="N/A"
		esac

	esac
	echo "var routing"$i"_dstip = '"$routing_dstip"';"
	echo "var routing"$i"_active = '"$routing_active"';"
	echo "var routing"$i"_submask = '"$routing_submask"';"
	echo "var routing"$i"_device = '"$routing_device"';"
	echo "var routing"$i"_gateway = '"$routing_gateway"';"
	echo "var routing"$i"_metric = '"$routing_metric"';"
done

for i in 0 1 2 3 4 5 6 7
do 
	node_name="Wan_PVC"$i""
	pvc_isp=`"$tcapi_path"tcapi get $node_name ISP`
	pvc_isp=`"$tcapi_path"alpha_tcapi $pvc_isp`
	pvc_active=`"$tcapi_path"tcapi get $node_name Active`
	pvc_active=`"$tcapi_path"alpha_tcapi $pvc_active`
	case $pvc_isp in "no node information" | "no attribute information" | "connection error") pvc_isp="N/A"
	esac
	case $pvc_active in "no node information" | "no attribute information" | "connection error") pvc_active="N/A"
	esac
	echo "var PVC"$i"_isp = '"$pvc_isp"';"
	echo "var PVC"$i"_active = '"$pvc_active"';"
done

wan_pvc=`"$tcapi_path"tcapi get WebCurSet_Entry wan_pvc`
wan_pvc=`"$tcapi_path"alpha_tcapi $wan_pvc`
wan_pvc_ext=`"$tcapi_path"tcapi get WebCurSet_Entry wan_pvc_ext`
wan_pvc_ext=`"$tcapi_path"alpha_tcapi $wan_pvc_ext`

`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc 8`
for i in 0 1 2 3 4 5 6 7
do 
	`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc_ext $i`
	node_name="Wan_PVC"
	pvc_isp=`"$tcapi_path"tcapi get $node_name ISP`
	pvc_isp=`"$tcapi_path"alpha_tcapi $pvc_isp`
	pvc_active=`"$tcapi_path"tcapi get $node_name Active`
	pvc_active=`"$tcapi_path"alpha_tcapi $pvc_active`
	case $pvc_isp in "no node information" | "no attribute information" | "connection error") pvc_isp="N/A"
	esac
	case $pvc_active in "no node information" | "no attribute information" | "connection error") pvc_active="N/A"
	esac
	echo "var WAN8_PVC"$i"_isp = '"$pvc_isp"';"
	echo "var WAN8_PVC"$i"_active = '"$pvc_active"';"
done

`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc 10`
for i in 0 1 2 3 4 5 6 7
do 
	`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc_ext $i`
	node_name="Wan_PVC"
	pvc_isp=`"$tcapi_path"tcapi get $node_name ISP`
	pvc_isp=`"$tcapi_path"alpha_tcapi $pvc_isp`
	pvc_active=`"$tcapi_path"tcapi get $node_name Active`
	pvc_active=`"$tcapi_path"alpha_tcapi $pvc_active`
	case $pvc_isp in "no node information" | "no attribute information" | "connection error") pvc_isp="N/A"
	esac
	case $pvc_active in "no node information" | "no attribute information" | "connection error") pvc_active="N/A"
	esac
	echo "var WAN0_PVC"$i"_isp = '"$pvc_isp"';"
	echo "var WAN0_PVC"$i"_active = '"$pvc_active"';"
done

`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc $wan_pvc`
`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc_ext $wan_pvc_ext`


echo "var baseFilename='ad_routing_all.asp';"