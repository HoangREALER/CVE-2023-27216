#!/bin/sh
echo -e "Content-Type: text/html\n\n"
tcapi_path=/userfs/bin/

internet_status_adsl=0
internet_status_ptm=0
internet_status_3g=0
internet_status_adsl_all=0
internet_status_ptm_all=0

usage=`"$tcapi_path"tcapi get Wan_PVC0 DEFAULTROUTE`
usage=`"$tcapi_path"alpha_tcapi $usage`
case "$usage" in
	"no attribute information" | "no node information" )
	usage="N/A";;
esac
echo "var usage = '"$usage"';"

lineState=`"$tcapi_path"tcapi get Info_Adsl lineState`
lineState=`"$tcapi_path"alpha_tcapi $lineState`
case "$lineState" in
	"no attribute information" | "no node information" )
	lineState="N/A";;
esac
echo "var lineState = '"$lineState"';"

WanMode=`"$tcapi_path"tcapi get Wan_Common WanMode`
WanMode=`"$tcapi_path"alpha_tcapi $WanMode`
case "$WanMode" in
	"no attribute information" | "no node information" )
	WanMode="N/A";;
esac
echo "var WanMode = '"$WanMode"';"

TransMode=`"$tcapi_path"tcapi get Wan_Common TransMode`
TransMode=`"$tcapi_path"alpha_tcapi $TransMode`
case "$TransMode" in
	"no attribute information" | "no node information" )
	TransMode="N/A";;
esac
echo "var TransMode = '"$TransMode"';"

connType_3G=`"$tcapi_path"tcapi get DongleInfo connType`
connType_3G=`"$tcapi_path"alpha_tcapi $connType_3G`
case "$connType_3G" in
	"no attribute information" | "no node information" )
	connType_3G="N/A";;
esac
echo "var connType_3G = '"$connType_3G"';"

connType_ADSL=`"$tcapi_path"tcapi get DeviceInfo_PVC0 connType`
connType_ADSL=`"$tcapi_path"alpha_tcapi $connType_ADSL`
case "$connType_ADSL" in
	"no attribute information" | "no node information" )
	connType_ADSL="N/A";;
esac
echo "var connType_ADSL = '"$connType_ADSL"';"

connType_VDSL=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 connType`
connType_VDSL=`"$tcapi_path"alpha_tcapi $connType_VDSL`
case "$connType_VDSL" in
	"no attribute information" | "no node information" )
	connType_VDSL="N/A";;
esac
echo "var connType_VDSL = '"$connType_VDSL"';"


connIP_3G=`"$tcapi_path"tcapi get DongleInfo WanIP`
connIP_3G=`"$tcapi_path"alpha_tcapi $connIP_3G`
case "$connIP_3G" in
	"no attribute information" | "no node information" )
	connIP_3G="N/A";;
esac
echo "var connIP_3G = '"$connIP_3G"';"

connIP_ADSL=`"$tcapi_path"tcapi get DeviceInfo_PVC0 WanIP`
connIP_ADSL=`"$tcapi_path"alpha_tcapi $connIP_ADSL`
case "$connIP_ADSL" in
	"no attribute information" | "no node information" )
	connIP_ADSL="N/A";;
esac
echo "var connIP_ADSL = '"$connIP_ADSL"';"

connIP_VDSL=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 WanIP`
connIP_VDSL=`"$tcapi_path"alpha_tcapi $connIP_VDSL`
case "$connIP_VDSL" in
	"no attribute information" | "no node information" )
	connIP_VDSL="N/A";;
esac
echo "var connIP_VDSL = '"$connIP_VDSL"';"


connMask_3G=`"$tcapi_path"tcapi get DongleInfo WanSubMask`
connMask_3G=`"$tcapi_path"alpha_tcapi $connMask_3G`
case "$connMask_3G" in
	"no attribute information" | "no node information" )
	connMask_3G="N/A";;
esac
echo "var connMask_3G = '"$connMask_3G"';"

connMask_ADSL=`"$tcapi_path"tcapi get DeviceInfo_PVC0 WanSubMask`
connMask_ADSL=`"$tcapi_path"alpha_tcapi $connMask_ADSL`
case "$connMask_ADSL" in
	"no attribute information" | "no node information" )
	connMask_ADSL="N/A";;
esac
echo "var connMask_ADSL = '"$connMask_ADSL"';"

connMask_VDSL=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 WanSubMask`
connMask_VDSL=`"$tcapi_path"alpha_tcapi $connMask_VDSL`
case "$connMask_VDSL" in
	"no attribute information" | "no node information" )
	connMask_VDSL="N/A";;
esac
echo "var connMask_VDSL = '"$connMask_VDSL"';"


connGW_3G=`"$tcapi_path"tcapi get DongleInfo WanDefGW`
connGW_3G=`"$tcapi_path"alpha_tcapi $connGW_3G`
case "$connGW_3G" in
	"no attribute information" | "no node information" )
	connGW_3G="N/A";;
esac
echo "var connGW_3G = '"$connGW_3G"';"

connGW_ADSL=`"$tcapi_path"tcapi get DeviceInfo_PVC0 WanDefGW`
connGW_ADSL=`"$tcapi_path"alpha_tcapi $connGW_ADSL`
case "$connGW_ADSL" in
	"no attribute information" | "no node information" )
	connGW_ADSL="N/A";;
esac
echo "var connGW_ADSL = '"$connGW_ADSL"';"

connGW_VDSL=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 WanDefGW`
connGW_VDSL=`"$tcapi_path"alpha_tcapi $connGW_VDSL`
case "$connGW_VDSL" in
	"no attribute information" | "no node information" )
	connGW_VDSL="N/A";;
esac
echo "var connGW_VDSL = '"$connGW_VDSL"';"

connMAC_3G=`"$tcapi_path"tcapi get DongleInfo WanMac`
connMAC_3G=`"$tcapi_path"alpha_tcapi $connMAC_3G`
case "$connMAC_3G" in
	"no attribute information" | "no node information" )
	connMAC_3G="N/A";;
esac
echo "var connMAC_3G = '"$connMAC_3G"';"

connMAC_ADSL=`"$tcapi_path"tcapi get DeviceInfo_PVC0 WanMac`
connMAC_ADSL=`"$tcapi_path"alpha_tcapi $connMAC_ADSL`
case "$connMAC_ADSL" in
	"no attribute information" | "no node information" )
	connMAC_ADSL="N/A";;
esac
echo "var connMAC_ADSL = '"$connMAC_ADSL"';"

connMAC_VDSL=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 WanMac`
connMAC_VDSL=`"$tcapi_path"alpha_tcapi $connMAC_VDSL`
case "$connMAC_VDSL" in
	"no attribute information" | "no node information" )
	connMAC_VDSL="N/A";;
esac
echo "var connMAC_VDSL = '"$connMAC_VDSL"';"

dns_type=`"$tcapi_path"tcapi get Dproxy_Entry type`
dns_type=`"$tcapi_path"alpha_tcapi $dns_type`
case "$dns_type" in
	"no attribute information" | "no node information" )
	dns_type="N/A";;
esac
echo "var dns_type = '"$dns_type"';"
dns_dp_1=`"$tcapi_path"tcapi get Dproxy_Entry Primary_DNS`
dns_dp_1=`"$tcapi_path"alpha_tcapi $dns_dp_1`
case "$dns_dp_1" in
	"no attribute information" | "no node information" )
	dns_dp_1="N/A";;
esac
echo "var dns_dp_1 = '"$dns_dp_1"';"
dns_dp_2=`"$tcapi_path"tcapi get Dproxy_Entry Secondary_DNS`
dns_dp_2=`"$tcapi_path"alpha_tcapi $dns_dp_2`
case "$dns_dp_2" in
	"no attribute information" | "no node information" )
	dns_dp_2="N/A";;
esac
echo "var dns_dp_2 = '"$dns_dp_2"';"

connDNS1_3G=`"$tcapi_path"tcapi get DongleInfo DNSIP`
connDNS1_3G=`"$tcapi_path"alpha_tcapi $connDNS1_3G`
case "$connDNS1_3G" in
	"no attribute information" | "no node information" )
	connDNS1_3G="N/A";;
esac
echo "var connDNS1_3G = '"$connDNS1_3G"';"
connDNS2_3G=`"$tcapi_path"tcapi get DongleInfo SECDNSIP`
connDNS2_3G=`"$tcapi_path"alpha_tcapi $connDNS2_3G`
case "$connDNS2_3G" in
	"no attribute information" | "no node information" )
	connDNS2_3G="N/A";;
esac
echo "var connDNS2_3G = '"$connDNS2_3G"';"

connDNS1_ADSL=`"$tcapi_path"tcapi get DeviceInfo_PVC0 DNSIP`
connDNS1_ADSL=`"$tcapi_path"alpha_tcapi $connDNS1_ADSL`
case "$connDNS1_ADSL" in
	"no attribute information" | "no node information" )
	connDNS1_ADSL="N/A";;
esac
echo "var connDNS1_ADSL = '"$connDNS1_ADSL"';"
connDNS2_ADSL=`"$tcapi_path"tcapi get DeviceInfo_PVC0 SECDNSIP`
connDNS2_ADSL=`"$tcapi_path"alpha_tcapi $connDNS2_ADSL`
case "$connDNS2_ADSL" in
	"no attribute information" | "no node information" )
	connDNS2_ADSL="N/A";;
esac
echo "var connDNS2_ADSL = '"$connDNS2_ADSL"';"

connDNS1_VDSL=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 DNSIP`
connDNS1_VDSL=`"$tcapi_path"alpha_tcapi $connDNS1_VDSL`
case "$connDNS1_VDSL" in
	"no attribute information" | "no node information" )
	connDNS1_VDSL="N/A";;
esac
echo "var connDNS1_VDSL = '"$connDNS1_VDSL"';"
connDNS2_VDSL=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 SECDNSIP`
connDNS2_VDSL=`"$tcapi_path"alpha_tcapi $connDNS2_VDSL`
case "$connDNS2_VDSL" in
	"no attribute information" | "no node information" )
	connDNS2_VDSL="N/A";;
esac
echo "var connDNS2_VDSL = '"$connDNS2_VDSL"';"



for i in 0 1 2 3 4 5 6 7
do 
	connType_adsl=`"$tcapi_path"tcapi get DeviceInfo_PVC$i connType`
	if [ "$connType_adsl" != "Bridge" ] ; then
		status_adsl=`"$tcapi_path"tcapi get DeviceInfo_PVC$i Status`
		if [ "$status_adsl" = "1" ] ; then
			wanip_adsl=`"$tcapi_path"tcapi get DeviceInfo_PVC$i WanIP`
			if [ "$wanip_adsl" != "10.64.64.64" ] ; then
				internet_status_adsl_all=1
			fi
		fi
	fi
done

for i in 0 1 2 3 4 5 6 7
do 
	connType_fiber=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e$i connType`
	if [ "$connType_fiber" != "Bridge" ] ; then
		status_fiber=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e$i Status`
		if [ "$status_fiber" = "1" ] ; then
			wanip_ptm=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e$i WanIP`
			if [ "$wanip_ptm" != "10.64.64.64" ] ; then
				internet_status_ptm_all=1
			fi
		fi
	fi
done

status_3g=`"$tcapi_path"tcapi get DongleInfo Status`
if [ "$status_3g" = "1" ] ; then
	internet_status_3g=1
fi


connType_adsl=`"$tcapi_path"tcapi get DeviceInfo_PVC0 connType`
if [ "$connType_adsl" != "Bridge" ] ; then
	status_adsl=`"$tcapi_path"tcapi get DeviceInfo_PVC0 Status`
	if [ "$status_adsl" = "1" ] ; then
		wanip_adsl=`"$tcapi_path"tcapi get DeviceInfo_PVC0 WanIP`
		if [ "$wanip_adsl" != "10.64.64.64" ] ; then
			internet_status_adsl=1
		fi
	fi
fi

if [ "$connType_adsl" = "Bridge" ] ; then
		if [ "$lineState" = "up" ] ; then
			internet_status_adsl=1
		fi
fi

connType_fiber=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 connType`
if [ "$connType_fiber" != "Bridge" ] ; then
	status_fiber=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 Status`
	if [ "$status_fiber" = "1" ] ; then
		wanip_ptm=`"$tcapi_path"tcapi get DeviceInfoExt_PVC8e0 WanIP`
		if [ "$wanip_ptm" != "10.64.64.64" ] ; then
			internet_status_ptm=1
		fi
	fi
fi

if [ "$connType_fiber" = "Bridge" ] ; then
		if [ "$lineState" = "up" ] ; then
			internet_status_ptm=1
		fi
fi

echo "var internet_status_adsl= '$internet_status_adsl';"
echo "var internet_status_ptm= '$internet_status_ptm';"
echo "var internet_status_3g= '$internet_status_3g';"
echo "var internet_status_adsl_all= '$internet_status_adsl_all';"
echo "var internet_status_ptm_all= '$internet_status_ptm_all';"