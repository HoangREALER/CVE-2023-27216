#!/bin/sh
echo -e "Content-Type: text/html\n\n"
tcapi_path=/userfs/bin/

LeaseNum=`/userfs/bin/tcapi get LanHost LeaseNum`
LeaseNum=`/userfs/bin/alpha_tcapi $LeaseNum`
echo "Total_Clients = parseInt('"$LeaseNum"');"

i=0
while [ $i -ne $LeaseNum ]  
do  
	node_name="LanHost_Entry"$i
	IP=`/userfs/bin/tcapi get $node_name IP`
	IP=`/userfs/bin/alpha_tcapi $IP`
	MAC=`/userfs/bin/tcapi get $node_name MAC`
	MAC=`/userfs/bin/alpha_tcapi $MAC`
	Hostname=`/userfs/bin/tcapi get $node_name HostName`
	Hostname=`/userfs/bin/alpha_tcapi $Hostname`
	Type=`/userfs/bin/tcapi get $node_name InterfaceType`
	Type=`/userfs/bin/alpha_tcapi $Type`
	Types=`/userfs/bin/tcapi get $node_name TYPE`
	Types=`/userfs/bin/alpha_tcapi $Types`
	Alladdress=`/userfs/bin/tcapi get $node_name AddressSrc`
	Alladdress=`/userfs/bin/alpha_tcapi $Alladdress`
	ACTIVE=`/userfs/bin/tcapi get $node_name Active`
	ACTIVE=`/userfs/bin/alpha_tcapi $ACTIVE`
	
	case "$IP" in
        "no attribute information" | "no node information" )
		IP="N/A";;
	esac
	case "$MAC" in
	"no attribute information" | "no node information" )
		MAC="N/A";;
	esac
	case "$Hostname" in
	"no attribute information" | "no node information" )
		Hostname="N/A";;
	esac

	case "$Type" in
	"no attribute information" | "no node information" )
		Type="N/A";;
	esac

	case "$Types" in
	"no attribute information" | "no node information" )
		Types="N/A";;
	esac

	case "$Alladdress" in
	"no attribute information" | "no node information" )
		Alladdress="N/A";;
	esac

	case "$ACTIVE" in
	"no attribute information" | "no node information" )
		ACTIVE="N/A";;
	esac

	echo "var dhcpClient"$i"_ip = '"$IP"';"
	echo "var dhcpClient"$i"_mac = '"$MAC"';"
	echo "var dhcpClient"$i"_hostname = '"$Hostname"';"
	echo "var dhcpClient"$i"_type = '"$Type"';"
	echo "var dhcpClient"$i"_types = '"$Types"';"
	echo "var dhcpClient"$i"_add = '"$Alladdress"';"
	echo "var dhcpClient"$i"_active = '"$ACTIVE"';"

	i=`expr $i + 1`
done