#!/bin/sh
echo -e "Content-Type: text/html\n\n"
tcapi_path=/userfs/bin/
node_name="IpFilter_Common"
ipfilter_mode=`"$tcapi_path"tcapi get $node_name Mode`
ipfilter_mode=`"$tcapi_path"alpha_tcapi $ipfilter_mode`
case $ipfilter_mode in "no node information" | "no attribute information" | "connection error") ipfilter_mode="N/A"
esac
ipfilter_num=`"$tcapi_path"tcapi get $node_name Num`
ipfilter_num=`"$tcapi_path"alpha_tcapi $ipfilter_num`
case $ipfilter_num in "no node information" | "no attribute information" | "connection error") ipfilter_num="N/A"
esac

echo "var ipfilter_mode = '"$ipfilter_mode"';"
echo "var ipfilter_num = '"$ipfilter_num"';"

for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19
do 
	node_name="IpFilter_Entry"$i""
	ipfilter_name=`"$tcapi_path"tcapi get $node_name Name`
	ipfilter_name=`"$tcapi_path"alpha_tcapi $ipfilter_name`
	case $ipfilter_name in "no node information" | "no attribute information" | "connection error" | "-" | "&#45;") ipfilter_name="N/A"
		ipfilter_protocol="N/A"
		ipfilter_sip_type="N/A"
		ipfilter_sip_from="N/A"
		ipfilter_sip_to="N/A"
		ipfilter_interface="N/A"
		ipfilter_dip_type="N/A"
		ipfilter_dip_from="N/A"
		ipfilter_dip_to="N/A"
		ipfilter_dport_type="N/A"
		ipfilter_dport_from="N/A"
		ipfilter_dport_to="N/A"
		ipfilter_schedule="N/A"
		ipfilter_time="N/A"
		ipfilter_start="N/A"
		ipfilter_stop="N/A"
		ipfilter_days="N/A";;*)ipfilter_protocol=`"$tcapi_path"tcapi get $node_name Protocol`
		ipfilter_protocol=`"$tcapi_path"alpha_tcapi $ipfilter_protocol`
		ipfilter_sip_type=`"$tcapi_path"tcapi get $node_name SIP_Type`
		ipfilter_sip_type=`"$tcapi_path"alpha_tcapi $ipfilter_sip_type`
		ipfilter_sip_from=`"$tcapi_path"tcapi get $node_name SIP_From`
		ipfilter_sip_from=`"$tcapi_path"alpha_tcapi $ipfilter_sip_from`
		ipfilter_sip_to=`"$tcapi_path"tcapi get $node_name SIP_To`
		ipfilter_sip_to=`"$tcapi_path"alpha_tcapi $ipfilter_sip_to`
		ipfilter_interface=`"$tcapi_path"tcapi get $node_name D_interface`
		ipfilter_interface=`"$tcapi_path"alpha_tcapi $ipfilter_interface`
		ipfilter_dip_type=`"$tcapi_path"tcapi get $node_name DIP_Type`
		ipfilter_dip_type=`"$tcapi_path"alpha_tcapi $ipfilter_dip_type`
		ipfilter_dip_from=`"$tcapi_path"tcapi get $node_name DIP_From`
		ipfilter_dip_from=`"$tcapi_path"alpha_tcapi $ipfilter_dip_from`
		ipfilter_dip_to=`"$tcapi_path"tcapi get $node_name DIP_To`
		ipfilter_dip_to=`"$tcapi_path"alpha_tcapi $ipfilter_dip_to`
		ipfilter_dport_type=`"$tcapi_path"tcapi get $node_name DPORT_Type`
		ipfilter_dport_type=`"$tcapi_path"alpha_tcapi $ipfilter_dport_type`
		ipfilter_dport_from=`"$tcapi_path"tcapi get $node_name DPORT_From`
		ipfilter_dport_from=`"$tcapi_path"alpha_tcapi $ipfilter_dport_from`
		ipfilter_dport_to=`"$tcapi_path"tcapi get $node_name DPORT_To`
		ipfilter_dport_to=`"$tcapi_path"alpha_tcapi $ipfilter_dport_to`
		ipfilter_schedule=`"$tcapi_path"tcapi get $node_name SCH`
		ipfilter_schedule=`"$tcapi_path"alpha_tcapi $ipfilter_schedule`
		case $ipfilter_protocol in "no node information" | "no attribute information" | "connection error") ipfilter_protocol="N/A"
		esac
		case $ipfilter_sip_type in "no node information" | "no attribute information" | "connection error") ipfilter_sip_type="N/A"
		esac
		case $ipfilter_sip_from in "no node information" | "no attribute information" | "connection error") ipfilter_sip_from="N/A"
		esac
		case $ipfilter_sip_to in "no node information" | "no attribute information" | "connection error") ipfilter_sip_to="N/A"
		esac
		case $ipfilter_interface in "no node information" | "no attribute information" | "connection error") ipfilter_interface="N/A"
		esac
		case $ipfilter_dip_type in "no node information" | "no attribute information" | "connection error") ipfilter_dip_type="N/A"
		esac
		case $ipfilter_dip_from in "no node information" | "no attribute information" | "connection error") ipfilter_dip_from="N/A"
		esac
		case $ipfilter_dip_to in "no node information" | "no attribute information" | "connection error") ipfilter_dip_to="N/A"
		esac
		case $ipfilter_dport_type in "no node information" | "no attribute information" | "connection error") ipfilter_dport_type="N/A"
		esac
		case $ipfilter_dport_from in "no node information" | "no attribute information" | "connection error") ipfilter_dport_from="N/A"
		esac
		case $ipfilter_dport_to in "no node information" | "no attribute information" | "connection error") ipfilter_dport_to="N/A"
		esac
		case $ipfilter_schedule in "no node information" | "no attribute information" | "connection error") ipfilter_schedule="N/A"
		esac		
	esac
	echo "var ipfilter"$i"_name = '"$ipfilter_name"';"
	echo "var ipfilter"$i"_protocol = '"$ipfilter_protocol"';"
	echo "var ipfilter"$i"_sip_type = '"$ipfilter_sip_type"';"
	echo "var ipfilter"$i"_sip_from = '"$ipfilter_sip_from"';"
	echo "var ipfilter"$i"_sip_to = '"$ipfilter_sip_to"';"
	echo "var ipfilter"$i"_interface = '"$ipfilter_interface"';"
	echo "var ipfilter"$i"_dip_type = '"$ipfilter_dip_type"';"
	echo "var ipfilter"$i"_dip_from = '"$ipfilter_dip_from"';"
	echo "var ipfilter"$i"_dip_to = '"$ipfilter_dip_to"';"
	echo "var ipfilter"$i"_dport_type = '"$ipfilter_dport_type"';"
	echo "var ipfilter"$i"_dport_from = '"$ipfilter_dport_from"';"
	echo "var ipfilter"$i"_dport_to = '"$ipfilter_dport_to"';"
	echo "var ipfilter"$i"_schedule = '"$ipfilter_schedule"';"
done

node_name="Lan_Entry0"
lan_ip=`"$tcapi_path"tcapi get $node_name IP`
lan_ip=`"$tcapi_path"alpha_tcapi $lan_ip`
case $lan_ip in "no node information" | "no attribute information" | "connection error") lan_ip="N/A"
esac
echo "var lan0 = '"$lan_ip"';"

node_name="LanAlias_Entry"
lan_ip=`"$tcapi_path"tcapi get $node_name IP`
lan_ip=`"$tcapi_path"alpha_tcapi $lan_ip`
case $lan_ip in "no node information" | "no attribute information" | "connection error") lan_ip="N/A"
esac
echo "var lan1 = '"$lan_ip"';"



wan_pvc=`"$tcapi_path"tcapi get WebCurSet_Entry wan_pvc`
wan_pvc=`"$tcapi_path"alpha_tcapi $wan_pvc`
wan_pvc_ext=`"$tcapi_path"tcapi get WebCurSet_Entry wan_pvc_ext`
wan_pvc_ext=`"$tcapi_path"alpha_tcapi $wan_pvc_ext`

`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc 8`
for i in 0 1 2 3 4 5 6 7
do 
	`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc_ext $i`
	node_name="Wan_PVC"
	pvc_enable=`"$tcapi_path"tcapi get $node_name NATENABLE`
	pvc_enable=`"$tcapi_path"alpha_tcapi $pvc_enable`
	pvc_active=`"$tcapi_path"tcapi get $node_name Active`
	pvc_active=`"$tcapi_path"alpha_tcapi $pvc_active`
	case $pvc_enable in "no node information" | "no attribute information" | "connection error") pvc_enable="N/A"
	esac
	case $pvc_active in "no node information" | "no attribute information" | "connection error") pvc_active="N/A"
	esac
	echo "var WAN8_PVC"$i"_Enable = '"$pvc_enable"';"
	echo "var WAN8_PVC"$i"_active = '"$pvc_active"';"
done

`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc 10`
for i in 0 1 2 3 4 5 6 7
do 
	`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc_ext $i`
	node_name="Wan_PVC"
	pvc_enable=`"$tcapi_path"tcapi get $node_name NATENABLE`
	pvc_enable=`"$tcapi_path"alpha_tcapi $pvc_enable`
	pvc_active=`"$tcapi_path"tcapi get $node_name Active`
	pvc_active=`"$tcapi_path"alpha_tcapi $pvc_active`
	case $pvc_enable in "no node information" | "no attribute information" | "connection error") pvc_enable="N/A"
	esac
	case $pvc_active in "no node information" | "no attribute information" | "connection error") pvc_active="N/A"
	esac
	echo "var WAN0_PVC"$i"_Enable = '"$pvc_enable"';"
	echo "var WAN0_PVC"$i"_active = '"$pvc_active"';"
done

for i in 0 1 2 3 4 5 6 7
do 
	`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc $i`
	node_name="Wan_PVC"
	pvc_enable=`"$tcapi_path"tcapi get $node_name NATENABLE`
	pvc_enable=`"$tcapi_path"alpha_tcapi $pvc_enable`
	pvc_active=`"$tcapi_path"tcapi get $node_name Active`
	pvc_active=`"$tcapi_path"alpha_tcapi $pvc_active`
	case $pvc_enable in "no node information" | "no attribute information" | "connection error") pvc_enable="N/A"
	esac
	case $pvc_active in "no node information" | "no attribute information" | "connection error") pvc_active="N/A"
	esac
	echo "var PVC"$i"_Enable = '"$pvc_enable"';"
	echo "var PVC"$i"_active = '"$pvc_active"';"
done

`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc $wan_pvc`
`"$tcapi_path"tcapi set WebCurSet_Entry wan_pvc_ext $wan_pvc_ext`