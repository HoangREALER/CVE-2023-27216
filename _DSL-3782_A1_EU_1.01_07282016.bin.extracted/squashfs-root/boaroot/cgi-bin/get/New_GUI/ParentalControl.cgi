#!/bin/sh
echo -e "Content-Type: text/html\n\n"
tcapi_path=/userfs/bin/
node_name="UrlFilter_Common"
urlfilter_mode=`"$tcapi_path"tcapi get $node_name Mode`
urlfilter_mode=`"$tcapi_path"alpha_tcapi $urlfilter_mode`
case $urlfilter_mode in "no node information" | "no attribute information" | "connection error") urlfilter_mode="N/A"
esac
urlfilter_num=`"$tcapi_path"tcapi get $node_name Num`
urlfilter_num=`"$tcapi_path"alpha_tcapi $urlfilter_num`
case $urlfilter_num in "no node information" | "no attribute information" | "connection error") urlfilter_num="N/A"
esac

echo "var urlfilter_mode = '"$urlfilter_mode"';"
echo "var urlfilter_num = '"$urlfilter_num"';"

for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
do 
	node_name="UrlFilter_Entry"$i""
	urlfilter_name=`"$tcapi_path"tcapi get $node_name Name`
	urlfilter_name=`"$tcapi_path"alpha_tcapi $urlfilter_name`
	case $urlfilter_name in "no node information" | "no attribute information" | "connection error" | "") urlfilter_name="N/A"
		urlfilter_url="N/A";;*)urlfilter_url=`"$tcapi_path"tcapi get $node_name URL`
		urlfilter_url=`"$tcapi_path"alpha_tcapi $urlfilter_url`
		case $urlfilter_url in "no node information" | "no attribute information" | "connection error" | "") urlfilter_url="N/A"
		esac
		urlfilter_schedule=`"$tcapi_path"tcapi get $node_name SCH`
		urlfilter_schedule=`"$tcapi_path"alpha_tcapi $urlfilter_schedule`
		case $urlfilter_schedule in "no node information" | "no attribute information" | "connection error" | "") urlfilter_schedule="N/A"
		esac
	esac
	echo "var urlfilter"$i"_name = '"$urlfilter_name"';"
	echo "var urlfilter"$i"_url = '"$urlfilter_url"';"
	echo "var urlfilter"$i"_schedule = '"$urlfilter_schedule"';"
done