var mode = '<%TCWebApi_get("Dproxy_Entry","type","s")%>';
var wan_type = '<%TcWebApi_get("Wan_Common","TransMode","s")%>';

if(mode == "1")
{
	var preferredDns = '<%TCWebApi_get("Dproxy_Entry","Primary_DNS","s")%>';
	var alternateDns = '<%TCWebApi_get("Dproxy_Entry","Secondary_DNS","s")%>';
}
else
{
	if(wan_type == "Ethernet")
	{
		var success1 = 0;
		if(success1 == 0)
		{
			var defaultroute = '<%TCWebApi_get("WanExt_PVC10e0","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e0","DNSIP","s")%>';
				if(temp1 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e0","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e0","SECDNSIP","s")%>';
					success1 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("WanExt_PVC10e1","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e1","DNSIP","s")%>';
				if(temp1 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e1","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e1","SECDNSIP","s")%>';
					success1 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("WanExt_PVC10e2","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e2","DNSIP","s")%>';
				if(temp1 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e2","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e2","SECDNSIP","s")%>';
					success1 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("WanExt_PVC10e3","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e3","DNSIP","s")%>';
				if(temp1 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e3","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e3","SECDNSIP","s")%>';
					success1 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("WanExt_PVC10e4","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e4","DNSIP","s")%>';
				if(temp1 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e4","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e4","SECDNSIP","s")%>';
					success1 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("WanExt_PVC10e5","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e5","DNSIP","s")%>';
				if(temp1 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e5","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e5","SECDNSIP","s")%>';
					success1 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("WanExt_PVC10e6","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e6","DNSIP","s")%>';
				if(temp1 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e6","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e6","SECDNSIP","s")%>';
					success1 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("WanExt_PVC10e7","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e7","DNSIP","s")%>';
				if(temp1 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e7","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e7","SECDNSIP","s")%>';
					success1 = 1;
				}
			}
		}
		if(success1 == 0)
		{
			var temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e7","DNSIP","s")%>';
			if(temp1 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e7","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e7","SECDNSIP","s")%>';
				success1 = 1;
			}
			temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e6","DNSIP","s")%>';
			if(temp1 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e6","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e6","SECDNSIP","s")%>';
				success1 = 1;
			}
			temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e5","DNSIP","s")%>';
			if(temp1 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e5","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e5","SECDNSIP","s")%>';
				success1 = 1;
			}
			temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e4","DNSIP","s")%>';
			if(temp1 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e4","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e4","SECDNSIP","s")%>';
				success1 = 1;
			}
			temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e3","DNSIP","s")%>';
			if(temp1 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e3","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e3","SECDNSIP","s")%>';
				success1 = 1;
			}
			temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e2","DNSIP","s")%>';
			if(temp1 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e2","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e2","SECDNSIP","s")%>';
				success1 = 1;
			}
			temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e1","DNSIP","s")%>';
			if(temp1 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e1","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e1","SECDNSIP","s")%>';
				success1 = 1;
			}
			temp1 = '<%TCWebApi_get("DeviceInfoExt_PVC10e0","DNSIP","s")%>';
			if(temp1 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e0","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfoExt_PVC10e0","SECDNSIP","s")%>';
				success1 = 1;
			}
		}
		if(success1 == 0)
		{
			var preferredDns = '<%TCWebApi_get("Dproxy_Entry","Primary_DNS","s")%>';
			var alternateDns = '<%TCWebApi_get("Dproxy_Entry","Secondary_DNS","s")%>';
		}
	}
	else if(wan_type == "3G")
	{
		var temp = '<%TCWebApi_get("DongleInfo","DNSIP","s")%>';
		if(temp != "N/A" && temp != "")
		{
			var preferredDns = '<%TCWebApi_get("DongleInfo","DNSIP","s")%>';
			var alternateDns = '<%TCWebApi_get("DongleInfo","SECDNSIP","s")%>';		
		}
		else
		{
			var preferredDns = '<%TCWebApi_get("Dproxy_Entry","Primary_DNS","s")%>';
			var alternateDns = '<%TCWebApi_get("Dproxy_Entry","Secondary_DNS","s")%>';
		}
	}
	else
	{
		var success2 = 0;
		if(success2 == 0)
		{
			var defaultroute = '<%TCWebApi_get("Wan_PVC0","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp2 = '<%TCWebApi_get("DeviceInfo_PVC0","DNSIP","s")%>';
				if(temp2 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC0","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC0","SECDNSIP","s")%>';
					success2 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("Wan_PVC1","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp2 = '<%TCWebApi_get("DeviceInfo_PVC1","DNSIP","s")%>';
				if(temp2 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC1","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC1","SECDNSIP","s")%>';
					success2 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("Wan_PVC2","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp2 = '<%TCWebApi_get("DeviceInfo_PVC2","DNSIP","s")%>';
				if(temp2 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC2","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC2","SECDNSIP","s")%>';
					success2 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("Wan_PVC3","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp2 = '<%TCWebApi_get("DeviceInfo_PVC3","DNSIP","s")%>';
				if(temp2 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC3","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC3","SECDNSIP","s")%>';
					success2 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("Wan_PVC4","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp2 = '<%TCWebApi_get("DeviceInfo_PVC4","DNSIP","s")%>';
				if(temp2 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC4","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC4","SECDNSIP","s")%>';
					success2 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("Wan_PVC5","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp2 = '<%TCWebApi_get("DeviceInfo_PVC5","DNSIP","s")%>';
				if(temp2 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC5","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC5","SECDNSIP","s")%>';
					success2 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("Wan_PVC6","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp2 = '<%TCWebApi_get("DeviceInfo_PVC6","DNSIP","s")%>';
				if(temp2 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC6","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC6","SECDNSIP","s")%>';
					success2 = 1;
				}
			}
			defaultroute = '<%TCWebApi_get("Wan_PVC7","DEFAULTROUTE","s")%>';
			if(defaultroute == "Yes")
			{
				var temp2 = '<%TCWebApi_get("DeviceInfo_PVC7","DNSIP","s")%>';
				if(temp2 != "N/A")
				{
					var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC7","DNSIP","s")%>';
					var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC7","SECDNSIP","s")%>';
					success2 = 1;
				}
			}
			
		}
		if(success2 == 0)
		{

			var temp2 = '<%TCWebApi_get("DeviceInfo_PVC7","DNSIP","s")%>';
			if(temp2 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC7","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC7","SECDNSIP","s")%>';
				success2 = 1;
			}
			temp2 = '<%TCWebApi_get("DeviceInfo_PVC6","DNSIP","s")%>';
			if(temp2 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC6","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC6","SECDNSIP","s")%>';
				success2 = 1;
			}
			temp2 = '<%TCWebApi_get("DeviceInfo_PVC5","DNSIP","s")%>';
			if(temp2 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC5","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC5","SECDNSIP","s")%>';
				success2 = 1;
			}
			temp2 = '<%TCWebApi_get("DeviceInfo_PVC4","DNSIP","s")%>';
			if(temp2 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC4","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC4","SECDNSIP","s")%>';
				success2 = 1;
			}
			temp2 = '<%TCWebApi_get("DeviceInfo_PVC3","DNSIP","s")%>';
			if(temp2 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC3","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC3","SECDNSIP","s")%>';
				success2 = 1;
			}
			temp2 = '<%TCWebApi_get("DeviceInfo_PVC2","DNSIP","s")%>';
			if(temp2 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC2","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC2","SECDNSIP","s")%>';
				success2 = 1;
			}
			temp2 = '<%TCWebApi_get("DeviceInfo_PVC1","DNSIP","s")%>';
			if(temp2 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC1","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC1","SECDNSIP","s")%>';
				success2 = 1;
			}
			temp2 = '<%TCWebApi_get("DeviceInfo_PVC0","DNSIP","s")%>';
			if(temp2 != "N/A")
			{
				var preferredDns = '<%TCWebApi_get("DeviceInfo_PVC0","DNSIP","s")%>';
				var alternateDns = '<%TCWebApi_get("DeviceInfo_PVC0","SECDNSIP","s")%>';
				success2 = 1;
			}
		}
		if(success2 ==0)
		{
			var preferredDns = '<%TCWebApi_get("Dproxy_Entry","Primary_DNS","s")%>';
			var alternateDns = '<%TCWebApi_get("Dproxy_Entry","Secondary_DNS","s")%>';
		}		
	}
}

