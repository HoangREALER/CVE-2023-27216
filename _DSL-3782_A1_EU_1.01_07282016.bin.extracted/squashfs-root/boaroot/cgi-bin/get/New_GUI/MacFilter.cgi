#!/bin/sh
echo -e "Content-Type: text/html\n\n"
tcapi_path=/userfs/bin/
node_name="MacFilter_Common"
macfilter_mode=`"$tcapi_path"tcapi get $node_name Mode`
macfilter_mode=`"$tcapi_path"alpha_tcapi $macfilter_mode`
case $macfilter_mode in "no node information" | "no attribute information" | "connection error") macfilter_mode="N/A"
esac
macfilter_num=`"$tcapi_path"tcapi get $node_name Num`
macfilter_num=`"$tcapi_path"alpha_tcapi $macfilter_num`
case $macfilter_num in "no node information" | "no attribute information" | "connection error") macfilter_num="N/A"
esac

echo "var macFilter_enable = '"$macfilter_mode"';"
echo "var macFilter_num = '"$macfilter_num"';"



for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31
do 
	node_name="MacFilter_Entry"$i""
	macfilter_name=`"$tcapi_path"tcapi get $node_name Name`
	macfilter_name=`"$tcapi_path"alpha_tcapi $macfilter_name`
	case $macfilter_name in "no node information" | "no attribute information" | "connection error" | "-" | "&#45;") macfilter_name="N/A"
		macfilter_mac="N/A"
		macfilter_schedule="N/A"
		macfilter_time="N/A"
		macfilter_start="N/A"
		macfilter_stop="N/A"
		macfilter_days="N/A";;*)macfilter_mac=`"$tcapi_path"tcapi get $node_name Mac`
		macfilter_mac=`"$tcapi_path"alpha_tcapi $macfilter_mac`
		macfilter_schedule=`"$tcapi_path"tcapi get $node_name SCH`
		macfilter_schedule=`"$tcapi_path"alpha_tcapi $macfilter_schedule`
		case $macfilter_mac in "no node information" | "no attribute information" | "connection error" | "-" | "&#45;") macfilter_mac="N/A"
		esac
		case $macfilter_schedule in "no node information" | "no attribute information" | "connection error") macfilter_schedule="N/A"
		esac		
	esac
	echo "var macFilter"$i"_name = '"$macfilter_name"';"
	echo "var macFilter"$i"_mac = '"$macfilter_mac"';"
	echo "var macFilter"$i"_schedule = '"$macfilter_schedule"';"
done