<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns= "http://www.w3c.org/1999/xhtml">

<head>
<title>D-LINK</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Type" content="text/css">
<link rel=stylesheet type="text/css" href="/layout/New_GUI/jquery.selectbox.css?v=20140910163551" />
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/initialJS.js?v=20140910163551"></script>
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/initialCSS.js?v=20140910163551"></script>
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/initialJQ.js?v=20140910163551"></script>
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/initialValidate.js?v=20140910163551"></script>
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/configuration/DeviceConfig.js?v=TimeStamp_QzwsxDcRfvTGByHn"></script>
<!--<script src="/LanguageFamily/en/msg_multipe.js" type="text/javascript"></script>-->
<script type="text/javascript">
	var firewall_val = {
		"dos_status": "<%TCWebApi_get("Firewall_Entry","dos_status","s")%>",
		"tcp_att": "<%TCWebApi_get("Firewall_Entry","tcp_att","s")%>",
		"rst_att": "<%TCWebApi_get("Firewall_Entry","rst_att","s")%>",
		"fin_att": "<%TCWebApi_get("Firewall_Entry","fin_att","s")%>",
		"ping_att": "<%TCWebApi_get("Firewall_Entry","ping_att","s")%>",
		"psh_att": "<%TCWebApi_get("Firewall_Entry","psh_att","s")%>",
		"xmas_att": "<%TCWebApi_get("Firewall_Entry","xmas_att","s")%>",
		"null_att": "<%TCWebApi_get("Firewall_Entry","null_att","s")%>"
	};

	function Load_HTML() {
		$("#header").load("header.asp");
	}
	
	function Initial() {
		initialMenu();
	}

	function InitFW() {
		$(".checkbox_on, .checkbox_off").each(function() {
			var id_this = $(this).attr("id");
			var id_checked = id_this+"_ck";
			var vals = eval("firewall_val."+id_this);
			SetCheckBoxEnable(id_this, true, (vals == "1"?true:false));
		});

		if($("#dos_status_ck").attr("checked"))
			$("tbody[id='enabledos_tbody']").show();
		else
			$("tbody[id='enabledos_tbody']").hide();
		
		$("#main").show();
	}

	function doSave() {
		$(".checkbox_on, .checkbox_off").each(function() {
			var id_this = $(this).attr("id");
			var id_checked = id_this+"_ck";
			firewall_val[id_this] = ($("#"+id_checked).attr("checked")?1:0);
		});
	
		document.getElementById("CreatePopAlertMessage").style.display = "inline";
		document.getElementById("waitSettingFinish").style.display = "inline";
		Start_reciprocal_Number_RestoreConfiguration();

		$.get("/cgi-bin/get/New_GUI/get_sessionKey.asp", function(sessionKey){
			firewall_val.sessionKey = sessionKey;
			setTimeout('$.post("/cgi-bin/New_GUI/Set/Firewall.asp", firewall_val, function(){save_flag = true;});', 300);
		});	
	}

	var save_flag = false;
	var _ReciprocalNumber = 10;
	function Start_reciprocal_Number_RestoreConfiguration() {
		if (_ReciprocalNumber >= 0) {
			document.getElementById("reciprocal_Number").innerHTML = _ReciprocalNumber + " " + I18N("j", m_comm_Sec);
			_ReciprocalNumber --;
			setTimeout("Start_reciprocal_Number_RestoreConfiguration()", 1000);
		} else {
			if(save_flag) {
				document.getElementById("waitSettingFinish").style.display = "none";
				document.getElementById("SuccessSettings").style.display = "inline";
			} else {
				setTimeout("Start_reciprocal_Number_RestoreConfiguration()", 1000);
			}
		}
	}
</script>
<script language="JavaScript">
	$(function() {
		$("button").click(function () { save_button_changed(); });
		$("input, textarea, select").change(function () { save_button_changed(); });
		$("input, textarea").keypress(function () { save_button_changed(); });

		$(".checkbox_on, .checkbox_off").click(function() {
			SetCheckBoxEnable($(this).attr("id"));
		});

		$("#dos_status").click(function() {
			if($("#dos_status_ck").attr("checked"))
				$("tbody[id='enabledos_tbody']").show();
			else
				$("tbody[id='enabledos_tbody']").hide();
		});
	});
</script>
</head>

<body>
	<form method="POST" action="">
		<div id="wrapper">
			<!-------------------- Logo ------------------------->
			<div id="header"></div>
			<!-------------------- Menu ------------------------->
			<div id="menu"></div>
			<!-------------------- Content ---------------------->
			<div id="content">
				<!-------------------- info ------------------------->
				<div id="info">
					<div id="FunctionName"><script>I18N("h", m_firewall_title);</script></div>
					<div id="wallimage"><img src="/graphic/New_GUI/wall.png" alt="" width="195" height="119"/></div>
					<div id="directions">
						<script>I18N("h", m_firewall_desc);</script>
					</div>
				</div>
				<!-------------------- funcBar ---------------------->
				<div id="funcBar">
					<div id="pagePath">&nbsp;<script>I18N("h", m_comm_features);</script> >> <script>I18N("h", m_firewall_title);</script></div>
					<ul id="rightFunc">
						<li style="display:block"><div id="Save_btn" onclick="document.getElementById('sumbit_CheckData').click()" style="cursor:pointer; display:none"><script>I18N("h", m_comm_Save);</script></div></li>
						<li style="display:block"><div id="Save_Disable_btn"><script>I18N("h", m_comm_Save);</script></div></li>
						<input id="sumbit_CheckData" class="submit" type="button" value="Submit" style="display:none" onClick="doSave();"/>
					</ul>
				</div>
	     	<!-------------------- main ---------------------->
	     	<div id="main" style="display:none">
				<!-------------------- LAN Router Settings ---------------------->
				<div>
					<table class="block" border="0" cellspacing="0" style="margin: 10px 0 0 0;">
						<tbody>
							<tr>
								<td><div class ="title"><script>I18N("h", m_comm_Firewall);</script></div></td>
								<td></td>
							</tr>

							<tr>
								<th><script>I18N("h", m_firewall_enabledos);</script>:</th>
								<td>
									<div id="dos_status" class="checkbox_on">
										<input type="checkbox" id="dos_status_ck" name="dos_status_ck">
									</div>
								</td>
							</tr>

							<tbody id="enabledos_tbody" style="display: none;">
								<tr>
									<td colspan="2">
										<hr />
									</td>
								</tr>
								<tr>
									<th><script>I18N("h", m_firewall_syntcp);</script>:</th>
									<td>
										<div class="checkbox_on" id="tcp_att">
											<input type="checkbox" id="tcp_att_ck" name="tcp_att_ck">
										</div>
									</td>
								</tr>

								<tr>
									<th><script>I18N("h", m_firewall_synrst);</script>:</th>
									<td>
										<div class="checkbox_on" id="rst_att">
											<input type="checkbox" id="rst_att_ck" name="rst_att_ck">
										</div>
									</td>
								</tr>

								<tr>
									<th><script>I18N("h", m_firewall_synfin);</script>:</th>
									<td>
										<div class="checkbox_on" id="fin_att">
											<input type="checkbox" id="fin_att_ck" name="fin_att_ck">
										</div>
									</td>
								</tr>

								<tr>
									<th><script>I18N("h", m_firewall_ping);</script>:</th>
									<td>
										<div class="checkbox_on" id="ping_att">
											<input type="checkbox" id="ping_att_ck" name="ping_att_ck">
										</div>
									</td>
								</tr>

								<tr>
									<th><script>I18N("h", m_firewall_finurg);</script>:</th>
									<td>
										<div class="checkbox_on" id="psh_att">
											<input type="checkbox" id="psh_att_ck" name="psh_att_ck">
										</div>
									</td>
								</tr>

								<tr>
									<th><script>I18N("h", m_firewall_xmas_);</script>:</th>
									<td>
										<div class="checkbox_on" id="xmas_att">
											<input type="checkbox" id="xmas_att_ck" name="xmas_att_ck">
										</div>
									</td>
								</tr>

								<tr>
									<th><script>I18N("h", m_firewall_nullscan);</script>:</th>
									<td>
										<div class="checkbox_on" id="null_att">
											<input type="checkbox" id="null_att_ck" name="null_att_ck">
										</div>
									</td>
								</tr>
							</tbody>								
						</tbody>
					</table>						
				</div>

				
				<div id="CreatePopAlertMessage" style="display:none">
					<div id="AlertPopRect">
						<div id="AlertPopBody">
							<table class="myAlertPop_table_b" id="waitSettingFinish" border="0" cellspacing="0" style="display:none">
							   <tbody>
									 <tr>
									 	<td>
											<center><div id="Loading_pop_image2"></div></center>
										</td>
									 </tr>
									 <tr>
									 	<td><center><label id="reciprocal_Number">10</label></center></td>
									 </tr>
									 <tr>
									 	<td id="dialog_msg_black2"><script>I18N("h", m_comm_changesdesc);</script></td>
									 </tr>
							   </tbody>
							</table>
							<table class="myAlertPop_table_b" id="SuccessSettings" border="0" cellspacing="0"  style="display:none">
							   <tbody>
									 <tr>
									 	<td>
											<center><div id="Information_pop_image"></div></center>
										</td>
									 </tr>
									 <tr>
										 <td>
										 	<div id="dialog_msg_black"><script>I18N("h", m_comm_settingsave);</script></div>
										 </td>
									 </tr>
									 <tr>
										 <td>
										 	<center><div id="Confirm_btn" onclick="javascript: self.location.href = self.location.href;" style="cursor:pointer"><script>I18N("h", m_comm_ok);</script></div></center>
										 </td>
									 </tr>
							   </tbody>
							</table>
						</div>
					</div>
				</div>					
				<div id="DetectRouterConnection" style="display:none"></div>
				<div id="footer" border="0">
					<div id="copyright"><script>prints(m_comm_copyright);</script></div>
					<div id="help">
						<a target="_blank" href="http://www.dlink.com/support" style="cursor:pointer;text-Decoration:underline">
							
								<script>prints(m_home_gethelp);</script>
							
						</a>
					</div>
				</div>
			</div>
		</div>
	</form>
</body>
<script type="text/javascript">
	Load_HTML();
	Initial();
	setMenu("menu_Advanced");
	InitFW();
</script>
</html>
