<%
If Request_Form("buttonType")="apply" Then
	TCWebAPI_set("Lan_Snoop","snoopEnable","igmpsnoopEnable")
	TCWebApi_commit("Lan_Snoop")
If Request_Form("Wanshowhiddenflag")="adslshow" Then
	if Request_Form("pvc_proxy_0")<>"N/A" Then
		TCWebAPI_set("Wan_PVC0","IGMPproxy","pvc_proxy_0")
	end if
	if Request_Form("pvc_proxy_1")<>"N/A" Then
		TCWebAPI_set("Wan_PVC1","IGMPproxy","pvc_proxy_1")
	end if
	if Request_Form("pvc_proxy_2")<>"N/A" Then
		TCWebAPI_set("Wan_PVC2","IGMPproxy","pvc_proxy_2")
	end if
	if Request_Form("pvc_proxy_3")<>"N/A" Then
		TCWebAPI_set("Wan_PVC3","IGMPproxy","pvc_proxy_3")
	end if
	if Request_Form("pvc_proxy_4")<>"N/A" Then
		TCWebAPI_set("Wan_PVC4","IGMPproxy","pvc_proxy_4")
	end if
	if Request_Form("pvc_proxy_5")<>"N/A" Then
		TCWebAPI_set("Wan_PVC5","IGMPproxy","pvc_proxy_5")
	end if
	if Request_Form("pvc_proxy_6")<>"N/A" Then
		TCWebAPI_set("Wan_PVC6","IGMPproxy","pvc_proxy_6")
	end if
	if Request_Form("pvc_proxy_7")<>"N/A" Then
		TCWebAPI_set("Wan_PVC7","IGMPproxy","pvc_proxy_7")
	end if
elseif Request_Form("Wanshowhiddenflag")="ethshow" Then
	if Request_Form("eth_proxy_0")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","10")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","0")
		TCWebAPI_set("Wan_PVC","IGMPproxy","eth_proxy_0")
	end if
	if Request_Form("eth_proxy_1")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","10")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","1")
		TCWebAPI_set("Wan_PVC","IGMPproxy","eth_proxy_1")
	end if
	if Request_Form("eth_proxy_2")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","10")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","2")
		TCWebAPI_set("Wan_PVC","IGMPproxy","eth_proxy_2")
	end if
	if Request_Form("eth_proxy_3")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","10")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","3")
		TCWebAPI_set("Wan_PVC","IGMPproxy","eth_proxy_3")
	end if
	if Request_Form("eth_proxy_4")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","10")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","4")
		TCWebAPI_set("Wan_PVC","IGMPproxy","eth_proxy_4")
	end if
	if Request_Form("eth_proxy_5")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","10")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","5")
		TCWebAPI_set("Wan_PVC","IGMPproxy","eth_proxy_5")
	end if
	if Request_Form("eth_proxy_6")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","10")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","6")
		TCWebAPI_set("Wan_PVC","IGMPproxy","eth_proxy_6")
	end if
	if Request_Form("eth_proxy_7")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","10")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","7")
		TCWebAPI_set("Wan_PVC","IGMPproxy","eth_proxy_7")
	end if
elseif Request_Form("Wanshowhiddenflag")="ptmshow" Then
	if Request_Form("ptm_proxy_0")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","8")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","0")
		TCWebAPI_set("Wan_PVC","IGMPproxy","ptm_proxy_0")
	end if
	if Request_Form("ptm_proxy_1")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","8")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","1")
		TCWebAPI_set("Wan_PVC","IGMPproxy","ptm_proxy_1")
	end if
	if Request_Form("ptm_proxy_2")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","8")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","2")
		TCWebAPI_set("Wan_PVC","IGMPproxy","ptm_proxy_2")
	end if
	if Request_Form("ptm_proxy_3")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","8")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","3")
		TCWebAPI_set("Wan_PVC","IGMPproxy","ptm_proxy_3")
	end if
	if Request_Form("ptm_proxy_4")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","8")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","4")
		TCWebAPI_set("Wan_PVC","IGMPproxy","ptm_proxy_4")
	end if
	if Request_Form("ptm_proxy_5")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","8")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","5")
		TCWebAPI_set("Wan_PVC","IGMPproxy","ptm_proxy_5")
	end if
	if Request_Form("ptm_proxy_6")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","8")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","6")
		TCWebAPI_set("Wan_PVC","IGMPproxy","ptm_proxy_6")
	end if
	if Request_Form("ptm_proxy_7")<>"N/A" Then
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc","8")
		TcWebApi_Set_Str("WebCurSet_Entry","wan_pvc_ext","7")
		TCWebAPI_set("Wan_PVC","IGMPproxy","ptm_proxy_7")
	end if
end if
	TCWebAPI_set("IGMPproxy_Entry","Version","igmpVersion")
	TCWebApi_commit("IGMPproxy_Entry")
	TCWebApi_commit("Wan_PVC")
end if
%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns= "http://www.w3c.org/1999/xhtml">

<head>
<title>D-LINK</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Type" content="text/css">
<link rel=stylesheet type="text/css" href="/layout/New_GUI/jquery.selectbox.css?v=20140910163551" />
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/initialJS.js?v=20140910163551"></script>
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/initialCSS.js?v=20140910163551"></script>
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/initialJQ.js?v=20140910163551"></script>
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/initialValidate.js?v=20140910163551"></script>
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/__comm.js?v=20140910163551"></script>
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/__js_comm.js?v=20140910163551"></script>

<!-- get -->
<script src="/cgi-bin/get/New_GUI/Igmp.cgi" type="text/javascript"></script>
<!-- get -->

<!-- js -->
<script src="/js/New_GUI/Advanced/Igmp.js" type="text/javascript"></script> 
<script type="text/javascript" charset="utf-8" src="/js/New_GUI/initialLang.js"></script>
<!-- js -->

<script type="text/javascript">
	function Load_HTML()	{	$("#header").load("header.asp");	}
	function Initial()
	{
		initialMenu();
	}
	function GetXML()	{
		document.getElementById("main").style.display = "inline";	
	}
</script>

<script type="text/javascript" language="JavaScript">	

	$(function() {
		$("input,select").change(function () {	save_button_changed();	});
		$("input").keydown(function () {	save_button_changed();	});
	});
	function save_button_changed()
	{
		document.getElementById("Save_Disable_btn").style.display = "none";
		document.getElementById("Save_btn").style.display = "block";
		changeFlag = true;
		checkFlag = true;
	}	
	
	$(document).ready( function() {
		initIGMP();
		$("select").selectbox();
	});
</script>

</head>

<body>
<form name="frm" id="frm" method="POST" action="">
<input type="hidden" name="sessionKey" id="sessionKey" value="<% tcWebApi_get("Account_Login","sessionKey","s") %>">
<input type="hidden" name="buttonType" id="buttonType">
<input type="hidden" name="igmpsnoopEnable" id="igmpsnoopEnable">
<input type="hidden" name="igmpVersion" id="igmpVersion">
<input type="hidden" name="Wanshowhiddenflag" value="0">

<input type="hidden" name="pvc_proxy_0" value="<%TCWebApi_get("Wan_PVC0","IGMPproxy","s")%>">
<input type="hidden" name="pvc_proxy_1" value="<%TCWebApi_get("Wan_PVC1","IGMPproxy","s")%>">
<input type="hidden" name="pvc_proxy_2" value="<%TCWebApi_get("Wan_PVC2","IGMPproxy","s")%>">
<input type="hidden" name="pvc_proxy_3" value="<%TCWebApi_get("Wan_PVC3","IGMPproxy","s")%>">
<input type="hidden" name="pvc_proxy_4" value="<%TCWebApi_get("Wan_PVC4","IGMPproxy","s")%>">
<input type="hidden" name="pvc_proxy_5" value="<%TCWebApi_get("Wan_PVC5","IGMPproxy","s")%>">
<input type="hidden" name="pvc_proxy_6" value="<%TCWebApi_get("Wan_PVC6","IGMPproxy","s")%>">
<input type="hidden" name="pvc_proxy_7" value="<%TCWebApi_get("Wan_PVC7","IGMPproxy","s")%>">

<input type="hidden" name="ptm_proxy_0" value="<%TCWebApi_get("Wan_PVC8e0","IGMPproxy","s")%>">
<input type="hidden" name="ptm_proxy_1" value="<%TCWebApi_get("Wan_PVC8e1","IGMPproxy","s")%>">
<input type="hidden" name="ptm_proxy_2" value="<%TCWebApi_get("Wan_PVC8e2","IGMPproxy","s")%>">
<input type="hidden" name="ptm_proxy_3" value="<%TCWebApi_get("Wan_PVC8e3","IGMPproxy","s")%>">
<input type="hidden" name="ptm_proxy_4" value="<%TCWebApi_get("Wan_PVC8e4","IGMPproxy","s")%>">
<input type="hidden" name="ptm_proxy_5" value="<%TCWebApi_get("Wan_PVC8e5","IGMPproxy","s")%>">
<input type="hidden" name="ptm_proxy_6" value="<%TCWebApi_get("Wan_PVC8e6","IGMPproxy","s")%>">
<input type="hidden" name="ptm_proxy_7" value="<%TCWebApi_get("Wan_PVC8e7","IGMPproxy","s")%>">

<input type="hidden" name="eth_proxy_0" value="<%TCWebApi_get("Wan_PVC10e0","IGMPproxy","s")%>">
<input type="hidden" name="eth_proxy_1" value="<%TCWebApi_get("Wan_PVC10e1","IGMPproxy","s")%>">
<input type="hidden" name="eth_proxy_2" value="<%TCWebApi_get("Wan_PVC10e2","IGMPproxy","s")%>">
<input type="hidden" name="eth_proxy_3" value="<%TCWebApi_get("Wan_PVC10e3","IGMPproxy","s")%>">
<input type="hidden" name="eth_proxy_4" value="<%TCWebApi_get("Wan_PVC10e4","IGMPproxy","s")%>">
<input type="hidden" name="eth_proxy_5" value="<%TCWebApi_get("Wan_PVC10e5","IGMPproxy","s")%>">
<input type="hidden" name="eth_proxy_6" value="<%TCWebApi_get("Wan_PVC10e6","IGMPproxy","s")%>">
<input type="hidden" name="eth_proxy_7" value="<%TCWebApi_get("Wan_PVC10e7","IGMPproxy","s")%>">

	<div id="wrapper">
		<!-------------------- Logo ------------------------->
		<div id="header"></div>
		<!-------------------- Menu ------------------------->
		<div id="menu"></div>
		<div id="menu_edge"></div>
		<!-------------------- Content ---------------------->
		<div id="content">
			<!-------------------- info ---------------------->
	  		<div id="info">
			  	<div id="FunctionName">IGMP</div>
			  	<div id="wallimage"><!-- <img id="page_igmp" src="" alt="" width="195" height="119"/> --></div>
			    <div id="directions">
			    		<script>prints(m_igmp_dsc);</script>
					<label id="Get_Help" onClick="showOnlineHelp('Igmp');" style="cursor:pointer;display:none;text-Decoration:underline"><script>prints(m_comm_clickhelp);</script></label>
				</div>
			</div>
		    <!-------------------- funcBar ---------------------->
		<div id="funcBar">
			<div id="pagePath"><script>prints(m_comm_features);</script> >> IGMP</div>
			<ul id="rightFunc">
				<li style="display:block"><div id="Save_btn" onclick="doSubmit();" style="cursor:pointer; display:none"><script>I18N("h", m_comm_Save);</script></div></li>
				<li style="display:block"><div id="Save_Disable_btn"><script>I18N("h", m_comm_Save);</script></div></li>
			</ul>
		</div>
	    	<!-- ------------------ main ----------------------- -->
	     	<div id="main" style="display:none">
	     		<!-- ------------------ alert pop ----------------------- -->
			<div id="CreatePopAlertMessage" style="display:none">
				<div id="AlertPopRect">
					<div id="AlertPopBody">
						<table class="myAlertPop_table_b" id="waitSettingFinish" border="0" cellspacing="0" style="display:none">
						   <tbody>
								 <tr>
								 	<td>
										<center><div id="Loading_pop_image2"></div></center>
									</td>
								 </tr>
								 <tr>
								 	<td><center><label id="reciprocal_Number">10</label></center></td>
								 </tr>
								 <tr>
								 	<td id="dialog_msg_black2"><script>I18N("h", m_comm_changesdesc);</script></td>
								 </tr>
						   </tbody>
						</table>
						<table class="myAlertPop_table_b" id="SuccessSettings" border="0" cellspacing="0"  style="display:none">
						   <tbody>
								 <tr>
								 	<td>
										<center><div id="Information_pop_image"></div></center>
									</td>
								 </tr>
								 <tr>
									 <td>
									 	<div id="dialog_msg_black"><script>I18N("h", m_comm_settingsave);</script></div>
									 </td>
								 </tr>
								 <tr>
									 <td>
									 	<center><div id="Confirm_btn" onclick="javascript: self.location.href = self.location.href;" style="cursor:pointer"><script>I18N("h", m_comm_ok);</script></div></center>
									 </td>
								 </tr>
						   </tbody>
						</table>
					</div>
				</div>
			</div>
			
	     		<!-- ------------------ general -------------------- -->
				<table class="block" border="0" cellspacing="0" ondragstart="return false" onselectstart="return false" style="margin: 10px 0 0 0;">
					<tr>
				     		<th><script>I18N("h", m_igmp_ess);</script>:</th>	
						<td valign="top">
							<div id="supportState" class="checkbox_on" onclick="changeSnooping();">
								<input type="checkbox" name="supportState_ck" id="supportState_ck">
							</div>
						</td>
					</tr>	
					
					<tbody id="ptm_show" style="display:none"></tbody>
					
					<tbody id="adsl_show" style="display:none"></tbody>
					
					<tbody id="eth_show" style="display:none"></tbody>

					<tr>
						<th>IGMP V1/V2/V3:</th>
						<td>
							<div id="igmpversion" class="checkbox_on" onclick="changeVersion();">
								<input type="checkbox" name="igmpversion_ck" id="igmpversion_ck">
							</div>
						</td>
					</tr>
				</table>				
		 	
			 <div id="DetectRouterConnection" style="display:none"></div>
		</div>
		<div id="footer" border="0">
			<div id="copyright"><script>prints(m_comm_copyright);</script></div>
			<div id="help">
				<a target="_blank" href="http://www.dlink.com/support" style="cursor:pointer;text-Decoration:underline">
					
						<script>prints(m_home_gethelp);</script>
					
				</a>
			</div>
		</div>
	</div>
	
</form>
</body>
<script type="text/javascript">
	Load_HTML();
	Initial();
	setMenu("menu_Advanced");
	GetXML();
</script>
</html>
